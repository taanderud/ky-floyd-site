/*  AdBridg Connect v2.1.0, copyright AdBridg Inc. All rights reserved. 5eec30b4:kuojee3b:29d */
!function r(n,o,a){function s(i,e){if(!o[i]){if(!n[i]){var t="function"==typeof require&&require;if(!e&&t)return t(i,!0);if(d)return d(i,!0);throw new Error("Cannot find module '"+i+"'")}t=o[i]={exports:{}};n[i][0].call(t.exports,function(e){var t=n[i][1][e];return s(t||e)},t,t.exports,r,n,o,a)}return o[i].exports}for(var d="function"==typeof require&&require,e=0;e<a.length;e++)s(a[e]);return s}({1:[function(e,t,i){"use strict";function r(t,e){var i,r=Object.keys(t);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(t),e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,i)),r}function a(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach(function(e){n(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var s=e("../shim.js").polyfills,d=(s.registerBidder,s.config),c=s.deepAccess,o=s.uniques,u=s.isArray,p=s.getWindowTop,l=s.isGptPubadsDefined,g=s.isSlotMatchingAdUnitCode,f=s.logInfo,m=s.logWarn,h=s.getWindowSelf,b=s.BANNER,v=s.VIDEO,y="33across",_="https://ssc.33across.com/api/v1/hb",w="https://ssc-cms.33across.com/ps/?m=xch&rt=html&ru=deb",x="USD",S=/^[a-zA-Z0-9_-]{22}$/,I={SIAB:"siab",INVIEW:"inview",INSTREAM:"instream"},A=["mimes","minduration","maxduration","placement","protocols","startdelay","skip","skipafter","minbitrate","maxbitrate","delivery","playbackmethod","api","linearity"],k={uniqueSiteIds:[]},z="nm";function E(e,t,i){e=0<arguments.length&&void 0!==e?e:{};return s.utils.assign({},e,{ext:s.utils.assign({},e.ext,n({},1<arguments.length?t:void 0,2<arguments.length?i:void 0))})}function j(e){return{w:parseInt(e[0],10),h:parseInt(e[1],10)}}function T(e){var t=e.params,i=e.mediaTypes,e=i.banner,i=i.video;return i&&!e&&"instream"===i.context?I.INSTREAM:t.productId===I.INVIEW?t.productId:I.SIAB}function C(e,t,i){t=e.getFloor({currency:x,mediaType:i,size:[t.w,t.h]});if(!isNaN(t.floor)&&t.currency===x)return t.floor}var O={NON_MEASURABLE:z,code:y,supportedMediaTypes:[b,v],isBidRequestValid:function(e){return(t=e).bidder===y&&void 0!==t.params&&!!function(e){return null!==(c(e,"params.siteId","")||"").trim().match(S)}(t)&&function(e){e=c(e,"mediaTypes.banner");return void 0===e||!!Array.isArray(e.sizes)}(e)&&function(e){var t=c(e,"mediaTypes.video"),e=c(e,"params.video",{});if(void 0===t)return!0;if(!Array.isArray(t.playerSize))return!1;if(!t.context)return!1;e=a(a({},t),e);return!(!Array.isArray(e.mimes)||0===e.mimes.length)&&(!(!Array.isArray(e.protocols)||0===e.protocols.length)&&((void 0===e.placement||"number"==typeof e.placement)&&("instream"!==t.context||void 0===e.startdelay||"number"==typeof e.startdelay)))}(e);var t},buildRequests:function(e,t){var i=s.utils.assign({consentString:void 0,gdprApplies:!1},t&&t.gdprConsent),r=t&&t.uspConsent,n=t&&t.refererInfo?t.refererInfo.referer:void 0;return k.uniqueSiteIds=e.map(function(e){return e.params.siteId}).filter(o),e.map(function(e){return function(e){var t=e.bidRequest,i=e.gdprConsent,r=void 0===i?{}:i,n=e.uspConsent,o=e.pageUrl,i={},e=t.params;i.imp=[{}],c(t,"mediaTypes.banner")&&(i.imp[0].banner=a({},function(r){var e=c(r,"mediaTypes.banner",{}),t=function(e){return document.getElementById(e)||document.getElementById(function(e){if(l())for(var t=googletag.pubads().getSlots(),i=g(e),r=0;r<t.length;r++)if(i(t[r])){var n=t[r].getSlotElementId();return f("[33Across Adapter] Map ad unit path to HTML element id: '".concat(e,"' -> ").concat(n)),n}return m("[33Across Adapter] Unable to locate element for ad unit code: '".concat(e,"'")),null}(e))}(r.adUnitCode),i=function(e){return!u(e)||2!==e.length||u(e[0])?e.map(j):[j(e)]}(e.sizes);e="function"==typeof r.getFloor?i.map(function(e){var t,i=C(r,e,b);return s.utils.assign({},e,t=i?{ext:{ttx:{bidfloors:[i]}}}:t)}):i;i=function(e){return e.reduce(function(e,t){return t.h*t.w<e.h*e.w?t:e})}(i),i=function(e){return{ttx:{viewability:{amount:isNaN(e)?e:Math.round(e)}}}}(function(e){return!function(){try{return h()!==p()}catch(e){return!0}}()&&null!==e}(t)?function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=i.w,i=i.h;return"visible"===t.document.visibilityState?function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=i.w,i=i.h,i=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=t.w,r=t.h,n=e.getBoundingClientRect(),o=n.width,a=n.height,s=n.left,t=n.top,e=n.right,n=n.bottom;(0===o||0===a)&&i&&r&&(e=s+(o=i),n=t+(a=r));return{width:o,height:a,left:s,top:t,right:e,bottom:n}}(e,{w:r,h:i}),t=function(e){for(var t={left:e[0].left,right:e[0].right,top:e[0].top,bottom:e[0].bottom},i=1;i<e.length;++i){if(t.left=Math.max(t.left,e[i].left),t.right=Math.min(t.right,e[i].right),t.left>=t.right)return null;if(t.top=Math.max(t.top,e[i].top),t.bottom=Math.min(t.bottom,e[i].bottom),t.top>=t.bottom)return null}return t.width=t.right-t.left,t.height=t.bottom-t.top,t}([{left:0,top:0,right:t.innerWidth,bottom:t.innerHeight},i]);return null===t?0:(t=t.width*t.height,i=i.width*i.height,t/i*100)}(e,t,{w:r,h:i}):0}(t,p(),i):z);return{format:e,ext:i}}(t)));c(t,"mediaTypes.video")&&(i.imp[0].video=function(e){var t=c(e,"mediaTypes.video",{}),i=c(e,"params.video",{}),r=a(a({},t),i),n={},t=j(r.playerSize[0]),i=t.w,t=t.h;n.w=i,n.h=t,A.forEach(function(e){r.hasOwnProperty(e)&&(n[e]=r[e])});t=T(e);n.placement=n.placement||2,t===I.INSTREAM&&(n.startdelay=n.startdelay||0,n.placement=1);"function"!=typeof e.getFloor||(e=C(e,{w:n.w,h:n.h},v))&&s.utils.assign(n,{ext:{ttx:{bidfloors:[e]}}});return n}(t));i.imp[0].ext={ttx:{prod:T(t)}},i.site={id:e.siteId},o&&(i.site.page=o);i.id=t.bidId,r.consentString&&(i.user=E(i.user,"consent",r.consentString));Array.isArray(t.userIdAsEids)&&0<t.userIdAsEids.length&&(i.user=E(i.user,"eids",t.userIdAsEids));i.regs=E(i.regs,"gdpr",Number(r.gdprApplies)),n&&(i.regs=E(i.regs,"us_privacy",n));i.ext={ttx:{prebidStartedAt:Date.now(),caller:[{name:"prebidjs",version:"5.18.0-pre"}]}},t.schain&&(i.source=E(i.source,"schain",t.schain));1===e.test&&(i.test=1);t=d.getConfig("ttxSettings");return{method:"POST",url:t&&t.url||"".concat(_,"?guid=").concat(e.siteId),data:JSON.stringify(i),options:{contentType:"text/plain",withCredentials:!0}}}({bidRequest:e,gdprConsent:i,uspConsent:r,pageUrl:n})})},interpretResponse:function(e,t){var i=[];return 0<e.body.seatbid.length&&0<e.body.seatbid[0].bid.length&&i.push(function(e){var t=e.seatbid[0].bid[0].adomain&&e.seatbid[0].bid[0].adomain.length,i={requestId:e.id,bidderCode:y,cpm:e.seatbid[0].bid[0].price,width:e.seatbid[0].bid[0].w,height:e.seatbid[0].bid[0].h,ad:e.seatbid[0].bid[0].adm,ttl:e.seatbid[0].bid[0].ttl||60,creativeId:e.seatbid[0].bid[0].crid,mediaType:c(e.seatbid[0].bid[0],"ext.ttx.mediaType",b),currency:e.cur,netRevenue:!0};t&&(i.meta={advertiserDomains:e.seatbid[0].bid[0].adomain});i.mediaType===v&&("xml"===c(e.seatbid[0].bid[0],"ext.ttx.vastType","xml")?i.vastXml=i.ad:i.vastUrl=i.ad);return i}(e.body)),i},getUserSyncs:function(e,t,i,r){return e=e.iframeEnabled?k.uniqueSiteIds.map(function(e){return function(e){var t=e.siteId,i=void 0===t?"zzz000000000003zzz":t,r=e.gdprConsent,n=void 0===r?{}:r,t=e.uspConsent,r=d.getConfig("ttxSettings"),e=r&&r.syncUrl||w,r=n.consentString,n=n.gdprApplies,t={type:"iframe",url:"".concat(e,"&id=").concat(i,"&gdpr_consent=").concat(encodeURIComponent(r),"&us_privacy=").concat(encodeURIComponent(t))};"boolean"==typeof n&&(t.url+="&gdpr=".concat(Number(n)));return t}({gdprConsent:i,uspConsent:r,siteId:e})}):[],k.uniqueSiteIds=[],e}};t.exports=e("../shim.js").wrap({spec:O,unitIDKey:"siteId",floorKey:"bidFloor",floorStr:!1,uspSupport:!0,gdprSupport:!0})},{"../shim.js":33}],2:[function(e,t,i){"use strict";var r,n,o;function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){return t=t||e.slice(0),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var d=e("../shim.js").polyfills,c=d.isInteger,u=d.logError,p=d.isEmpty,l=d.logWarn,g=d.getUniqueIdentifierStr,f=d._each,m=d.deepSetValue,h=(d.registerBidder,d.BANNER),b={AOL:"aol",VERIZON:"verizon",ONEMOBILE:"onemobile",ONEDISPLAY:"onedisplay"},v={GET:"display-get"},y={GET:"mobile-get",POST:"mobile-post"},_={TAG:"iframe",TYPE:"iframe"},w={TAG:"img",TYPE:"image"},x=["adserver.org","criteo.com","id5-sync.com","intentiq.com","liveintent.com","quantcast.com","verizonmedia.com","liveramp.com"],S=E(r=r||s(["","/pubapi/3.0/","/","/","/","/ADTECH;v=2;cmd=bid;cors=yes;alias=",";misc=",";",""]),"host","network","placement","pageid","sizeid","alias","misc","dynamicParams"),I=E(n=n||s(["","/bidRequest?"]),"host"),A=E(o=o||s(["dcn=","&pos=","&cmd=bid",""]),"dcn","pos","dynamicParams"),k={us:"adserver-us.adtech.advertising.com",eu:"adserver-eu.adtech.advertising.com",as:"adserver-as.adtech.advertising.com"},z=1;function E(o){for(var e=arguments.length,a=new Array(1<e?e-1:0),t=1;t<e;t++)a[t-1]=arguments[t];return function(){for(var e=arguments.length,i=new Array(e),t=0;t<e;t++)i[t]=arguments[t];var r=i[i.length-1]||{},n=[o[0]];return a.forEach(function(e,t){e=(c(e)?i:r)[e];n.push(e,o[t+1])}),n.join("")}}function j(e){return e===b.AOL||e===b.VERIZON||e===b.ONEMOBILE}function T(e){if(j(e.bidder)&&e.params.id&&e.params.imp&&e.params.imp[0]){e=e.params.imp[0];return e.id&&e.tagid&&e.banner&&e.banner.w&&e.banner.h}}function C(e){return j(e.bidder)&&e.params.dcn&&e.params.pos}function O(e){return((t=e.bidder)===b.AOL||t===b.VERIZON||t===b.ONEDISPLAY)&&e.params.placement&&e.params.network;var t}function R(e){return e.userIdAsEids.filter(function(e){return-1!==x.indexOf(e.source)})}h={code:b.AOL,gvlid:25,aliases:[b.ONEMOBILE,b.ONEDISPLAY,b.VERIZON],supportedMediaTypes:[h],isBidRequestValid:function(e){return O(e)||(C(e=e)||T(e))},buildRequests:function(e,t){var i=this,r={};return t&&(r.gdpr=t.gdprConsent,r.uspConsent=t.uspConsent),e.map(function(e){var t,t=C(t=e)?y.GET:T(t)?y.POST:O(t)?v.GET:void 0;if(t)return i.formatBidRequest(t,e,r)})},interpretResponse:function(e,t){var i=e.body;if(i){e=this._parseBidResponse(i,t);if(e)return e}else u("Empty bid response",t.bidderCode,i)},getUserSyncs:function(e,t){t=!p(t)&&t[0].body;return t&&t.ext&&t.ext.pixels?this.parsePixelItems(t.ext.pixels):[]},formatBidRequest:function(e,t,i){var r;switch(e){case v.GET:r={url:this.buildMarketplaceUrl(t,i),method:"GET",ttl:60};break;case y.GET:r={url:this.buildOneMobileGetUrl(t,i),method:"GET",ttl:3600};break;case y.POST:r={url:this.buildOneMobileBaseUrl(t),method:"POST",ttl:3600,data:this.buildOpenRtbRequestData(t,i),options:{contentType:"application/json",customHeaders:{"x-openrtb-version":"2.2"}}}}return r.bidderCode=t.bidder,r.bidId=t.bidId,r.userSyncOn=t.params.userSyncOn,r},buildMarketplaceUrl:function(e,t){var i=e.params,r=i.server,e=i.region||"us";return k.hasOwnProperty(e)||(l("Unknown region '".concat(e,"' for AOL bidder.")),e="us"),r=r||k[e],i.region=e,this.applyProtocol(S({host:r,network:i.network,placement:parseInt(i.placement),pageid:i.pageId||0,sizeid:i.sizeId||0,alias:i.alias||g(),misc:(new Date).getTime(),dynamicParams:this.formatMarketplaceDynamicParams(i,t)}))},buildOneMobileGetUrl:function(e,t){var i=e.params,r=i.dcn,n=i.pos,o=i.ext;"object"===a(e.userId)&&(o=o||{},R(e).forEach(function(e){o["eid"+e.source]=e.uids[0].id}));e=this.buildOneMobileBaseUrl(e);return r&&n&&(t=this.formatOneMobileDynamicParams(o,t),e+=A({dcn:r,pos:n,dynamicParams:t})),e},buildOneMobileBaseUrl:function(e){return this.applyProtocol(I({host:e.params.host||"c2shb.ssp.yahoo.com"}))},applyProtocol:function(e){return/^https?:\/\//i.test(e)?e:(0===e.indexOf("//")?"".concat("https",":"):"".concat("https","://")).concat(e)},formatMarketplaceDynamicParams:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i={};d.utils.assign(i,this.formatKeyValues(e.keyValues)),d.utils.assign(i,this.formatConsentData(t));var r="";return f(i,function(e,t){r+="".concat(t,"=").concat(encodeURIComponent(e),";")}),r},formatOneMobileDynamicParams:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.isSecureProtocol()&&(e.secure=z),d.utils.assign(e,this.formatConsentData(t));var i="";return f(e,function(e,t){i+="&".concat(t,"=").concat(encodeURIComponent(e))}),i},buildOpenRtbRequestData:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i={id:e.params.id,imp:e.params.imp};return this.isEUConsentRequired(t)&&(m(i,"regs.ext.gdpr",z),t.gdpr.consentString&&m(i,"user.ext.consent",t.gdpr.consentString)),t.uspConsent&&m(i,"regs.ext.us_privacy",t.uspConsent),"object"===a(e.userId)&&(i.user=i.user||{},i.user.ext=i.user.ext||{},0<(e=R(e)).length&&(i.user.ext.eids=e)),i},isEUConsentRequired:function(e){return!!(e&&e.gdpr&&e.gdpr.gdprApplies)},formatKeyValues:function(e){var i={};return f(e,function(e,t){i["kv".concat(t)]=e}),i},formatConsentData:function(e){var t={};return this.isEUConsentRequired(e)&&(t.gdpr=z,e.gdpr.consentString&&(t.euconsent=e.gdpr.consentString)),e.uspConsent&&(t.us_privacy=e.uspConsent),t},parsePixelItems:function(e){var i=/\w*(?=\s)/,r=/src=("|')(.*?)\1/,n=[];return!e||(e=e.match(/(img|iframe)[\s\S]*?src\s*=\s*("|')(.*?)\2/gi))&&e.forEach(function(e){var t=e.match(i)[0],e=e.match(r)[2];t&&e&&n.push({type:(t===w.TAG?w:_).TYPE,url:e})}),n},_parseBidResponse:function(e,t){var i,r;try{i=e.seatbid[0].bid[0]}catch(e){return}if(i.ext&&i.ext.encp)r=i.ext.encp;else if(null===(r=i.price)||isNaN(r))return void u("Invalid price in bid response",b.AOL,i);return{bidderCode:t.bidderCode,requestId:t.bidId,ad:i.adm,cpm:r,width:i.w,height:i.h,creativeId:i.crid||0,pubapiId:e.id,currency:e.cur||"USD",dealId:i.dealid,netRevenue:!0,meta:{advertiserDomains:i&&i.adomain?i.adomain:[]},ttl:t.ttl}},isOneMobileBidder:j,isSecureProtocol:function(){return"https:"===document.location.protocol}};t.exports=e("../shim.js").wrap({spec:h,unitIDKey:"placement",floorKey:"bidFloor",floorStr:!1,uspSupport:!0,gdprSupport:!0})},{"../shim.js":33}],3:[function(e,t,i){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(i="Object"===i&&e.constructor?e.constructor.name:i)||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?r(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}var p=e("../shim.js").polyfills,b=p.convertCamelToUnderscore,v=p.isArray,y=p.isNumber,_=p.isPlainObject,w=p.logError,x=p.logInfo,S=p.deepAccess,l=p.logMessage,n=p.convertTypes,g=p.isStr,I=p.getParameterByName,A=p.deepClone,k=p.chunk,f=p.logWarn,m=p.getBidRequest,z=p.createTrackPixelHtml,s=p.isEmpty,d=p.transformBidderParamKeywords,E=p.getMaxValueFromArray,j=p.fill,T=p.getMinValueFromArray,c=p.isArrayOfNums,u=p.isFn,C=p.Renderer,O=p.config,R=(p.registerBidder,p.getIabSubCategory),B=p.BANNER,P=p.NATIVE,U=p.VIDEO,D=p.ADPOD,N=p.auctionManager,q=p.find,F=p.includes,M=p.OUTSTREAM,G=p.INSTREAM,a=p.getStorageManager,L="appnexus",W=["id","minduration","maxduration","skippable","playback_method","frameworks","context","skipoffset"],K=["minduration","maxduration","skip","skipafter","playbackmethod","api"],Y=["age","externalUid","segments","gender","dnt","language"],V=["geo","device_id"],H=["enabled","dongle","member_id","debug_timeout"],J={playback_method:{unknown:0,auto_play_sound_on:1,auto_play_sound_off:2,click_to_play:3,mouse_over:4,auto_play_sound_unknown:5},context:{unknown:0,pre_roll:1,mid_roll:2,post_roll:3,outstream:4,"in-banner":5}},X={body:"description",body2:"desc2",cta:"ctatext",image:{serverName:"main_image",requiredParams:{required:!0}},icon:{serverName:"icon",requiredParams:{required:!0}},sponsoredBy:"sponsored_by",privacyLink:"privacy_link",salePrice:"saleprice",displayUrl:"displayurl"},Q="<script",$=/\/\/cdn\.adnxs\.com\/v|\/\/cdn\.adnxs\-simple\.com\/v/,Z="trk.js",ee=a(32,L),L={code:L,gvlid:32,aliases:[{code:"appnexusAst",gvlid:32},{code:"brealtime"},{code:"emxdigital",gvlid:183},{code:"pagescience"},{code:"defymedia"},{code:"gourmetads"},{code:"matomy"},{code:"featureforward"},{code:"oftmedia"},{code:"districtm",gvlid:144},{code:"adasta"},{code:"beintoo",gvlid:618},{code:"targetVideo"}],supportedMediaTypes:[B,U,P],isBidRequestValid:function(e){return!!(e.params.placementId||e.params.member&&e.params.invCode)},buildRequests:function(e,t){var r=e.map(oe),n=q(e,se),o={};!0===O.getConfig("coppa")&&(o={coppa:!0}),n&&Object.keys(n.params.user).filter(function(e){return F(Y,e)}).forEach(function(e){var t,i=b(e);"segments"===e&&v(n.params.user[e])?(t=[],n.params.user[e].forEach(function(e){y(e)?t.push({id:e}):_(e)&&t.push(e)}),o[i]=t):"segments"!==e&&(o[i]=n.params.user[e])});var i,a=q(e,ce);a&&a.params&&a.params.app&&(i={},Object.keys(a.params.app).filter(function(e){return F(V,e)}).forEach(function(e){return i[e]=a.params.app[e]}));var s=q(e,ue);s&&s.params&&a.params.app&&a.params.app.id&&(l={appid:s.params.app.id});var d={},c={},u=ee.getCookie("apn_prebid_debug")||null;if(u)try{d=JSON.parse(u)}catch(e){w("AppNexus Debug Auction Cookie Error:\n\n"+e)}else{var p=q(e,pe);p&&p.debug&&(d=p.debug)}d&&d.enabled&&Object.keys(d).filter(function(e){return F(H,e)}).forEach(function(e){c[e]=d[e]});var l,g,f=q(e,de),u=f?parseInt(f.params.member,10):0,p=e[0].schain,f=q(e,ge),m={tags:h(r),user:o,sdk:{source:"pbjs",version:"5.18.0-pre"},schain:p};return f&&(m.iab_support={omidpn:"Appnexus",omidpv:"5.18.0-pre"}),0<u&&(m.member_id=u),a&&(m.device=i),s&&(m.app=l),O.getConfig("adpod.brandCategoryExclusion")&&(m.brand_category_uniqueness=!0),c.enabled&&(m.debug=c,x("AppNexus Debug Auction Settings:\n\n"+JSON.stringify(c,null,4))),t&&t.gdprConsent&&(m.gdpr_consent={consent_string:t.gdprConsent.consentString,consent_required:t.gdprConsent.gdprApplies},t.gdprConsent.addtlConsent&&-1!==t.gdprConsent.addtlConsent.indexOf("~")&&(l=(l=t.gdprConsent.addtlConsent).substring(l.indexOf("~")+1),m.gdpr_consent.addtl_consent=l.split(".").map(function(e){return parseInt(e,10)}))),t&&t.uspConsent&&(m.us_privacy=t.uspConsent),t&&t.refererInfo&&(g={rd_ref:encodeURIComponent(t.refererInfo.referer),rd_top:t.refererInfo.reachedTop,rd_ifs:t.refererInfo.numIframes,rd_stk:t.refererInfo.stack.map(function(e){return encodeURIComponent(e)}).join(",")},m.referrer_detection=g),q(e,le)&&e.filter(le).forEach(function(t){var e=function(e,t){var i=t.mediaTypes.video,r=i.durationRangeSec,n=i.requireExactDuration,i=function(e){var t=e.adPodDurationSec,i=e.durationRangeSec,r=e.requireExactDuration,e=T(i),e=Math.floor(t/e);return r?Math.max(e,i.length):e}(t.mediaTypes.video),o=E(r),e=e.filter(function(e){return e.uuid===t.bidId}),e=j.apply(void 0,h(e).concat([i]));{var a;n?(i=Math.ceil(i/r.length),a=k(e,i),r.forEach(function(t,e){a[e].map(function(e){fe(e,"minduration",t),fe(e,"maxduration",t)})})):e.map(function(e){return fe(e,"maxduration",o)})}return e}(r,t),i=m.tags.filter(function(e){return e.uuid!==t.bidId});m.tags=[].concat(h(i),h(e))}),e[0].userId&&(he(g=[],S(e[0],"userId.flocId.id"),"chrome.com",null),he(g,S(e[0],"userId.criteoId"),"criteo.com",null),he(g,S(e[0],"userId.netId"),"netid.de",null),he(g,S(e[0],"userId.idl_env"),"liveramp.com",null),he(g,S(e[0],"userId.tdid"),"adserver.org","TDID"),he(g,S(e[0],"userId.uid2.id"),"uidapi.com","UID2"),g.length&&(m.eids=g)),r[0].publisher_id&&(m.publisher_id=r[0].publisher_id),function(e,t){var i=[],r={withCredentials:!0},n="https://ib.adnxs.com/ut/v3/prebid";ne(t)||(n="https://ib.adnxs-simple.com/ut/v3/prebid");"TRUE"!==I("apn_test").toUpperCase()&&!0!==O.getConfig("apn_test")||(r.customHeaders={"X-Is-Test":1});{var o;15<e.tags.length?(o=A(e),k(e.tags,15).forEach(function(e){o.tags=e;e=JSON.stringify(o);i.push({method:"POST",url:n,data:e,bidderRequest:t,options:r})})):(e=JSON.stringify(e),i={method:"POST",url:n,data:e,bidderRequest:t,options:r})}return i}(m,t)},interpretResponse:function(e,t){var i=this,r=t.bidderRequest;e=e.body;var n=[];if(e&&!e.error)return e.tags&&e.tags.forEach(function(e){var t,t=(t=e)&&t.ads&&t.ads.length&&q(t.ads,function(e){return e.rtb});t&&0!==t.cpm&&F(i.supportedMediaTypes,t.ad_type)&&((e=function(t,e,i){var r=m(t.uuid,[i]),n={requestId:t.uuid,cpm:e.cpm,creativeId:e.creative_id,dealId:e.deal_id,currency:"USD",netRevenue:!0,ttl:300,adUnitCode:r.adUnitCode,appnexus:{buyerMemberId:e.buyer_member_id,dealPriority:e.deal_priority,dealCode:e.deal_code}};e.adomain&&(n.meta=p.utils.assign({},n.meta,{advertiserDomains:[]}));e.advertiser_id&&(n.meta=p.utils.assign({},n.meta,{advertiserId:e.advertiser_id}));if(e.rtb.video)switch(p.utils.assign(n,{width:e.rtb.video.player_width,height:e.rtb.video.player_height,vastImpUrl:e.notify_url,ttl:3600}),S(r,"mediaTypes.video.context")){case D:var o=R(r.bidder,e.brand_category_id);n.meta=p.utils.assign({},n.meta,{primaryCatId:o});var o=e.deal_priority;n.video={context:D,durationSeconds:Math.floor(e.rtb.video.duration_ms/1e3),dealTier:o},n.vastUrl=e.rtb.video.asset_url;break;case M:n.adResponse=t,n.adResponse.ad=n.adResponse.ads[0],n.adResponse.ad.video=n.adResponse.ad.rtb.video,n.vastXml=e.rtb.video.content,e.renderer_url&&(o=q(i.bids,function(e){return e.bidId===t.uuid}),o=S(o,"renderer.options"),n.renderer=function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=C.install({id:t.renderer_id,url:t.renderer_url,config:i,loaded:!1,adUnitCode:e});try{i.setRender(me)}catch(e){f("Prebid Error calling setRender on renderer",e)}return i.setEventHandlers({impression:function(){return l("AppNexus outstream video impression event")},loaded:function(){return l("AppNexus outstream video loaded event")},ended:function(){l("AppNexus outstream renderer video event"),document.querySelector("#".concat(e)).style.display="none"}}),i}(n.adUnitCode,e,o));break;case G:n.vastUrl=e.notify_url+"&redir="+encodeURIComponent(e.rtb.video.asset_url)}else if(e.rtb[P]){var a=e.rtb[P],s=e.viewability.config.replace("src=","data-src="),d=a.javascript_trackers;null==d?d=s:g(d)?d=[d,s]:d.push(s),n[P]={title:a.title,body:a.desc,body2:a.desc2,cta:a.ctatext,rating:a.rating,sponsoredBy:a.sponsored,privacyLink:a.privacy_link,address:a.address,downloads:a.downloads,likes:a.likes,phone:a.phone,price:a.price,salePrice:a.saleprice,clickUrl:a.link.url,displayUrl:a.displayurl,clickTrackers:a.link.click_trackers,impressionTrackers:a.impression_trackers,javascriptTrackers:d},a.main_img&&(n.native.image={url:a.main_img.url,height:a.main_img.height,width:a.main_img.width}),a.icon&&(n.native.icon={url:a.icon.url,height:a.icon.height,width:a.icon.width})}else{p.utils.assign(n,{width:e.rtb.banner.width,height:e.rtb.banner.height,ad:e.rtb.banner.content});try{var c,u;e.rtb.trackers&&(c=e.rtb.trackers[0].impression_urls[0],u=z(c),n.ad+=u)}catch(e){w("Error appending tracking pixel",e)}}return n}(e,t,r)).mediaType=function(e){e=e.ad_type;return e===U?U:e===P?P:B}(t),n.push(e))}),e.debug&&e.debug.debug_info&&(o=(o="AppNexus Debug Auction for Prebid\n\n"+e.debug.debug_info).replace(/(<td>|<th>)/gm,"\t").replace(/(<\/td>|<\/th>)/gm,"\n").replace(/^<br>/gm,"").replace(/(<br>\n|<br>)/gm,"\n").replace(/<h1>(.*)<\/h1>/gm,"\n\n===== $1 =====\n\n").replace(/<h[2-6]>(.*)<\/h[2-6]>/gm,"\n\n*** $1 ***\n\n").replace(/(<([^>]+)>)/gim,""),l("https://console.appnexus.com/docs/understanding-the-debug-auction"),l(o)),n;var o="in response for ".concat(r.bidderCode," adapter");return e&&e.error&&(o+=": ".concat(e.error)),w(o),n},getMappingFileInfo:function(){return{url:"https://acdn.adnxs-simple.com/prebid/appnexus-mapping/mappings.json",refreshInDays:2}},getUserSyncs:function(e,t,i){if(e.iframeEnabled&&ne({gdprConsent:i}))return[{type:"iframe",url:"https://acdn.adnxs.com/dmp/async_usersync.html"}]},transformBidParams:function(i,e){return i=n({member:"string",invCode:"string",placementId:"number",keywords:d,publisherId:"number"},i),e&&(i.use_pmt_rule="boolean"==typeof i.usePaymentRule&&i.usePaymentRule,i.usePaymentRule&&delete i.usePaymentRule,te(i.keywords)&&i.keywords.forEach(ie),Object.keys(i).forEach(function(e){var t=b(e);t!==e&&(i[t]=i[e],delete i[e])})),i},onBidWon:function(e){e.native&&function(e){var t=function(e){var t;if(g(e)&&re(e))t=e;else if(v(e))for(var i=0;i<e.length;i++){var r=e[i];re(r)&&(t=r)}return t}(e.native.javascriptTrackers);if(t)for(var e="pbjs_adid="+e.adId+";pbjs_auc="+e.adUnitCode,i=function(e){var t=e.indexOf('src="')+5,i=e.indexOf('"',t);return e.substring(t,i)}(t),r=i.replace("dom_id=%native_dom_id%",e),n=document.getElementsByTagName("iframe"),o=!1,a=0;a<n.length&&!o;a++){var s=n[a];try{var d=s.contentDocument||s.contentWindow.document;if(d)for(var c=d.getElementsByTagName("script"),u=0;u<c.length&&!o;u++){var p=c[u];p.getAttribute("data-src")==i&&(p.setAttribute("src",r),p.setAttribute("data-src",""),p.removeAttribute&&p.removeAttribute("data-src"),o=!0)}}catch(e){if(!(e instanceof DOMException&&"SecurityError"===e.name))throw e}}}(e)}};function te(e){return v(e)&&0<e.length}function ie(e){te(e.value)&&""===e.value[0]&&delete e.value}function re(e){var t=e.match($),i=null!=t&&1<=t.length,t=e.match(Z),t=null!=t&&1<=t.length;return e.startsWith(Q)&&t&&i}function ne(e){var t=!0;return t=e&&e.gdprConsent&&e.gdprConsent.gdprApplies&&2===e.gdprConsent.apiVersion?!(!0!==S(e.gdprConsent,"vendorData.purpose.consents.1")):t}function oe(i){var r={};r.sizes=ae(i.sizes),r.primary_size=r.sizes[0],r.ad_types=[],r.uuid=i.bidId,i.params.placementId?r.id=parseInt(i.params.placementId,10):r.code=i.params.invCode,r.allow_smaller_sizes=i.params.allowSmallerSizes||!1,r.use_pmt_rule=i.params.usePaymentRule||!1,r.prebid=!0,r.disable_psa=!0;var e=function(e){if(!u(e.getFloor))return e.params.reserve||null;e=e.getFloor({currency:"USD",mediaType:"*",size:"*"});return!_(e)||isNaN(e.floor)||"USD"!==e.currency?null:e.floor}(i);e&&(r.reserve=e),i.params.position&&(r.position={above:1,below:2}[i.params.position]||0),i.params.trafficSourceCode&&(r.traffic_source_code=i.params.trafficSourceCode),i.params.privateSizes&&(r.private_sizes=ae(i.params.privateSizes)),i.params.supplyType&&(r.supply_type=i.params.supplyType),i.params.pubClick&&(r.pubclick=i.params.pubClick),i.params.extInvCode&&(r.ext_inv_code=i.params.extInvCode),i.params.publisherId&&(r.publisher_id=parseInt(i.params.publisherId,10)),i.params.externalImpId&&(r.external_imp_id=i.params.externalImpId),s(i.params.keywords)||(0<(t=d(i.params.keywords)).length&&t.forEach(ie),r.keywords=t);var n,o,t=S(i,"ortb2Imp.ext.data.pbadslot");t&&(r.gpid=t),i.mediaType!==P&&!S(i,"mediaTypes.".concat(P))||(r.ad_types.push(P),0===r.sizes.length&&(r.sizes=ae([1,1])),i.nativeParams&&(n=i.nativeParams,o={},Object.keys(n).forEach(function(e){var t=X[e]&&X[e].serverName||X[e]||e,i=X[e]&&X[e].requiredParams;o[t]=p.utils.assign({},i,n[e]),t!==X.image.serverName&&t!==X.icon.serverName||!o[t].sizes||(e=o[t].sizes,(c(e)||v(e)&&0<e.length&&e.every(function(e){return c(e)}))&&(o[t].sizes=ae(o[t].sizes))),t===X.privacyLink&&(o.privacy_supported=!0)}),r[P]={layouts:[o]}));var a=S(i,"mediaTypes.".concat(U)),t=S(i,"mediaTypes.video.context");r.hb_source=a&&"adpod"===t?7:1,i.mediaType!==U&&!a||r.ad_types.push(U),(i.mediaType===U||a&&"outstream"!==t)&&(r.require_asset_url=!0),i.params.video&&(r.video={},Object.keys(i.params.video).filter(function(e){return F(W,e)}).forEach(function(e){switch(e){case"context":case"playback_method":var t=i.params.video[e],t=v(t)?t[0]:t;r.video[e]=J[e][t];break;case"frameworks":break;default:r.video[e]=i.params.video[e]}}),i.params.video.frameworks&&v(i.params.video.frameworks)&&(r.video_frameworks=i.params.video.frameworks)),a&&(r.video=r.video||{},Object.keys(a).filter(function(e){return F(K,e)}).forEach(function(e){switch(e){case"minduration":case"maxduration":"number"!=typeof r.video[e]&&(r.video[e]=a[e]);break;case"skip":"boolean"!=typeof r.video.skippable&&(r.video.skippable=1===a[e]);break;case"skipafter":"number"!=typeof r.video.skipoffset&&(r.video.skippoffset=a[e]);break;case"playbackmethod":"number"!=typeof r.video.playback_method&&(t=a[e],1<=(t=v(t)?t[0]:t)&&t<=4&&(r.video.playback_method=t));break;case"api":var t;!r.video_frameworks&&v(a[e])&&(t=a[e].map(function(e){e=4===e?5:5===e?4:e;if(1<=e&&e<=5)return e}).filter(function(e){return e}),r.video_frameworks=t)}})),i.renderer&&(r.video=p.utils.assign({},r.video,{custom_renderer_present:!0})),i.params.frameworks&&v(i.params.frameworks)&&(r.banner_frameworks=i.params.frameworks);t=q(N.getAdUnits(),function(e){return i.transactionId===e.transactionId});return t&&t.mediaTypes&&t.mediaTypes.banner&&r.ad_types.push(B),0===r.ad_types.length&&delete r.ad_types,r}function ae(e){var t=[],i={};if(v(e)&&2===e.length&&!v(e[0]))i.width=parseInt(e[0],10),i.height=parseInt(e[1],10),t.push(i);else if("object"===o(e))for(var r=0;r<e.length;r++){var n=e[r];(i={}).width=parseInt(n[0],10),i.height=parseInt(n[1],10),t.push(i)}return t}function se(e){return!!e.params.user}function de(e){return!!parseInt(e.params.member,10)}function ce(e){if(e.params)return!!e.params.app}function ue(e){return e.params&&e.params.app?!!e.params.app.id:!!e.params.app}function pe(e){return!!e.debug}function le(e){return e.mediaTypes&&e.mediaTypes.video&&e.mediaTypes.video.context===D}function ge(e){var t=!1,i=e.params,r=e.params.video;return t=!(t=i.frameworks&&v(i.frameworks)?F(e.params.frameworks,6):t)&&r&&r.frameworks&&v(r.frameworks)?F(e.params.video.frameworks,6):t}function fe(e,t,i){s(e.video)&&(e.video={}),e.video[t]=i}function me(e){var t;t=e.adUnitCode,(t=document.getElementById(t).querySelectorAll("div[id^='google_ads']"))[0]&&t[0].style.setProperty("display","none"),function(e){try{var t=document.getElementById(e).querySelectorAll("script[id^='sas_script']");t[0].nextSibling&&"iframe"===t[0].nextSibling.localName&&t[0].nextSibling.style.setProperty("display","none")}catch(e){}}(e.adUnitCode),e.renderer.push(function(){window.ANOutstreamVideo.renderAd({tagId:e.adResponse.tag_id,sizes:[e.getSize().split("x")],targetId:e.adUnitCode,uuid:e.adResponse.uuid,adResponse:e.adResponse,rendererOptions:e.renderer.getConfig()},function(e,t,i){e.renderer.handleVideoEvent({id:t,eventName:i})}.bind(null,e))})}function he(e,t,i,r){return t&&(r?e.push({source:i,id:t,rti_partner:r}):e.push({source:i,id:t})),e}t.exports=e("../shim.js").wrap({spec:L,unitIDKey:"placementId",floorKey:"reserve",floorStr:!1,uspSupport:!0,gdprSupport:!0})},{"../shim.js":33}],4:[function(e,t,i){"use strict";function a(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(i="Object"===i&&e.constructor?e.constructor.name:i)||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?r(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}var n=e("../shim.js").polyfills,o=n.logWarn,u=n.isStr,p=n.deepAccess,l=n.isArray,g=n.getBidIdParameter,f=n.deepSetValue,m=n.isEmpty,d=n._each,s=n.convertTypes,c=n.parseUrl,h=n.mergeDeep,b=n.buildUrl,v=n._map,y=n.logError,_=n.isFn,w=n.isPlainObject,x=(n.registerBidder,n.BANNER),S=n.VIDEO,I=(0,n.getStorageManager)(24),A="conversant",S={code:A,gvlid:24,aliases:["cnvr"],supportedMediaTypes:[x,S],isBidRequestValid:function(e){if(!e||!e.params)return o(A+": Missing bid parameters"),!1;if(!u(e.params.site_id))return o(A+": site_id must be specified as a string"),!1;if(z(e)){e=e.params.mimes||p(e,"mediaTypes.video.mimes");if(e){if(!l(e)||!e.every(function(e){return u(e)}))return o(A+": mimes must be an array of strings"),!1}else o(A+": mimes should be specified for videos")}return!0},buildRequests:function(e,t){var i=t&&t.refererInfo?t.refererInfo.referer:"",o="",a="",s=null,d="_pubcid",c="https://web.hb.ad.cpe.dotomi.com/cvx/client/hb/ortb/25",r=e.map(function(e){var t=function(e){var t=g("bidfloor",e.params);!t&&_(e.getFloor)&&(e=e.getFloor({currency:"USD",mediaType:"*",size:"*"}),w(e)&&!isNaN(e.floor)&&"USD"===e.currency&&(t=e.floor));return t}(e);o=g("site_id",e.params)||o,d=g("pubcid_name",e.params)||d,a=e.auctionId;var i,r,n={id:e.bidId,secure:1,bidfloor:t||0,displaymanager:"Prebid.js",displaymanagerver:"5.18.0-pre"};return E(e.params.tag_id,n,"tagid"),z(e)?(r={},(t=k((i=p(e,"mediaTypes.video")||{}).playerSize||e.sizes))&&t[0]&&(E(t[0].w,r,"w"),E(t[0].h,r,"h")),E(e.params.position,r,"pos"),E(e.params.mimes||i.mimes,r,"mimes"),E(e.params.maxduration||i.maxduration,r,"maxduration"),E(e.params.protocols||i.protocols,r,"protocols"),E(e.params.api||i.api,r,"api"),n.video=r):(r={format:k((p(e,"mediaTypes.banner")||{}).sizes||e.sizes)},E(e.params.position,r,"pos"),n.banner=r),e.userId&&e.userId.pubcid?s=e.userId.pubcid:e.crumbs&&e.crumbs.pubcid&&(s=e.crumbs.pubcid),e.params.white_label_url&&(c=e.params.white_label_url),n}),i={id:a,imp:r,site:{id:o,mobile:null!==document.querySelector('meta[name="viewport"][content*="width=device-width"]')?1:0,page:i},device:(r=navigator.language?"language":"userLanguage",{h:screen.height,w:screen.width,dnt:"1"===navigator.doNotTrack||"1"===window.doNotTrack||"1"===navigator.msDoNoTrack||"yes"===navigator.doNotTrack?1:0,language:navigator[r].split("-")[0],make:navigator.vendor||"",ua:navigator.userAgent}),at:1},r={};t&&(t.gdprConsent&&(r.consent=t.gdprConsent.consentString,"boolean"==typeof t.gdprConsent.gdprApplies&&f(i,"regs.ext.gdpr",t.gdprConsent.gdprApplies?1:0)),t.uspConsent&&f(i,"regs.ext.us_privacy",t.uspConsent)),(s=s||function(e){var t;try{var i;(t=I.getCookie(e))||(""===(i=I.getDataFromLocalStorage("".concat(e,"_exp")))||i&&0<new Date(i).getTime()-Date.now())&&(t=(t=I.getDataFromLocalStorage(e))&&decodeURIComponent(t)),u(t)&&"{"===t.charAt(0)&&(t=JSON.parse(t))}catch(e){y(e)}return t}(d))&&(r.fpc=s);e=function(e){var e=e[0],t=[];{var i;l(e.userIdAsEids)&&0<e.userIdAsEids.length&&(i={"epsilon.com":1,"adserver.org":1,"liveramp.com":1,"criteo.com":1,"id5-sync.com":1,"parrable.com":1,"liveintent.com":1},e.userIdAsEids.forEach(function(e){i.hasOwnProperty(e.source)&&t.push(e)}))}return t}(e);return 0<e.length&&(r.eids=e),m(r)||(i.user={ext:r}),{method:"POST",url:c,data:i}},interpretResponse:function(o,e){var a=[],s={};return o=o.body,e&&e.data&&e.data.imp&&d(e.data.imp,function(e){return s[e.id]=e}),o&&l(o.seatbid)&&d(o.seatbid,function(e){d(e.bid,function(e){var t,i,r,n=parseFloat(e.price);0<n&&e.impid&&(t=e.adm||"",i=e.nurl||"",r=s[e.impid],n={requestId:e.impid,currency:o.cur||"USD",cpm:n,creativeId:e.crid||"",ttl:300,netRevenue:!0,meta:{}},e.adomain&&0<e.adomain.length&&(n.meta.advertiserDomains=e.adomain),r.video?("<"===t.charAt(0)?n.vastXml=t:n.vastUrl=t,n.mediaType="video",n.width=r.video.w,n.height=r.video.h):(n.ad=t+'<img src="'+i+'" />',n.width=e.w,n.height=e.h),a.push(n))})}),a},transformBidParams:function(e,t){return s({site_id:"string",secure:"number",mobile:"number"},e)},getUserSyncs:function(t,e,i,r){var n={},o=[];return i&&(n.gdpr=i.gdprApplies?1:0,n.gdpr_consent=encodeURIComponent(i.consentString||"")),r&&(n.us_privacy=encodeURIComponent(r)),e&&e.ext&&(e=[{urls:e.ext.fsyncs,type:"iframe"},{urls:e.ext.psyncs,type:"image"}].filter(function(e){return e.urls&&("iframe"===e.type&&t.iframeEnabled||"image"===e.type&&t.pixelEnabled)}).map(function(t){return t.urls.map(function(e){e=c(e);return h(e.search,n),0===Object.keys(e.search).length&&delete e.search,{type:t.type,url:b(e)}}).reduce(function(e,t){return e.concat(t)},[])}).reduce(function(e,t){return e.concat(t)},[]),o.push.apply(o,a(e))),o}};function k(e){var t;return t=Array.isArray(e)?2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]?[{w:e[0],h:e[1]}]:v(e,function(e){return{w:e[0],h:e[1]}}):t}function z(e){return"video"===e.mediaType||p(e,"mediaTypes.video")}function E(e,t,i){e&&(t[i]=e)}t.exports=e("../shim.js").wrap({spec:S,unitIDKey:"site_id",floorKey:"bidfloor",floorStr:!1,uspSupport:!0,gdprSupport:!0})},{"../shim.js":33}],5:[function(e,t,i){"use strict";function I(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(t,e){var i,r=Object.keys(t);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(t),e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,i)),r}function k(r){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach(function(e){var t,i;t=r,e=n[i=e],i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))})}return r}function z(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=s(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o=!0,a=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){a=!0,n=e},f:function(){try{o||null==i.return||i.return()}finally{if(a)throw n}}}}function s(e,t){if(e){if("string"==typeof e)return r(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(i="Object"===i&&e.constructor?e.constructor.name:i)||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}var n=e("../shim.js").polyfills,E=n.deepAccess,f=n.parseGPTSingleSizeArray,a=n.inIframe,j=n.deepClone,T=n.logError,h=n.logWarn,d=n.isFn,c=n.contains,b=n.isInteger,C=n.isArray,O=n.deepSetValue,R=n.parseQueryStringParameters,B=n.isEmpty,P=n.mergeDeep,u=n.convertTypes,U=n.BANNER,v=n.VIDEO,D=n.config,y=n.find,p=(n.registerBidder,n.INSTREAM),l=n.OUTSTREAM,m=n.includes,_=n.Renderer,N="roundel",g=[U,v],w={JPY:1},x={PBJS:"p",IX:"x"},q={SITE:["id","name","domain","cat","sectioncat","pagecat","page","ref","search","mobile","privacypolicy","publisher","content","keywords","ext"],USER:["id","buyeruid","yob","gender","keywords","customdata","geo","data","ext"]},F={"liveramp.com":"idl","netid.de":"NETID","neustar.biz":"fabrickId","zeotap.com":"zeotapIdPlus","uidapi.com":"UID2","adserver.org":"TDID"},M=["britepoolid","id5id","lipbid","haloId","criteoId","lotamePanoramaId","merkleId","parrableId","connectid","tapadId","quantcastId","pubcid","TDID","flocId"],S=["mimes","minduration","maxduration"],G=["mimes","minduration","maxduration","protocols","protocol","startdelay","placement","linearity","skip","skipmin","skipafter","sequence","battr","maxextended","minbitrate","maxbitrate","boxingallowed","playbackmethod","playbackend","delivery","pos","companionad","api","companiontype","ext","playerSize","w","h"];function L(e){var t={};t.id=e.bidId,t.ext={},t.ext.siteID=e.params.siteId,!e.params.hasOwnProperty("id")||"string"!=typeof e.params.id&&"number"!=typeof e.params.id||(t.ext.sid=String(e.params.id));e=E(e,"ortb2Imp.ext.data.adserver.adslot");return e&&(t.ext.dfp_ad_unit_code=e),t}function W(e,t,i){var r=null,n=null;if(e.params.bidFloor&&e.params.bidFloorCur&&(r={floor:e.params.bidFloor,currency:e.params.bidFloorCur}),d(e.getFloor)){var o="*",a="*";i&&c(g,i)&&(a=[(i=t[o=i]).w,i.h]);try{n=e.getFloor({mediaType:o,size:a})}catch(e){h("priceFloors module call getFloor failed, error : ",e)}}n?(t.bidfloor=n.floor,t.bidfloorcur=n.currency,t.ext.fl=x.PBJS):r&&(t.bidfloor=r.floor,t.bidfloorcur=r.currency,t.ext.fl=x.IX)}function K(e){return Array.isArray(e)&&2===e.length&&b(e[0])&&b(e[1])}function Y(e,t){var i=0<arguments.length&&void 0!==e?e:[],r=1<arguments.length&&void 0!==t?t:[];if(K(i))return i[0]===r[0]&&i[1]===r[1];for(var n=0;n<i.length;n++)if(i[n][0]===r[0]&&i[n][1]===r[1])return!0;return!1}function V(e,t){var i=[];e||h("IX Bid Adapter: mediaTypes.video is the preferred location for video params in ad unit");var r,n=z(S);try{for(n.s();!(r=n.n()).done;){var o=r.value,a=e&&e.hasOwnProperty(o),s=t&&t.hasOwnProperty(o);a||s||i.push("IX Bid Adapter: ".concat(o," is not included in either the adunit or params level"))}}catch(e){n.e(e)}finally{n.f()}var d=e&&e.hasOwnProperty("protocol"),c=e&&e.hasOwnProperty("protocols"),u=t&&t.hasOwnProperty("protocol"),p=t&&t.hasOwnProperty("protocols");return d||c||u||p||i.push("IX Bid Adapter: protocol/protcols is not included in either the adunit or params level"),i}function H(e){e=0<arguments.length&&void 0!==e?e:[];return K(e)?e:!!K(e[0])&&e[0]}function J(g,e,f,t){var m="https://htlb.casalemedia.com/cygnus",i=function(e,t){var i=[],r={};if(C(e)){var n,o=z(e);try{for(o.s();!(n=o.n()).done;){var a=n.value;F[a.source]&&E(a,"uids.0")&&(r[a.source]=!0,a.uids[0].ext={rtiPartner:F[a.source]},delete a.uids[0].atype,i.push(a))}}catch(e){o.e(e)}finally{o.f()}}return t&&t.id&&t.version&&(t={source:"chrome.com",uids:[{id:t.id,ext:{rtiPartner:"flocId",ver:t.version}}]},i.push(t),r["chrome.com"]=!0),{toSend:i,seenSources:r}}(E(g,"0.userIdAsEids"),E(g,"0.userId.flocId")),r=i.toSend;if(window.headertag&&"function"==typeof window.headertag.getIdentityInfo){var n=window.headertag.getIdentityInfo();if(n&&"object"===A(n))for(var o in n)!n.hasOwnProperty(o)||!(o=n[o]).responsePending&&o.data&&"object"===A(o.data)&&Object.keys(o.data).length&&!i.seenSources[o.data.source]&&r.push(o.data)}if(e&&e.bidderCode===N&&!i.seenSources["liveramp.com"])return[];var h={};h.id=g[0].bidderRequestId.toString(),h.site={},h.ext={},h.ext.source="prebid",h.ext.ixdiag={},h.ext.ixdiag.msd=0,h.ext.ixdiag.msi=0,h.imp=[];var a,s,d=function(i){for(var r,n=i.map(function(e){return e.transactionId}).filter(function(e,t,i){return i.indexOf(e)===t}),o={mfu:0,bu:0,iu:0,nu:0,ou:0,allu:0,ren:!1,version:"5.18.0-pre",userIds:function(e){var t=e.userId||{};return M.filter(function(e){return t[e]})}(i[0])},e=0;e<n.length;e++)!function(t){var e;r=i.filter(function(e){return e.transactionId===n[t]})[0],E(r,"mediaTypes")&&(1<Object.keys(r.mediaTypes).length&&o.mfu++,E(r,"mediaTypes.native")&&o.nu++,E(r,"mediaTypes.banner")&&o.bu++,"outstream"===E(r,"mediaTypes.video.context")&&(o.ou++,e="object"===A(E(r,"renderer")||E(r,"mediaTypes.video.renderer")),o.ren=o.ren&&e?E(o,"ren"):e),"instream"===E(r,"mediaTypes.video.context")&&o.iu++,o.allu++)}(e);return o}(g);for(a in d)h.ext.ixdiag[a]=d[a];g[0].schain&&(h.source={ext:{schain:g[0].schain}}),0<r.length&&(h.user={},h.user.eids=r),document.referrer&&""!==document.referrer&&(h.site.ref=document.referrer),e&&(e.gdprConsent&&((s=e.gdprConsent).hasOwnProperty("gdprApplies")&&(h.regs={ext:{gdpr:s.gdprApplies?1:0}}),s.hasOwnProperty("consentString")&&(h.user=h.user||{},h.user.ext={consent:s.consentString||""},s.hasOwnProperty("addtlConsent")&&s.addtlConsent&&(h.user.ext.consented_providers_settings={consented_providers:s.addtlConsent}))),e.uspConsent&&O(h,"regs.ext.us_privacy",e.uspConsent),e.refererInfo&&(h.site.page=e.refererInfo.referer)),D.getConfig("coppa")&&O(h,"regs.coppa",1);var b={};b.s=g[0].params.siteId,b.v=t,b.ac="j",b.sd=1,8.1===t&&(b.nf=1);var t=e&&e.bidderCode||"ix",e=D.getConfig(t),v=[],y=0,_=Object.keys(f),w="".concat(m).concat(R(k(k({},b),{},{r:JSON.stringify(h)}))).length;if(8e3<w)return T("ix bidder: Base request size has exceeded maximum request size."),v;var x=w,t=0,S=!1;if(e){if("object"===A(e.firstPartyData)){var c,u=e.firstPartyData,p="?";for(c in u)u.hasOwnProperty(c)&&(p+="".concat(encodeURIComponent(c),"=").concat(encodeURIComponent(u[c]),"&"));p=p.slice(0,-1),(t=encodeURIComponent(p).length)<8e3?("page"in h.site?h.site.page+=p:h.site.page=p,x+=t):T("ix bidder: IX config FPD request size has exceeded maximum request size.")}"number"==typeof e.timeout&&(b.t=e.timeout),"boolean"==typeof e.detectMissingSizes?h.ext.ixdiag.dms=e.detectMissingSizes:h.ext.ixdiag.dms=!0}for(var l=0;l<_.length;l++)if("break"===function(e){if(8e3<=x||4<=v.length)return"break";for(var t=f[_[e]],i=t.missingCount,r=void 0===i?0:i,i=t.missingImps,i=void 0===i?[]:i,t=t.ixImps,n=!1,o=8e3-x,a={ixImps:void 0===t?[]:t,missingBannerImpressions:i},s=Object.keys(a).map(function(e){return a[e]}).filter(function(e){return Array.isArray(e)}).reduce(function(e,t){return e.concat.apply(e,I(t))},[]),d=encodeURIComponent(JSON.stringify({impressionObjects:s})).length;s.length&&o<d;)n=!0,s.pop(),d=encodeURIComponent(JSON.stringify({impressionObjects:s})).length;s.length&&U in s[0]?(t={id:(t=s[0]).id,banner:{topframe:t.banner.topframe,format:s.map(function(e){var t=e.banner;return{w:t.w,h:t.h,ext:e.ext}})}},"bidfloor"in s[0]&&(t.bidfloor=s[0].bidfloor),"bidfloorcur"in s[0]&&(t.bidfloorcur=s[0].bidfloorcur),h.imp.push(t),h.ext.ixdiag.msd+=r,h.ext.ixdiag.msi+=i.length):(p=h.imp).push.apply(p,I(s)),x+=d;var c,u,p=D.getConfig("ortb2")||{};B(p)||S||(h.ext.ixdiag.fpd=!0,c=k({},p.site||p.context),Object.keys(c).forEach(function(e){-1===q.SITE.indexOf(e)&&delete c[e]}),u=k({},p.user),Object.keys(u).forEach(function(e){-1===q.USER.indexOf(e)&&delete u[e]}),(p=j(h)).site=P({},p.site,c),p.user=P({},p.user,u),"".concat(m).concat(R(k(k({},b),{},{r:JSON.stringify(p)}))).length<8e3?(h.site=P({},h.site,c),h.user=P({},h.user,u),S=!0,l=encodeURIComponent(JSON.stringify(k(k({},c),u))).length,x+=l):T("ix bidder: FPD request size has exceeded maximum request size."));var l=e===_.length-1;(n||l)&&(e=j(b),l&&!y||(h.ext.ixdiag.sn=y,e.sn=y),y++,e.r=JSON.stringify(h),v.push({method:"GET",url:m,data:e,validBidRequests:g}),x=w,h.imp=[],h.ext.ixdiag.msd=0,h.ext.ixdiag.msi=0,S=!1)}(l))break;return v}function X(e,t){if(t)for(var i=0;i<e.length;i++){var r=e[i];if(t[0]===r[0]&&t[1]===r[1]){e.splice(i,1);break}}}function Q(e,t){var i=function(e){var t,i=L(e),r=E(e,"mediaTypes.video"),n=E(e,"params.video");if(V(r,n).length)return{};for(t in i.video=n?j(e.params.video):{},r)-1===G.indexOf(t)||i.video.hasOwnProperty(t)||(i.video[t]=r[t]);if(i.video.minduration>i.video.maxduration)return T("IX Bid Adapter: video minduration [".concat(i.video.minduration,"] cannot be greater than video maxduration [").concat(i.video.maxduration,"]")),{};if((n=n&&n.context||r&&r.context)&&!i.video.hasOwnProperty("placement")&&(n===p?i.video.placement=1:n===l?i.video.placement=4:h("IX Bid Adapter: Video context '".concat(n,"' is not supported"))),!i.video.w||!i.video.h){n=H(E(i,"video.playerSize"))||H(E(e,"params.size"));if(!n)return h("IX Bid Adapter: Video size is missing in [mediaTypes.video] missing"),{};i.video.w=n[0],i.video.h=n[1],E(i,"ext.sid")||(i.ext.sid=f(n))}return W(e,i,v),i}(e);0!=Object.keys(i).length&&(t[e.transactionId]={},t[e.transactionId].ixImps=[],t[e.transactionId].ixImps.push(i))}function $(e,t,i){var r=k(k({},{detectMissingSizes:!0}),D.getConfig("ix")),n=function(e){var t=L(e);t.banner={};var i=E(e,"params.size");return i&&(t.banner.w=i[0],t.banner.h=i[1],E(t,"ext.sid")||(t.ext.sid=f(i))),t.banner.topframe=a()?0:1,W(e,t,U),t}(e);Y(E(e,"mediaTypes.banner.sizes"),E(e,"params.size"))&&(i.hasOwnProperty(e.transactionId)||(i[e.transactionId]={}),i[e.transactionId].hasOwnProperty("ixImps")||(i[e.transactionId].ixImps=[]),i[e.transactionId].ixImps.push(n)),r.hasOwnProperty("detectMissingSizes")&&r.detectMissingSizes&&function(e,t,i){var r=e.transactionId;{var n;t.hasOwnProperty(r)?(n=[],X(n=t[r].hasOwnProperty("missingSizes")?t[r].missingSizes:n,e.params.size),t[r].missingSizes=n):E(e,"mediaTypes.banner.sizes")&&(X(n=j(e.mediaTypes.banner.sizes),e.params.size),i={missingSizes:n,impression:i},t[r]=i)}}(e,t,n)}function Z(t){t.renderer.push(function(){var e={width:t.width,height:t.height,timeout:3e3};window.IXOutstreamPlayer(t.vastUrl,t.adUnitCode,e)})}n={code:"ix",gvlid:10,aliases:[{code:N,gvlid:10,skipPbsAliasing:!1}],supportedMediaTypes:g,isBidRequestValid:function(e){var t=E(e,"params.video"),i=E(e,"params.size"),r=E(e,"mediaTypes.banner.sizes"),n=E(e,"mediaTypes.video"),o=E(e,"mediaTypes.video.playerSize"),a=e.params.hasOwnProperty("bidFloor"),s=e.params.hasOwnProperty("bidFloorCur");if(e.hasOwnProperty("mediaType")&&!c(g,e.mediaType))return!1;if(E(e,"mediaTypes.banner")&&!r)return!1;if(i){i=H(i);if(!i)return T("ix bidder params: size has invalid format."),!1;if(!Y(e.sizes,i)&&!Y(o,i)&&!Y(r,i))return T("ix bidder params: bid size is not included in ad unit sizes or player size."),!1}if("string"!=typeof e.params.siteId&&"number"!=typeof e.params.siteId)return T("ix bidder params: siteId must be string or number value."),!1;if((a||s)&&!(a&&s&&(s=e.params.bidFloor,e=e.params.bidFloorCur,Boolean("number"==typeof s&&"string"==typeof e&&e.match(/^[A-Z]{3}$/)))))return T("ix bidder params: bidFloor / bidFloorCur parameter has invalid format."),!1;if(n&&t){t=V(n,t);if(t.length)return t.forEach(function(e){T(e)}),!1}return!0},buildRequests:function(e,t){var i,r,n,o=[],a={},s={},d={},c={};for(i in e.forEach(function(e){var t,i=Object.keys(E(e,"mediaTypes",{}));switch(E(t=e,"params.video")&&E(t,"mediaTypes.video")?v:U){case U:$(e,c,a);break;case v:Q(e,s)}m(i,U)&&m(i,v)&&(d[e.transactionId]=e)}),Object.keys(d).forEach(function(e){var t=d[e];a[e]||$(t,c,a),s[e]||Q(t,s)}),c)if(c.hasOwnProperty(i)){var u=c[i].missingSizes;a.hasOwnProperty(i)||(a[i]={}),a[i].hasOwnProperty("missingImps")||(a[i].missingImps=[],a[i].missingCount=0);for(var p=c[i].impression,l=0;l<u.length;l++){var g=(r=e[0],g=p,n=u[l],(g=j(g)).ext.sid=f(n),g.banner.w=n[0],g.banner.h=n[1],W(r,g,U),g);a[i].missingImps.push(g),a[i].missingCount++}}return 0<Object.keys(a).length&&o.push.apply(o,I(J(e,t,a,7.2))),0<Object.keys(s).length&&o.push.apply(o,I(J(e,t,s,8.1))),o},interpretResponse:function(e,t){var i=[],r=null;if(!e.hasOwnProperty("body")||!e.body.hasOwnProperty("seatbid"))return i;for(var n,o,a,s,d,c=e.body,u=c.seatbid,p=0;p<u.length;p++)if(u[p].hasOwnProperty("bid"))for(var l=u[p].bid,g=JSON.parse(t.data.r),f=0;f<l.length;f++){var m=function(t,e,i){if(t)return k(k({},y(i,function(e){return e.bidId===t})),y(e,function(e){return e.id===t}))}(l[f].impid,g.imp,t.validBidRequests);n=l[f],o=c.cur,a=m,m=d=s=void 0,s={},d=!(!E(n,"exp")||!b(n.exp)),m=E(n,"dealid")||E(n,"ext.dealid"),w.hasOwnProperty(o)?s.cpm=n.price/w[o]:s.cpm=n.price/100,s.requestId=n.impid,m&&(s.dealId=m),s.netRevenue=!0,s.currency=o,s.creativeId=n.hasOwnProperty("crid")?n.crid:"-",E(n,"ext.vasturl")?(s.vastUrl=n.ext.vasturl,s.width=a.video.w,s.height=a.video.h,s.mediaType=v,s.mediaTypes=a.mediaTypes,s.ttl=d?n.exp:3600):(s.ad=n.adm,s.width=n.w,s.height=n.h,s.mediaType=U,s.ttl=d?n.exp:300),s.meta={},s.meta.networkId=E(n,"ext.dspid"),s.meta.brandId=E(n,"ext.advbrandid"),s.meta.brandName=E(n,"ext.advbrand"),n.adomain&&0<n.adomain.length&&(s.meta.advertiserDomains=n.adomain),E(r=s,"mediaTypes.video.renderer")||"outstream"!==E(r,"mediaTypes.video.context")||(r.mediaTypes.video.renderer=function(e){e=_.install({id:e,url:"https://js-sec.indexww.com/htv/video-player.js",loaded:!1});try{e.setRender(Z)}catch(e){h("Prebid Error calling setRender on renderer",e)}return e}(l[f].bidId)),i.push(r)}return i},transformBidParams:function(e,t){return u({siteID:"number"},e)},getUserSyncs:function(e,t){return e.iframeEnabled?[{type:"iframe",url:"https://js-sec.indexww.com/um/ixmatch.html"}]:[]}};t.exports=e("../shim.js").wrap({spec:n,unitIDKey:"siteId",floorKey:"bidFloor",floorStr:!1,uspSupport:!0,gdprSupport:!0})},{"../shim.js":33}],6:[function(e,t,i){"use strict";var p=e("../shim.js").polyfills,r=p.parseUrl,n=p.getWindowTop,a=p.isArray,s=p.getGptSlotInfoForAdUnitCode,d=p.isStr,l=p.deepAccess,g=p.isEmpty,c=p.logError,o=p.triggerPixel,u=p.buildUrl,f=p.isEmptyStr,m=p.logInfo,h=(p.registerBidder,p.config),b=p.BANNER,v=p.NATIVE,y=p.VIDEO,_=p.getRefererInfo,w=p.Renderer,x="medianet",S="https://prebid.media.net/video/bundle.js",I={NOT_DETERMINED:0,ABOVE_THE_FOLD:1,BELOW_THE_FOLD:2},A="client_timeout",k="client_bid_won",_=_(),z={};function E(e){e={domain:(e=e||{}).domain||z.urlData.domain,page:e.page||z.urlData.page,ref:e.ref||function(){try{return window.top.document.referrer}catch(e){return document.referrer}}(),isTop:e.isTop||z.urlData.isTop};return p.utils.assign(e,function(){if(z.pageMeta)return z.pageMeta;var e=j('link[rel="canonical"]',"href"),t=j('meta[property="og:url"]',"content"),i=j('meta[name="twitter:url"]',"content");return z.pageMeta=p.utils.assign({},e&&{canonical_url:e},t&&{og_url:t},i&&{twitter_url:i}),z.pageMeta}())}function j(e,t){e=function(e,t){try{var i=n().document.querySelector(e);if(null!==i&&i[t])return i[t]}catch(e){}}(e,t);return e&&(t=e,(e=n().document.createElement("a")).href=t,e.href)}function T(e,t){return e.filter(function(e){return e.type===t})}function C(e){return{w:parseInt(e[0],10),h:parseInt(e[1],10)}}function O(e){var t={id:e.bidId,ext:{dfp_id:e.adUnitCode,display_count:e.bidRequestsCount},all:e.params};e.ortb2Imp&&(t.ortb2Imp=e.ortb2Imp);var i=l(e,"mediaTypes.banner.sizes")||[],r=l(e,"mediaTypes.video")||{},n=l(e,"params.video")||{},r=p.utils.assign({},n,r);if(g(r)||(t.video=r),0<i.length&&(t.banner=a(o=i)&&2===o.length&&!a(o[0])?[C(o)]:o.map(C)),e.nativeParams)try{t.native=JSON.stringify(e.nativeParams)}catch(e){c("".concat(x," : Incorrect JSON : bidRequest.nativeParams"))}e.params.crid&&(t.tagid=e.params.crid.toString());i=parseFloat(e.params.bidfloor||e.params.bidFloor);i&&(t.bidfloor=i);var o=function(e){if((i=document.getElementById(e))||-1===e.indexOf("/")||(t=s(e).divId,d(t)&&(i=document.getElementById(t))),i&&i.getBoundingClientRect){var t=i.getBoundingClientRect(),i={};return i.top_left={y:t.top,x:t.left},i.bottom_right={y:t.bottom,x:t.right},i}return null}(e.adUnitCode);o&&t.banner&&0!==t.banner.length?(i={top_left:{x:o.top_left.x+window.pageXOffset,y:o.top_left.y+window.pageYOffset},bottom_right:{x:o.bottom_right.x+window.pageXOffset,y:o.bottom_right.y+window.pageYOffset}},t.ext.coordinates=i,t.ext.viewability=P(o.top_left,B(t.banner)),.5<P(i.top_left,B(t.banner))?t.ext.visibility=I.ABOVE_THE_FOLD:t.ext.visibility=I.BELOW_THE_FOLD):t.ext.visibility=I.NOT_DETERMINED;e=function(i){var r=[];"function"==typeof i.getFloor&&[b,y,v].forEach(function(t){i.mediaTypes.hasOwnProperty(t)&&(t==b?i.mediaTypes.banner.sizes.forEach(function(e){R(i,t,e,r)}):R(i,t,"*",r))});return r}(e);return e&&0<e.length&&(t.bidfloors=e),t}function R(e,t,i,r){e=e.getFloor({currency:"USD",mediaType:t,size:i});1<i.length&&(e.size=i),e.mediaType=t,r.push(e)}function B(e){return e.reduce(function(e,t){return t.h*t.w<e.h*e.w?t:e})}function P(e,t){var i=t.w*t.h,r=q.getWindowSize(),t={x:e.x+t.w,y:e.y+t.h};return 0==i||-1===r.w||-1===r.h?0:function(e,t,i,r){if(e.x>r.x||t.x<i.x||e.y>r.y||t.y<i.y)return 0;return(Math.min(t.x,r.x)-Math.max(e.x,i.x))*(Math.min(t.y,r.y)-Math.max(e.y,i.y))}(e,t,{x:0,y:0},{x:r.w,y:r.h})/i}function U(e,t){return{site:E(e[0].params.site),ext:(i=e[0],r=t,n=l(i,"params"),o=l(r,"gdprConsent"),a=l(r,"uspConsent"),s=l(i,"userId"),d=l(i,"schain")||{},c=q.getWindowSize(),u=!(!o||!o.gdprApplies),r=!!a,i=!!h.getConfig("coppa"),p.utils.assign({},{customer_id:n.cid},{prebid_version:AdBridg.globals.version},{gdpr_applies:u},u&&{gdpr_consent_string:o.consentString||""},{usp_applies:r},r&&{usp_consent_string:a||""},{coppa_applies:i},-1!==c.w&&-1!==c.h&&{screen:c},s&&{user_id:s},AdBridg.globals.medianetGlobals.analyticsEnabled&&{analytics:!0},!g(d)&&{schain:d})),id:e[0].auctionId,imp:e.map(O),tmax:t.timeout||h.getConfig("bidderTimeout")};var i,r,n,o,a,s,d,c,u}function D(e,t){t={protocol:"https",hostname:"qsearch-a.akamaihd.net/log",search:function(e,t){t=a(t)&&t||[];var i={logid:"kfk",evtid:"projectevents",project:"prebid"};return i.acid=l(t,"0.auctionId")||"",i.cid=AdBridg.globals.medianetGlobals.cid||"",i.crid=t.map(function(e){return l(e,"params.0.crid")||e.adUnitCode}).join("|"),i.adunit_count=t.length||0,i.dn=z.urlData.domain||"",i.requrl=z.urlData.page||"",i.istop=z.urlData.isTop||"",i.event=e.name||"",i.value=e.value||"",i.rd=e.related_data||"",i}(e,t)};o(u(t))}function N(e){var t=l(e,"context")||"",i=l(e,"vto");"outstream"==t&&i&&(e.renderer=((e=w.install({url:S})).setRender(function(i){window.mnet.queue.push(function(){var e={width:i.width,height:i.height,vastTimeout:i.vto,maxAllowedVastTagRedirects:i.mavtr,allowVpaid:i.avp,autoPlay:i.ap,preload:i.pl,mute:i.mt},t=i.dfp_id,t=s(t).divId||t;window.mnet.mediaNetoutstreamPlayer(i,t,e)})}),e))}window.mnet=window.mnet||{},window.mnet.queue=window.mnet.queue||[],z.urlData={domain:r(_.referer).hostname,page:_.referer,isTop:_.reachedTop},AdBridg.globals.medianetGlobals=AdBridg.globals.medianetGlobals||{};var q={code:x,gvlid:142,supportedMediaTypes:[b,v,y],isBidRequestValid:function(e){return e.params?e.params.cid&&d(e.params.cid)&&!f(e.params.cid)?(p.utils.assign(AdBridg.globals.medianetGlobals,!AdBridg.globals.medianetGlobals.cid&&{cid:e.params.cid}),!0):(c("".concat(x," : cid should be a string")),!1):(c("".concat(x," : Missing bid parameters")),!1)},buildRequests:function(e,t){e=U(e,t);return{method:"POST",url:(t=e.ext.customer_id,"https://prebid.media.net/rtb/prebid?cid="+encodeURIComponent(t)),data:JSON.stringify(e)}},interpretResponse:function(e,t){var i=[];if(!e||!e.body)return m("".concat(x," : response is empty")),i;e=e.body.bidList;return a(e)&&0!==e.length?(i=e.filter(function(e){return!1===(e=e).no_bid&&0<parseFloat(e.cpm)})).forEach(N):m("".concat(x," : no bids")),i},getUserSyncs:function(e,t){t=!g(t=t)&&t[0].body&&t[0].body.ext&&a(t[0].body.ext.csUrl)?t[0].body.ext.csUrl:[];return e.iframeEnabled?T(t,"iframe"):e.pixelEnabled?T(t,"image"):void 0},onTimeout:function(e){try{D({name:A,value:e.length,related_data:e[0].timeout||h.getConfig("bidderTimeout")},e)}catch(e){}},onBidWon:function(e){try{D({name:k,value:e.cpm},[e])}catch(e){}},clearMnData:function(){z={}},getWindowSize:function(){return{w:window.screen.width||-1,h:window.screen.height||-1}}};t.exports=e("../shim.js").wrap({spec:q,unitIDKey:"crid",floorKey:"bidfloor",floorStr:!1,uspSupport:!0,gdprSupport:!0})},{"../shim.js":33}],7:[function(e,t,i){"use strict";function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var r,n,o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(i="Object"===i&&e.constructor?e.constructor.name:i)||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?r(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}var o=e("../shim.js").polyfills,u=o.deepAccess,a=o.convertTypes,p=o.isArray,d=o.inIframe,c=o._map,l=o.deepSetValue,g=o._each,f=o.parseSizesInput,m=o.parseUrl,h=o.config,b=(o.registerBidder,o.BANNER),v=o.VIDEO,y=o.includes,_=["startdelay","mimes","minduration","maxduration","startdelay","skippable","playbackmethod","api","protocols","boxingallowed","linearity","delivery","protocol","placement","minbitrate","maxbitrate"],w="hb_pb",x="3.0.3",S="USD",I={britepoolid:"britepoolid",criteoId:"criteoid",fabrickId:"nuestarid",haloId:"audigentid",id5id:"id5id",idl_env:"lre",IDP:"zeotapid",idxId:"idxid",intentIqId:"intentiqid",lipb:"lipbid",lotamePanoramaId:"lotameid",merkleId:"merkleid",netId:"netid",parrableId:"parrableid",pubcid:"pubcid",quantcastId:"quantcastid",tapadId:"tapadid",tdid:"ttduuid",uid2:"uid2",flocId:"floc",admixerId:"admixerid",deepintentId:"deepintentid",dmdId:"dmdid",nextrollId:"nextrollid",novatiq:"novatiqid",mwOpenLinkId:"mwopenlinkid",dapId:"dapid",amxId:"amxid"},o={code:"openx",gvlid:69,supportedMediaTypes:[b,v],isBidRequestValid:function(e){var t=e.params.delDomain||e.params.platform;return u(e,"mediaTypes.banner")&&t?!!e.params.unit||0<u(e,"mediaTypes.banner.sizes.length"):!(!e.params.unit||!t)},buildRequests:function(e,t){if(0===e.length)return[];var i=[],r=n(e.reduce(function(e,t){var i;return(u(i=t,"mediaTypes.video")&&!u(i,"mediaTypes.banner")||i.mediaType===v?e[0]:e[1]).push(t),e},[[],[]]),2),e=r[0],r=r[1];return 0<r.length&&i.push(function(e,t){var i=[],r=!1,n=A(e,t),t=c(e,function(e){return e.params.unit});n.aus=c(e,function(e){return f(e.mediaTypes.banner.sizes).join(",")}).join("|"),n.divids=c(e,function(e){return encodeURIComponent(e.adUnitCode)}).join(","),n.aucs=c(e,function(e){e=u(e,"ortb2Imp.ext.data.pbadslot");return encodeURIComponent(e||"")}).join(","),t.some(function(e){return e})&&(n.auid=t.join(","));e.some(function(e){return e.params.doNotTrack})&&(n.ns=1);!0!==h.getConfig("coppa")&&!e.some(function(e){return e.params.coppa})||(n.tfcd=1);e.forEach(function(t){var e;t.params.customParams?(e=c(Object.keys(t.params.customParams),function(e){return function(e,t){t=t[e];p(t)&&(t=t.join(","));return(e.toLowerCase()+"="+t.toLowerCase()).replace("+",".").replace("/","_")}(e,t.params.customParams)}),e=window.btoa(e.join("&")),r=!0,i.push(e)):i.push("")}),r&&(n.tps=i.join(","));return k(n,b,e),{method:"GET",url:n.ph?"https://u.openx.net/w/1.0/arj":"https://".concat(e[0].params.delDomain,"/w/1.0/arj"),data:n,payload:{bids:e,startTime:new Date}}}(r,t)),0<e.length&&e.forEach(function(e){i.push(function(e,t){t=function(e,t){var i,r,n=u(e,"mediaTypes.video"),o=A([e],t),a=u(e,"params.video")||{},s=u(e,"mediaTypes.video.context"),t=u(e,"mediaTypes.video.playerSize");p(e.sizes)&&2===e.sizes.length&&!p(e.sizes[0])?(i=parseInt(e.sizes[0],10),r=parseInt(e.sizes[1],10)):p(e.sizes)&&p(e.sizes[0])&&2===e.sizes[0].length?(i=parseInt(e.sizes[0][0],10),r=parseInt(e.sizes[0][1],10)):p(t)&&2===t.length&&(i=parseInt(t[0],10),r=parseInt(t[1],10));var d={w:i,h:r},c=e.params.video||e.params.openrtb||{};c.openrtb&&(c=c.openrtb);p(c.imp)&&(c=c.imp[0].video);Object.keys(c).filter(function(e){return y(_,e)}).forEach(function(e){return d[e]=c[e]}),Object.keys(n).filter(function(e){return y(_,e)}).forEach(function(e){return d[e]=n[e]});t={imp:[{video:d}]};o.openrtb=JSON.stringify(t),o.auid=e.params.unit,o.vwd=i||a.vwd,o.vht=r||a.vht,"outstream"===s&&(o.vos="101");a.mimes&&(o.vmimes=a.mimes);e.params.test&&(o.vtest=1);a=u(e,"ortb2Imp.ext.data.pbadslot");a&&(o.aucs=encodeURIComponent(a));return k(o,v,[e]),o}(e,t);return{method:"GET",url:t.ph?"https://u.openx.net/v/1.0/avjp":"https://".concat(e.params.delDomain,"/v/1.0/avjp"),data:t,payload:{bid:e,startTime:new Date}}}(e,t))}),i},interpretResponse:function(e,t){e=e.body;return((/avjp$/.test(t.url)?v:b)===v?function(e,t){var i=t.bid,r=(t.startTime,[]);{var n;void 0!==e&&""!==e.vastUrl&&0<e.pub_rev&&(n=m(e.vastUrl).search||{},(t={}).requestId=i.bidId,e.deal_id&&(t.dealId=e.deal_id),t.ttl=300,t.netRevenue=!0,t.currency=e.currency,t.cpm=parseInt(e.pub_rev,10)/1e3,t.width=parseInt(e.width,10),t.height=parseInt(e.height,10),t.creativeId=e.adid,t.vastUrl=e.vastUrl,t.mediaType=v,e.ph=n.ph,e.colo=n.colo,e.ts=n.ts,r.push(t))}return r}:function(e,t){for(var i=t.bids,r=(t.startTime,e.ads.ad),n=[],o=0;o<r.length;o++){var a=r[o],s=parseInt(a.idx,10),d={};d.requestId=i[s].bidId,a.pub_rev&&(d.cpm=Number(a.pub_rev)/1e3,(s=a.creative[0])&&(d.width=s.width,d.height=s.height),d.creativeId=s.id,d.ad=a.html,a.deal_id&&(d.dealId=a.deal_id),d.ttl=300,d.netRevenue=!0,d.currency=a.currency,a.tbd&&(d.tbd=a.tbd),d.ts=a.ts,d.meta={},a.brand_id&&(d.meta.brandId=a.brand_id),a.adomain&&0<length(a.adomain)?d.meta.advertiserDomains=a.adomain:d.meta.advertiserDomains=[],a.adv_id&&(d.meta.dspid=a.adv_id),n.push(d))}return n})(e,t.payload)},getUserSyncs:function(e,t,i,r){if(e.iframeEnabled||e.pixelEnabled)return[{type:e.iframeEnabled?"iframe":"image",url:u(t,"0.body.ads.pixels")||u(t,"0.body.pixels")||function(e,t){var i=[];e&&(i.push("gdpr="+(e.gdprApplies?1:0)),i.push("gdpr_consent="+encodeURIComponent(e.consentString||"")));t&&i.push("us_privacy="+encodeURIComponent(t));return"".concat("https://u.openx.net/w/1.0/pd").concat(0<i.length?"?"+i.join("&"):"")}(i,r)}]},transformBidParams:function(e,t){return a({unit:"string",customFloor:"number"},e)}};function A(e,t){var i,r,n,o=d(),a={ju:h.getConfig("pageUrl")||t.refererInfo.referer,ch:document.charSet||document.characterSet,res:"".concat(screen.width,"x").concat(screen.height,"x").concat(screen.colorDepth),ifr:o,tz:(new Date).getTimezoneOffset(),tws:function(e){var t,i,r=window,n=document,o=n.documentElement;if(e){try{r=window.top,n=window.top.document}catch(e){return}o=n.documentElement,i=n.body,t=r.innerWidth||o.clientWidth||i.clientWidth,i=r.innerHeight||o.clientHeight||i.clientHeight}else o=n.documentElement,t=r.innerWidth||o.clientWidth,i=r.innerHeight||o.clientHeight;return"".concat(t,"x").concat(i)}(o),be:1,bc:e[0].params.bc||"".concat(w,"_").concat(x),dddid:c(e,function(e){return e.transactionId}).join(","),nocache:(new Date).getTime()},o=h.getConfig("ortb2.user.data");return Array.isArray(o)&&0<o.length&&(i=o.filter(function(e){return Array.isArray(e.segment)&&0<e.segment.length&&void 0!==e.name&&0<e.name.length}).reduce(function(e,t){var i="object"===s(t.ext)&&t.ext.segtax?"".concat(t.name,"/").concat(t.ext.segtax):t.name;return e[i]=(e[i]||[]).concat(t.segment.map(function(e){return e.id})),e},{}),0<(r=Object.keys(i).map(function(e,t){return e+":"+i[e].join("|")}).join(",")).length&&(a.sm=encodeURIComponent(r))),e[0].params.platform&&(a.ph=e[0].params.platform),t.gdprConsent&&(void 0!==(r=t.gdprConsent).consentString&&(a.gdpr_consent=r.consentString),void 0!==r.gdprApplies&&(a.gdpr=r.gdprApplies?1:0),"iab"===h.getConfig("consentManagement.cmpApi")&&(a.x_gdpr_f=1)),t&&t.uspConsent&&(a.us_privacy=t.uspConsent),u(e[0],"crumbs.pubcid")&&l(e[0],"userId.pubcid",u(e[0],"crumbs.pubcid")),n=a,t=e[0].userId,g(t,function(e,t){var i,r=I[t];if(I.hasOwnProperty(t))switch(t){case"flocId":case"uid2":n[r]=e.id;break;case"lipb":n[r]=e.lipbid,Array.isArray(e.segments)&&0<e.segments.length&&(i="liveintent:"+e.segments.join("|"),n.sm="".concat(n.sm?n.sm+encodeURIComponent(","):"").concat(encodeURIComponent(i)));break;case"parrableId":n[r]=e.eid;break;case"id5id":n[r]=e.uid;break;case"novatiq":n[r]=e.snowflake;break;default:n[r]=e}}),a=n,e[0].schain&&(a.schain=(e=e[0].schain,"".concat(e.ver,",").concat(e.complete,"!").concat(function(e){var i=["asi","sid","hp","rid","name","domain"];return e.map(function(t){return i.map(function(e){return t[e]||""}).join(",")}).join("!")}(e.nodes)))),a}function k(e,t,i){var r=[],n=!1;i.forEach(function(e){e=function(e,t){var i={},r=h.getConfig("currency.adServerCurrency")||S;"function"==typeof e.getFloor&&(i=e.getFloor({currency:r,mediaType:t,size:"*"}));e=i.floor||e.params.customFloor||0;return Math.round(1e3*e)}(e,t);e?(r.push(e),n=!0):r.push(0)}),n&&(e.aumfs=r.join(","))}t.exports=e("../shim.js").wrap({spec:o,unitIDKey:"unit",floorKey:"customFloor",floorStr:!1,uspSupport:!0,gdprSupport:!0})},{"../shim.js":33}],8:[function(e,t,i){"use strict";function o(t,e){var i,r=Object.keys(t);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(t),e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,i)),r}function f(r){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach(function(e){var t,i;t=r,e=n[i=e],i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))})}return r}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l=e("../shim.js").polyfills,h=l.logWarn,r=l._each,n=l.isBoolean,b=l.isStr,v=l.isArray,y=l.inIframe,g=l.mergeDeep,_=l.deepAccess,a=l.isNumber,w=l.deepSetValue,x=l.logInfo,d=l.logError,S=l.deepClone,s=l.convertTypes,I=(l.registerBidder,l.BANNER),A=l.VIDEO,k=l.NATIVE,z=l.config,c=l.Renderer,u="pubmatic",E="PubMatic: ",j=void 0,p="https://pubmatic.bbvms.com/r/".concat("$RENDERER",".js"),T={kadpageurl:"",gender:"",yob:"",lat:"",lon:"",wiid:"",profId:"",verId:""},C={NUMBER:"number",STRING:"string",BOOLEAN:"boolean",ARRAY:"array",OBJECT:"object"},O={mimes:C.ARRAY,minduration:C.NUMBER,maxduration:C.NUMBER,startdelay:C.NUMBER,playbackmethod:C.ARRAY,api:C.ARRAY,protocols:C.ARRAY,w:C.NUMBER,h:C.NUMBER,battr:C.ARRAY,linearity:C.NUMBER,placement:C.NUMBER,minbitrate:C.NUMBER,maxbitrate:C.NUMBER,skip:C.NUMBER},R={TITLE:{ID:1,KEY:"title",TYPE:0},IMAGE:{ID:2,KEY:"image",TYPE:0},ICON:{ID:3,KEY:"icon",TYPE:0},SPONSOREDBY:{ID:4,KEY:"sponsoredBy",TYPE:1},BODY:{ID:5,KEY:"body",TYPE:2},CLICKURL:{ID:6,KEY:"clickUrl",TYPE:0},VIDEO:{ID:7,KEY:"video",TYPE:0},EXT:{ID:8,KEY:"ext",TYPE:0},DATA:{ID:9,KEY:"data",TYPE:0},LOGO:{ID:10,KEY:"logo",TYPE:0},SPONSORED:{ID:11,KEY:"sponsored",TYPE:1},DESC:{ID:12,KEY:"data",TYPE:2},RATING:{ID:13,KEY:"rating",TYPE:3},LIKES:{ID:14,KEY:"likes",TYPE:4},DOWNLOADS:{ID:15,KEY:"downloads",TYPE:5},PRICE:{ID:16,KEY:"price",TYPE:6},SALEPRICE:{ID:17,KEY:"saleprice",TYPE:7},PHONE:{ID:18,KEY:"phone",TYPE:8},ADDRESS:{ID:19,KEY:"address",TYPE:9},DESC2:{ID:20,KEY:"desc2",TYPE:10},DISPLAYURL:{ID:21,KEY:"displayurl",TYPE:11},CTA:{ID:22,KEY:"cta",TYPE:12}},B={ICON:1,LOGO:2,IMAGE:3},P=[{id:R.SPONSOREDBY.ID,required:!0,data:{type:1}},{id:R.TITLE.ID,required:!0},{id:R.IMAGE.ID,required:!0}],U={1:"PMP",5:"PREF",6:"PMPG"},D={EID:1,SEGMENT:2},N={bootstrapPlayer:function(e){var t={code:e.adUnitCode};if(e.vastXml?t.vastXml=e.vastXml:e.vastUrl&&(t.vastUrl=e.vastUrl),e.vastXml||e.vastUrl){for(var i,r=N.getRendererId("pubmatic",e.rendererCode),e=document.getElementById(e.adUnitCode),n=0;n<window.bluebillywig.renderers.length;n++)if(window.bluebillywig.renderers[n]._id===r){i=window.bluebillywig.renderers[n];break}i?i.bootstrap(t,e):h("".concat(E,": Couldn't find a renderer with ").concat(r))}else h("".concat(E,": No vastXml or vastUrl on bid, bailing..."))},newRenderer:function(e,t){e=p.replace("$RENDERER",e),t=c.install({url:e,loaded:!1,adUnitCode:t});try{t.setRender(N.outstreamRender)}catch(e){h("".concat(E,": Error tying to setRender on renderer"),e)}return t},outstreamRender:function(e){e.renderer.push(function(){N.bootstrapPlayer(e)})},getRendererId:function(e,t){return"".concat(e,"-").concat(t)}},q=[I,A,k],F=0,M=!1,G={},L={};function W(e,t){if(!b(t))return t&&h(E+"Ignoring param key: "+e+", expects string-value, found "+m(t)),j;switch(e){case"pmzoneid":return t.split(",").slice(0,50).map(function(e){return e.trim()}).join();case"kadfloor":case"lat":case"lon":return parseFloat(t)||j;case"yob":return parseInt(t)||j;default:return t}}function K(e){e.params.adUnit="",e.params.adUnitIndex="0",e.params.width=0,e.params.height=0,e.params.adSlot=(t=e.params.adSlot,b(t)?t.replace(/^\s+/g,"").replace(/\s+$/g,""):(t&&h(u+": adSlot must be a string. Ignoring adSlot"),""));var t=(i=e.params.adSlot).split(":"),i=t[0];if(2==t.length&&(e.params.adUnitIndex=t[1]),t=i.split("@"),e.params.adUnit=t[0],1<t.length)2==(t=t[1].split("x")).length?(e.params.width=parseInt(t[0],10),e.params.height=parseInt(t[1],10)):h(E+"AdSlot Error: adSlot not in required format");else if(e.hasOwnProperty("mediaTypes")&&e.mediaTypes.hasOwnProperty(I)&&e.mediaTypes.banner.hasOwnProperty("sizes")){for(var r=0,n=[];r<e.mediaTypes.banner.sizes.length;r++)2===e.mediaTypes.banner.sizes[r].length&&n.push(e.mediaTypes.banner.sizes[r]);e.mediaTypes.banner.sizes=n,1<=e.mediaTypes.banner.sizes.length&&(e.params.width=e.mediaTypes.banner.sizes[0][0],e.params.height=e.mediaTypes.banner.sizes[0][1],e.mediaTypes.banner.sizes=e.mediaTypes.banner.sizes.splice(1,e.mediaTypes.banner.sizes.length-1))}}function Y(e){var t,i=g(_(e.mediaTypes,"video"),e.params.video);if(i!==j){for(var r in t={},O)i.hasOwnProperty(r)&&(t[r]=function(e,t,i){var r,e="Ignoring param key: "+e+", expects "+i+", found "+m(t);switch(i){case C.BOOLEAN:r=n;break;case C.NUMBER:r=a;break;case C.STRING:r=b;break;case C.ARRAY:r=v}return r(t)?t:(h(E+e),j)}(r,i[r],O[r]));v(e.mediaTypes.video.playerSize[0])?(t.w=parseInt(e.mediaTypes.video.playerSize[0][0],10),t.h=parseInt(e.mediaTypes.video.playerSize[0][1],10)):a(e.mediaTypes.video.playerSize[0])&&(t.w=parseInt(e.mediaTypes.video.playerSize[0],10),t.h=parseInt(e.mediaTypes.video.playerSize[1],10))}else t=j,h(E+"Error: Video config params missing for adunit: "+e.params.adUnit+" with mediaType set as video. Ignoring video impression in the adunit.");return t}function V(e,t,i){var r=t.rtd&&t.rtd.jwplayer&&t.rtd.jwplayer.targeting||void 0,n="";if(void 0!==r&&""!==r&&r.hasOwnProperty("segments")){var o=r.segments.length;n+="jw-id="+r.content.id;for(var a=0;a<o;a++)n+="|jw-"+r.segments[a]+"=1";i?void 0===e.dctr||0==e.dctr.length?e.dctr=n:e.dctr+="|"+n:(e=e.ext)&&void 0===e.key_val?e.key_val=n:e.key_val+="|"+n}}function H(e){var t,i,r,n,o,a,s,d,c={},u={},p=e.hasOwnProperty("sizes")?e.sizes:[],l="",g=[],c={id:e.bidId,tagid:e.params.adUnit||void 0,bidfloor:W("kadfloor",e.params.kadfloor),secure:1,ext:{pmZoneId:W("pmzoneid",e.params.pmzoneid)},bidfloorcur:e.params.currency?W("currency",e.params.currency):"USD"};if(r=c,(o=e).params.deals&&(v(o.params.deals)?o.params.deals.forEach(function(e){b(e)&&3<e.length?(r.pmp||(r.pmp={private_auction:0,deals:[]}),r.pmp.deals.push({id:e})):h(E+"Error: deal-id present in array bid.params.deals should be a strings with more than 3 charaters length, deal-id ignored: "+e)}):h(E+"Error: bid.params.deals should be an array of strings.")),n=c,a="",(o=e).params.dctr&&(a=o.params.dctr,b(a)&&0<a.length?(o=a.split("|"),a="",o.forEach(function(e){a+=0<e.length?e.trim()+"|":""}),o=a.length,"|"===a.substring(o,o-1)&&(a=a.substring(0,o-1)),n.ext.key_val=a.trim()):h(E+"Ignoring param : dctr with value : "+a+", expects string-value, found empty or non-string value")),V(c,e),e.hasOwnProperty("mediaTypes"))for(l in e.mediaTypes)switch(l){case I:(t=function(e){var t,i=e.mediaTypes.banner.sizes,r=[];if(i!==j&&v(i)){if(t={},e.params.width||e.params.height)t.w=e.params.width,t.h=e.params.height;else{if(0===i.length)return t=j,h(E+"Error: mediaTypes.banner.size missing for adunit: "+e.params.adUnit+". Ignoring the banner impression in the adunit."),t;t.w=parseInt(i[0][0],10),t.h=parseInt(i[0][1],10),i=i.splice(1,i.length-1)}0<i.length&&(r=[],i.forEach(function(e){1<e.length&&r.push({w:e[0],h:e[1]})}),0<r.length&&(t.format=r)),t.pos=0,t.topframe=y()?0:1}else h(E+"Error: mediaTypes.banner.size missing for adunit: "+e.params.adUnit+". Ignoring the banner impression in the adunit."),t=j;return t}(e))!==j&&(c.banner=t);break;case k:u.request=JSON.stringify(function(e){var t,i,r,n={assets:[]};for(t in e){if(e.hasOwnProperty(t)){var o={};if(!(n.assets&&0<n.assets.length&&n.assets.hasOwnProperty(t)))switch(t){case R.TITLE.KEY:e[t].len||e[t].length?o={id:R.TITLE.ID,required:e[t].required?1:0,title:{len:e[t].len||e[t].length,ext:e[t].ext}}:h(E+"Error: Title Length is required for native ad: "+JSON.stringify(e));break;case R.IMAGE.KEY:e[t].sizes&&0<e[t].sizes.length?o={id:R.IMAGE.ID,required:e[t].required?1:0,img:{type:B.IMAGE,w:e[t].w||e[t].width||(e[t].sizes?e[t].sizes[0]:j),h:e[t].h||e[t].height||(e[t].sizes?e[t].sizes[1]:j),wmin:e[t].wmin||e[t].minimumWidth||(e[t].minsizes?e[t].minsizes[0]:j),hmin:e[t].hmin||e[t].minimumHeight||(e[t].minsizes?e[t].minsizes[1]:j),mimes:e[t].mimes,ext:e[t].ext}}:h(E+"Error: Image sizes is required for native ad: "+JSON.stringify(e));break;case R.ICON.KEY:e[t].sizes&&0<e[t].sizes.length?o={id:R.ICON.ID,required:e[t].required?1:0,img:{type:B.ICON,w:e[t].w||e[t].width||(e[t].sizes?e[t].sizes[0]:j),h:e[t].h||e[t].height||(e[t].sizes?e[t].sizes[1]:j)}}:h(E+"Error: Icon sizes is required for native ad: "+JSON.stringify(e));break;case R.VIDEO.KEY:o={id:R.VIDEO.ID,required:e[t].required?1:0,video:{minduration:e[t].minduration,maxduration:e[t].maxduration,protocols:e[t].protocols,mimes:e[t].mimes,ext:e[t].ext}};break;case R.EXT.KEY:o={id:R.EXT.ID,required:e[t].required?1:0};break;case R.LOGO.KEY:o={id:R.LOGO.ID,required:e[t].required?1:0,img:{type:B.LOGO,w:e[t].w||e[t].width||(e[t].sizes?e[t].sizes[0]:j),h:e[t].h||e[t].height||(e[t].sizes?e[t].sizes[1]:j)}};break;case R.SPONSOREDBY.KEY:case R.BODY.KEY:case R.RATING.KEY:case R.LIKES.KEY:case R.DOWNLOADS.KEY:case R.PRICE.KEY:case R.SALEPRICE.KEY:case R.PHONE.KEY:case R.ADDRESS.KEY:case R.DESC2.KEY:case R.DISPLAYURL.KEY:case R.CTA.KEY:i=L[t],r=void 0,r=i.KEY,o={id:i.ID,required:e[r].required?1:0,data:{type:i.TYPE,len:e[r].len,ext:e[r].ext}}}}o&&o.id&&(n.assets[n.assets.length]=o)}var a=P.length,s=0;return P.forEach(function(e){for(var t=n.assets.length,i=0;i<t;i++)if(e.id==n.assets[i].id){s++;break}}),M=a!=s,n}(e.nativeParams)),M?h(E+"Error: Error in Native adunit "+e.params.adUnit+". Ignoring the adunit. Refer to http://prebid.org/dev-docs/show-native-ads.html for more details."):c.native=u;break;case A:(i=Y(e))!==j&&(c.video=i)}else t={pos:0,w:e.params.width,h:e.params.height,topframe:y()?0:1},v(p)&&1<p.length&&((p=p.splice(1,p.length-1)).forEach(function(e){g.push({w:e[0],h:e[1]})}),t.format=g),c.banner=t;return s=c,d=f({},_(e,"ortb2Imp.ext.data")),Object.keys(d).forEach(function(e){"pbadslot"===e?"string"==typeof d[e]&&d[e]&&w(s,"ext.data.pbadslot",d[e]):"adserver"===e?["name","adslot"].forEach(function(e){var t=_(d,"adserver.".concat(e));"string"==typeof t&&t&&(w(s,"ext.data.adserver.".concat(e.toLowerCase()),t),"adslot"===e&&w(s,"ext.dfp_ad_unit_code",t))}):w(s,"ext.data.".concat(e),d[e])}),function(r,n){var o=-1;"function"!=typeof n.getFloor||z.getConfig("pubmatic.disableFloors")||[I,A,k].forEach(function(i){var t;r.hasOwnProperty(i)&&(t=[],"banner"===i&&(r[i].w&&r[i].h&&t.push([r[i].w,r[i].h]),v(r[i].format)&&r[i].format.forEach(function(e){return t.push([e.w,e.h])})),0===t.length&&t.push("*"),t.forEach(function(e){var t=n.getFloor({currency:r.bidfloorcur,mediaType:i,size:e});x(E,"floor from floor module returned for mediatype:",i," and size:",e," is: currency",t.currency,"floor",t.floor),"object"!==m(t)||t.currency!==r.bidfloorcur||isNaN(parseInt(t.floor))||(t=parseFloat(t.floor),x(E,"floor from floor module:",t,"previous floor value",o,"Min:",Math.min(t,o)),o=-1===o?t:Math.min(t,o),x(E,"new floor value:",o))}))});r.bidfloor&&(x(E,"floor from floor module:",o,"impObj.bidfloor",r.bidfloor,"Max:",Math.max(o,r.bidfloor)),o=Math.max(o,r.bidfloor));r.bidfloor=!isNaN(o)&&0<o?o:j,x(E,"new impObj.bidfloor value:",r.bidfloor)}(c,e),c.hasOwnProperty(I)||c.hasOwnProperty(k)||c.hasOwnProperty(A)?c:j}function J(e,t){var i=null,e=_(e,"0.userId.flocId");return i=e&&e.id?t===D.SEGMENT?{id:"FLOC",name:"FLOC",ext:{ver:e.version},segment:[{id:e.id,name:"chrome.com",value:e.id.toString()}]}:(D.EID,{source:"chrome.com",uids:[{atype:1,id:e.id,ext:{ver:e.version}}]}):i}function X(e){return!0===v(e)&&0<e.length}r(R,function(e){G[e.ID]=e.KEY}),r(R,function(e){L[e.KEY]=e});r={code:u,gvlid:76,supportedMediaTypes:[I,A,k],isBidRequestValid:function(e){if(e&&e.params){if(!b(e.params.publisherId))return h(E+"Error: publisherId is mandatory and cannot be numeric (wrap it in quotes in your config). Call to OpenBid will not be sent for ad unit: "+JSON.stringify(e)),!1;if(e.hasOwnProperty("mediaTypes")&&e.mediaTypes.hasOwnProperty(A)){var t=_(e.mediaTypes,"video.mimes"),i=_(e,"params.video.mimes");if(!1===X(t)&&!1===X(i))return h(E+"Error: For video ads, bid.mediaTypes.video.mimes OR bid.params.video.mimes should be present and must be a non-empty array. Call to OpenBid will not be sent for ad unit:"+JSON.stringify(e)),!1;if(!e.mediaTypes[A].hasOwnProperty("context"))return d("".concat(E,": no context specified in bid. Rejecting bid: "),e),!1;if("outstream"===e.mediaTypes[A].context&&!b(e.params.outstreamAU)&&!e.hasOwnProperty("renderer")&&!e.mediaTypes[A].hasOwnProperty("renderer"))return e.mediaTypes.hasOwnProperty(I)||e.mediaTypes.hasOwnProperty(k)?(delete e.mediaTypes[A],h("".concat(E,': for "outstream" bids either outstreamAU parameter must be provided or ad unit supplied renderer is required. Rejecting mediatype Video of bid: '),e),!0):(d("".concat(E,': for "outstream" bids either outstreamAU parameter must be provided or ad unit supplied renderer is required. Rejecting bid: '),e),!1)}return!0}return!1},buildRequests:function(e,t){var i;t&&t.refererInfo&&(i=t.refererInfo);var r,n,o,a,s={pageURL:(a=i)&&a.referer?a.referer:window.location.href,refURL:window.document.referrer},d=(o=s,{id:""+(new Date).getTime(),at:1,cur:["USD"],imp:[],site:{page:o.pageURL,ref:o.refURL,publisher:{}},device:{ua:navigator.userAgent,js:1,dnt:"yes"==navigator.doNotTrack||"1"==navigator.doNotTrack||"1"==navigator.msDoNotTrack?1:0,h:screen.height,w:screen.width,language:navigator.language},user:{},ext:{}}),c="",u=[],p=[];if(e.forEach(function(e){(r=S(e)).params.adSlot=r.params.adSlot||"",K(r),r.params.hasOwnProperty("video")||r.hasOwnProperty("mediaTypes")&&r.mediaTypes.hasOwnProperty(k)||0!==r.params.width||0!==r.params.height?(s.pubId=s.pubId||r.params.publisherId,(s=function(e,t){var i,r,n;for(i in t.kadpageurl||(t.kadpageurl=t.pageURL),T)T.hasOwnProperty(i)&&(r=e[i])&&("object"===m(n=T[i])&&(r=n.f(r,t)),b(r)?t[i]=r:h(E+"Ignoring param : "+i+" with value : "+T[i]+", expects string-value, found "+m(r)));return t}(r.params,s)).transactionId=r.transactionId,""===c?c=r.params.currency||j:r.params.hasOwnProperty("currency")&&c!==r.params.currency&&h(E+"Currency specifier ignored. Only one currency permitted."),r.params.currency=c,r.params.hasOwnProperty("dctr")&&b(r.params.dctr)&&u.push(r.params.dctr),r.params.hasOwnProperty("bcat")&&v(r.params.bcat)&&(p=p.concat(r.params.bcat)),(e=H(r))&&d.imp.push(e)):h(E+"Skipping the non-standard adslot: ",r.params.adSlot,JSON.stringify(r))}),0!=d.imp.length){d.site.publisher.id=s.pubId.trim(),F=s.pubId.trim(),d.ext.wrapper={},d.ext.wrapper.profile=parseInt(s.profId)||j,d.ext.wrapper.version=parseInt(s.verId)||j,d.ext.wrapper.wiid=s.wiid||t.auctionId,d.ext.wrapper.wv="prebid_prebid_5.18.0-pre",d.ext.wrapper.transactionId=s.transactionId,d.ext.wrapper.wp="pbjs",d.user.gender=s.gender?s.gender.trim():j,d.user.geo={},d.user.geo.lat=W("lat",s.lat),d.user.geo.lon=W("lon",s.lon),d.user.yob=W("yob",s.yob),d.device.geo=d.user.geo,d.site.page=s.kadpageurl.trim()||d.site.page.trim(),d.site.domain=(n=d.site.page,(a=document.createElement("a")).href=n,a.hostname),"object"===m(z.getConfig("content"))&&(d.site.content=z.getConfig("content")),"object"===m(z.getConfig("device"))&&(d.device=l.utils.assign(d.device,z.getConfig("device"))),w(d,"source.tid",s.transactionId),-1!==window.location.href.indexOf("pubmaticTest=true")&&(d.test=1),e[0].schain&&w(d,"source.ext.schain",e[0].schain),t&&t.gdprConsent&&(w(d,"user.ext.consent",t.gdprConsent.consentString),w(d,"regs.ext.gdpr",t.gdprConsent.gdprApplies?1:0)),t&&t.uspConsent&&w(d,"regs.ext.us_privacy",t.uspConsent),!0===z.getConfig("coppa")&&w(d,"regs.coppa",1),o=d,a=_(n=e,"0.userIdAsEids"),(n=J(n,D.EID))&&(a=a||[]).push(n),v(a)&&0<a.length&&w(o,"user.eids",a),o=d,0<(a=(a=p).filter(function(e){return"string"==typeof e||(h(E+"bcat: Each category should be a string, ignoring category: "+e),!1)}).map(function(e){return e.trim()}).filter(function(e,t,i){return 3<e.length?i.indexOf(e)===t:void h(E+"bcat: Each category should have a value of a length of more than 3 characters, ignoring category: "+e)})).length&&(h(E+"bcat: Selected: ",a),o.bcat=a),a=d,(e=J(e=e,D.SEGMENT))&&(a.user||(a.user={}),a.user.data||(a.user.data=[]),a.user.data.push(e));e=z.getConfig("ortb2")||{};return e.site&&g(d,{site:e.site}),e.user&&g(d,{user:e.user}),"object"===m(z.getConfig("app"))&&(d.app=z.getConfig("app"),d.app.publisher=d.site.publisher,d.app.ext=d.site.ext||j,"object"!==m(d.app.content)&&(d.app.content=d.site.content||j),delete d.site),{method:"POST",url:"https://hbopenbid.pubmatic.com/translator?source=prebid-client",data:JSON.stringify(d),bidderRequest:t}}},interpretResponse:function(e,r){var n=[],o="USD",a=JSON.parse(r.data),s=a.site&&a.site.ref?a.site.ref:"";try{e.body&&e.body.seatbid&&v(e.body.seatbid)&&(o=e.body.cur||o,e.body.seatbid.forEach(function(e){e.bid&&v(e.bid)&&e.bid.forEach(function(t){var i={requestId:t.impid,cpm:(parseFloat(t.price)||0).toFixed(2),width:t.w,height:t.h,creativeId:t.crid||t.id,dealId:t.dealid,currency:o,netRevenue:!0,ttl:300,referrer:s,ad:t.adm,pm_seat:e.seat||null,pm_dspid:t.ext&&t.ext.dspid?t.ext.dspid:null,partnerImpId:t.id||""};a.imp&&0<a.imp.length&&a.imp.forEach(function(e){if(t.impid===e.id)switch(!function(e,t){if(e.ext&&null!=e.ext.BidType)t.mediaType=q[e.ext.BidType];else{x(E+"bid.ext.BidType does not exist, checking alternatively for mediaType");var i,r=e.adm,e=new RegExp(/VAST\s+version/);if(0<=r.indexOf('span class="PubAPIAd"'))t.mediaType=I;else if(e.test(r))t.mediaType=A;else try{(i=JSON.parse(r.replace(/\\/g,"")))&&i.native&&(t.mediaType=k)}catch(e){h(E+"Error: Cannot parse native reponse for ad response: "+r)}}}(t,i),i.mediaType){case I:break;case A:i.width=(t.hasOwnProperty("w")?t:e.video).w,i.height=(t.hasOwnProperty("h")?t:e.video).h,i.vastXml=t.adm,function(e,t){var i,r,n;if(t.bidderRequest&&t.bidderRequest.bids){for(var o=0;o<t.bidderRequest.bids.length;o++)t.bidderRequest.bids[o].bidId===e.requestId&&(i=t.bidderRequest.bids[o].params,r=t.bidderRequest.bids[o].mediaTypes[A].context,n=t.bidderRequest.bids[o].adUnitCode);r&&"outstream"===r&&i&&i.outstreamAU&&n&&(e.rendererCode=i.outstreamAU,e.renderer=N.newRenderer(e.rendererCode,n))}}(i,r);break;case k:!function(e,t){if(t.native={},e.hasOwnProperty("adm")){var i="";try{i=JSON.parse(e.adm.replace(/\\/g,""))}catch(e){return h(E+"Error: Cannot parse native reponse for ad response: "+t.adm)}if(i&&i.native&&i.native.assets&&0<i.native.assets.length){t.mediaType=k;for(var r=0,n=i.native.assets.length;r<n;r++)switch(i.native.assets[r].id){case R.TITLE.ID:t.native.title=i.native.assets[r].title&&i.native.assets[r].title.text;break;case R.IMAGE.ID:t.native.image={url:i.native.assets[r].img&&i.native.assets[r].img.url,height:i.native.assets[r].img&&i.native.assets[r].img.h,width:i.native.assets[r].img&&i.native.assets[r].img.w};break;case R.ICON.ID:t.native.icon={url:i.native.assets[r].img&&i.native.assets[r].img.url,height:i.native.assets[r].img&&i.native.assets[r].img.h,width:i.native.assets[r].img&&i.native.assets[r].img.w};break;case R.SPONSOREDBY.ID:case R.BODY.ID:case R.LIKES.ID:case R.DOWNLOADS.ID:case R.PRICE:case R.SALEPRICE.ID:case R.PHONE.ID:case R.ADDRESS.ID:case R.DESC2.ID:case R.CTA.ID:case R.RATING.ID:case R.DISPLAYURL.ID:t.native[G[i.native.assets[r].id]]=i.native.assets[r].data&&i.native.assets[r].data.value}t.native.clickUrl=i.native.link&&i.native.link.url,t.native.clickTrackers=i.native.link&&i.native.link.clicktrackers||[],t.native.impressionTrackers=i.native.imptrackers||[],t.native.jstracker=i.native.jstracker||[],t.width||(t.width=0),t.height||(t.height=0)}}}(t,i)}}),t.ext&&t.ext.deal_channel&&(i.dealChannel=U[t.ext.deal_channel]||null),i.meta={},t.ext&&t.ext.dspid&&(i.meta.networkId=t.ext.dspid),t.ext&&t.ext.advid&&(i.meta.buyerId=t.ext.advid),t.adomain&&0<t.adomain.length&&(i.meta.advertiserDomains=t.adomain,i.meta.clickUrl=t.adomain[0]),e.ext&&e.ext.buyid&&(i.adserverTargeting={hb_buyid_pubmatic:e.ext.buyid}),n.push(i)})}))}catch(e){d(e)}return n},getUserSyncs:function(e,t,i,r){var n=""+F;return i&&(n+="&gdpr="+(i.gdprApplies?1:0),n+="&gdpr_consent="+encodeURIComponent(i.consentString||"")),r&&(n+="&us_privacy="+encodeURIComponent(r)),!0===z.getConfig("coppa")&&(n+="&coppa=1"),e.iframeEnabled?[{type:"iframe",url:"https://ads.pubmatic.com/AdServer/js/user_sync.html?kdntuid=1&p="+n}]:[{type:"image",url:"https://image8.pubmatic.com/AdServer/ImgSync?p="+n}]},transformBidParams:function(e,t,i,r){return V(e,i.bids[0],!0),s({publisherId:"string",adSlot:"string"},e)}};t.exports=e("../shim.js").wrap({spec:r,unitIDKey:"adSlot",floorKey:"kadfloor",floorStr:!0,uspSupport:!0,gdprSupport:!0})},{"../shim.js":33}],9:[function(e,t,i){"use strict";function r(t,e){var i,r=Object.keys(t);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(t),e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,i)),r}function c(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach(function(e){u(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var r,n,o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(i="Object"===i&&e.constructor?e.constructor.name:i)||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function u(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var g=e("../shim.js").polyfills,f=g.mergeDeep,o=g._each,m=g.logError,h=g.deepAccess,b=g.deepSetValue,a=g.isStr,s=g.isNumber,v=g.logWarn,d=g.convertTypes,y=g.isArray,_=g.parseSizesInput,w=g.logMessage,x=(g.registerBidder,g.config),S=g.BANNER,I=g.VIDEO,A=g.find,k=g.Renderer,z=g.getGlobal,E={};x.getConfig("rubicon",function(e){f(E,e.rubicon)});var j={1:"468x60",2:"728x90",5:"120x90",7:"125x125",8:"120x600",9:"160x600",10:"300x600",13:"200x200",14:"250x250",15:"300x250",16:"336x280",17:"240x400",19:"300x100",31:"980x120",32:"250x360",33:"180x500",35:"980x150",37:"468x400",38:"930x180",39:"750x100",40:"750x200",41:"750x300",42:"2x4",43:"320x50",44:"300x50",48:"300x300",53:"1024x768",54:"300x1050",55:"970x90",57:"970x250",58:"1000x90",59:"320x80",60:"320x150",61:"1000x1000",64:"580x500",65:"640x480",66:"930x600",67:"320x480",68:"1800x1000",72:"320x320",73:"320x160",78:"980x240",79:"980x300",80:"980x400",83:"480x300",85:"300x120",90:"548x150",94:"970x310",95:"970x100",96:"970x210",101:"480x320",102:"768x1024",103:"480x280",105:"250x800",108:"320x240",113:"1000x300",117:"320x100",125:"800x250",126:"200x600",144:"980x600",145:"980x150",152:"1000x250",156:"640x320",159:"320x250",179:"250x600",195:"600x300",198:"640x360",199:"640x200",213:"1030x590",214:"980x360",221:"1x1",229:"320x180",230:"2000x1400",232:"580x400",234:"6x6",251:"2x2",256:"480x820",257:"400x600",258:"500x200",259:"998x200",264:"970x1000",265:"1920x1080",274:"1800x200",278:"320x500",282:"320x400",288:"640x380",548:"500x1000",550:"980x480",552:"300x200",558:"640x640",562:"300x431",564:"320x431",566:"320x300",568:"300x150",570:"300x125",572:"250x350",574:"620x891",576:"610x877",578:"980x552",580:"505x656"};o(j,function(e,t){return j[e]=t});var T={code:"rubicon",gvlid:52,supportedMediaTypes:[S,I],isBidRequestValid:function(e){if("object"!==l(e.params))return!1;for(var t=0,i=["accountId","siteId","zoneId"];t<i.length;t++)if(e.params[i[t]]=parseInt(e.params[i[t]]),isNaN(e.params[i[t]]))return m("Rubicon: wrong format of accountId or siteId or zoneId."),!1;var r,n,o,a,s=U(e,!0);return!!s&&("video"!==s||(r=e,n=!0,o=Object.prototype.toString.call([]),s=Object.prototype.toString.call(0),a={mimes:o,protocols:o,linearity:s,api:o},Object.keys(a).forEach(function(e){Object.prototype.toString.call(h(r,"mediaTypes.video."+e))!==a[e]&&(n=!1,m("Rubicon: mediaTypes.video."+e+" is required and must be of type: "+a[e]))}),n))},buildRequests:function(e,d){var n,t=e.filter(function(e){return"video"===U(e)}).map(function(e){e.startTime=(new Date).getTime();var t={id:e.transactionId,test:x.getConfig("debug")?1:0,cur:["USD"],source:{tid:e.transactionId},tmax:d.timeout,imp:[{exp:x.getConfig("s2sConfig.defaultTtl"),id:e.adUnitCode,secure:1,ext:u({},e.bidder,e.params),video:h(e,"mediaTypes.video")||{}}],ext:{prebid:{channel:{name:"pbjs",version:AdBridg.globals.version},cache:{vastxml:{returnCreative:!0===E.returnVast}},targeting:{includewinners:!0,includebidderkeys:!1,pricegranularity:{ranges:{low:[{max:5,increment:.5}],medium:[{max:20,increment:.1}],high:[{max:20,increment:.01}],auto:[{max:5,increment:.05},{min:5,max:10,increment:.1},{min:10,max:20,increment:.5}],dense:[{max:3,increment:.01},{min:3,max:8,increment:.05},{min:8,max:20,increment:.5}],custom:(a=x).getConfig("customPriceBucket")&&a.getConfig("customPriceBucket").buckets}[a.getConfig("priceGranularity")]}},bidders:{rubicon:{integration:E.int_type||"pbjs"}}}}};"rubicon"!==e.bidder&&(t.ext.prebid.aliases=u({},e.bidder,"rubicon"));var i,r,n,o,a=z().installedModules;if(!a||a.length&&-1===a.indexOf("rubiconAnalyticsAdapter")||b(t,"ext.prebid.analytics",{rubicon:{"client-analytics":!0}}),"function"!=typeof e.getFloor||E.disableFloors)r=parseFloat(h(e,"params.floor"));else{try{i=e.getFloor({currency:"USD",mediaType:"video",size:R(e,"video")})}catch(e){m("Rubicon: getFloor threw an error: ",e)}r="object"!==l(i)||"USD"!==i.currency||isNaN(parseInt(i.floor))?void 0:parseFloat(i.floor)}isNaN(r)||(t.imp[0].bidfloor=r),t.imp[0].ext[e.bidder].video.size_id=(r=e,a=parseInt(h(r,"params.video.size_id")),isNaN(a)?"outstream"===h(r,"mediaTypes.".concat(I,".context"))?203:201:a),o=e,a=d,(n=t)&&("object"===l(x.getConfig("app"))?n.app=x.getConfig("app"):n.site={page:C(o,a)},"object"===l(x.getConfig("device"))&&(n.device=x.getConfig("device")),o.params.video.language&&["site","device"].forEach(function(e){n[e]&&("site"===e?n[e].content=g.utils.assign({language:o.params.video.language},n[e].content):n[e]=g.utils.assign({language:o.params.video.language},n[e]))})),function(e,t){"object"===l(e.imp[0].video)&&void 0===e.imp[0].video.skip&&(e.imp[0].video.skip=t.params.video.skip);"object"===l(e.imp[0].video)&&void 0===e.imp[0].video.skipafter&&(e.imp[0].video.skipafter=t.params.video.skipdelay);"object"===l(e.imp[0].video)&&void 0===e.imp[0].video.pos&&("atf"===t.params.position?e.imp[0].video.pos=1:"btf"===t.params.position&&(e.imp[0].video.pos=3));t=R(t,"video");e.imp[0].video.w=t[0],e.imp[0].video.h=t[1]}(t,e),d.gdprConsent&&("boolean"==typeof d.gdprConsent.gdprApplies&&(s=d.gdprConsent.gdprApplies?1:0),b(t,"regs.ext.gdpr",s),b(t,"user.ext.consent",d.gdprConsent.consentString)),d.uspConsent&&b(t,"regs.ext.us_privacy",d.uspConsent);var s=h(d,"bids.0.userIdAsEids");s&&s.length&&b(t,"user.ext.eids",s);s=x.getConfig("user.id");s&&b(t,"user.id",s),!0===x.getConfig("coppa")&&b(t,"regs.coppa",1),e.schain&&D(e.schain)&&b(t,"source.ext.schain",e.schain);s=x.getConfig("multibid");return s&&b(t,"ext.prebid.multibid",s.reduce(function(e,t){var i={};return Object.keys(t).forEach(function(e){i[e.toLowerCase()]=t[e]}),e.push(i),e},[])),B(e,I,t),e.storedAuctionResponse&&b(t.imp[0],"ext.prebid.storedauctionresponse.id",e.storedAuctionResponse.toString()),b(t.imp[0],"ext.prebid.auctiontimestamp",d.auctionStart),{method:"POST",url:"https://".concat(E.videoHost||"prebid-server",".rubiconproject.com/openrtb2/auction"),data:t,bidRequest:e}});return!0!==E.singleRequest?t.concat(e.filter(function(e){return"banner"===U(e)}).map(function(e){var r=T.createSlotParams(e,d);return{method:"GET",url:"https://".concat(E.bannerHost||"fastlane",".rubiconproject.com/a/api/fastlane.json"),data:T.getOrderedParams(r).reduce(function(e,t){var i=r[t];return a(i)&&""!==i||s(i)?"".concat(e).concat(N(t,i),"&"):e},"")+"slots=1&rand=".concat(Math.random()),bidRequest:e}})):(n=e.filter(function(e){return"banner"===U(e)}).reduce(function(e,t){return(e[t.params.siteId]=e[t.params.siteId]||[]).push(t),e},{}),t.concat(Object.keys(n).reduce(function(t,e){var i,r;return i=n[e],r=10,i.map(function(e,t){return t%r==0?i.slice(t,t+r):null}).filter(function(e){return e}).forEach(function(e){var r=T.combineSlotUrlParams(e.map(function(e){return T.createSlotParams(e,d)}));t.push({method:"GET",url:"https://".concat(E.bannerHost||"fastlane",".rubiconproject.com/a/api/fastlane.json"),data:T.getOrderedParams(r).reduce(function(e,t){var i=r[t];return a(i)&&""!==i||s(i)?"".concat(e).concat(N(t,i),"&"):e},"")+"slots=".concat(e.length,"&rand=").concat(Math.random()),bidRequest:e})}),t},[])))},getOrderedParams:function(e){var t=/^tg_v/,i=/^tg_i/,r=/^eid_|^tpid_/,n=["account_id","site_id","zone_id","size_id","alt_size_ids","p_pos","gdpr","gdpr_consent","us_privacy","rp_schain"].concat(Object.keys(e).filter(function(e){return r.test(e)})).concat(["x_liverampidl","ppuid","rf","p_geo.latitude","p_geo.longitude","kw"]).concat(Object.keys(e).filter(function(e){return t.test(e)})).concat(Object.keys(e).filter(function(e){return i.test(e)})).concat(["tk_flint","x_source.tid","x_source.pchain","p_screen_res","rp_floor","rp_secure","tk_user_key"]);return n.concat(Object.keys(e).filter(function(e){return-1===n.indexOf(e)}))},combineSlotUrlParams:function(n){if(1===n.length)return n[0];var r=n.reduce(function(t,i,r){return Object.keys(i).forEach(function(e){t.hasOwnProperty(e)||(t[e]=new Array(n.length)),t[e].splice(r,1,i[e])}),t},{}),o=new RegExp("^([^;]*)(;\\1)+$");return Object.keys(r).forEach(function(e){var t=r[e].join(";"),i=t.match(o);r[e]=i?i[1]:t}),r},createSlotParams:function(e,t){e.startTime=(new Date).getTime();var i=e.params,r=R(e,"banner"),n=p(i.latLong||[],2),o=n[0],n=n[1],a={account_id:i.accountId,site_id:i.siteId,zone_id:i.zoneId,size_id:r[0],alt_size_ids:r.slice(1).join(",")||void 0,rp_floor:.01<=(i.floor=parseFloat(i.floor))?i.floor:void 0,rp_secure:"1",tk_flint:"".concat(E.int_type||"pbjs_lite","_v5.18.0-pre"),"x_source.tid":e.transactionId,"x_source.pchain":i.pchain,p_screen_res:[window.screen.width,window.screen.height].join("x"),tk_user_key:i.userId,"p_geo.latitude":isNaN(parseFloat(o))?void 0:parseFloat(o).toFixed(4),"p_geo.longitude":isNaN(parseFloat(n))?void 0:parseFloat(n).toFixed(4),"tg_fl.eid":e.code,rf:C(e,t)};if("function"==typeof e.getFloor&&!E.disableFloors){try{s=e.getFloor({currency:"USD",mediaType:"banner",size:"*"})}catch(e){m("Rubicon: getFloor threw an error: ",e)}a.rp_hard_floor="object"!==l(s)||"USD"!==s.currency||isNaN(parseInt(s.floor))?void 0:s.floor}var s={1:"atf",3:"btf"}[h(e,"mediaTypes.banner.pos")]||"";a.p_pos="atf"===i.position||"btf"===i.position?i.position:s;s=x.getConfig("user.id");return s&&(a.ppuid=s),e.userIdAsEids&&e.userIdAsEids.forEach(function(t){try{var e;"adserver.org"===t.source?(a.tpid_tdid=t.uids[0].id,a["eid_adserver.org"]=t.uids[0].id):"liveintent.com"===t.source?(a["tpid_liveintent.com"]=t.uids[0].id,a["eid_liveintent.com"]=t.uids[0].id,t.ext&&Array.isArray(t.ext.segments)&&t.ext.segments.length&&(a["tg_v.LIseg"]=t.ext.segments.join(","))):"liveramp.com"===t.source?a.x_liverampidl=t.uids[0].id:"id5-sync.com"===t.source?a["eid_id5-sync.com"]="".concat(t.uids[0].id,"^").concat(t.uids[0].atype,"^").concat(t.uids[0].ext&&t.uids[0].ext.linkType||""):a["eid_".concat(t.source)]="".concat(t.uids[0].id,"^").concat(t.uids[0].atype||""),a.ppuid||(e=A(t.uids,function(e){return e.ext&&"ppuid"===e.ext.stype}))&&e.id&&(a.ppuid=e.id)}catch(e){v("Rubicon: error reading eid:",t,e)}}),t.gdprConsent&&("boolean"==typeof t.gdprConsent.gdprApplies&&(a.gdpr=Number(t.gdprConsent.gdprApplies)),a.gdpr_consent=t.gdprConsent.consentString),t.uspConsent&&(a.us_privacy=encodeURIComponent(t.uspConsent)),a.rp_maxbids=t.bidLimit||1,B(e,S,a),!0===x.getConfig("coppa")&&(a.coppa=1),e.schain&&D(e.schain)&&(a.rp_schain=T.serializeSupplyChain(e.schain)),a},serializeSupplyChain:function(e){if(!D(e))return"";var t=e.ver,i=e.complete,e=e.nodes;return"".concat(t,",").concat(i,"!").concat(T.serializeSupplyChainNodes(e))},serializeSupplyChainNodes:function(e){var i=["asi","sid","hp","rid","name","domain"];return e.map(function(t){return i.map(function(e){return encodeURIComponent(t[e]||"")}).join(",")}).join("!")},interpretResponse:function(s,e){var d=e.bidRequest;if(!(s=s.body)||"object"!==l(s))return[];if(s.seatbid){var t=h(s,"ext.errors.rubicon");Array.isArray(t)&&0<t.length&&v("Rubicon: Error in video response");var n=[];return s.seatbid.forEach(function(r){(r.bid||[]).forEach(function(e){var t={requestId:d.bidId,currency:s.cur||"USD",creativeId:e.crid,cpm:e.price||0,bidderCode:r.seat,ttl:300,netRevenue:!1!==E.netRevenue,width:e.w||h(d,"mediaTypes.video.w")||h(d,"params.video.playerWidth"),height:e.h||h(d,"mediaTypes.video.h")||h(d,"params.video.playerHeight")};e.id&&(t.seatBidId=e.id),e.dealid&&(t.dealId=e.dealid),e.adomain&&b(t,"meta.advertiserDomains",Array.isArray(e.adomain)?e.adomain:[e.adomain]),h(e,"ext.bidder.rp.advid")&&b(t,"meta.advertiserId",e.ext.bidder.rp.advid);var i=h(s,"ext.responsetimemillis.rubicon");d&&i&&(d.serverResponseTimeMs=i),h(e,"ext.prebid.type")===I?(t.mediaType=I,b(t,"meta.mediaType",I),(i=h(e,"ext.prebid.targeting"))&&"object"===l(i)&&(t.adserverTargeting=i),e.ext.prebid.cache&&"object"===l(e.ext.prebid.cache.vastXml)&&e.ext.prebid.cache.vastXml.cacheId&&e.ext.prebid.cache.vastXml.url?(t.videoCacheKey=e.ext.prebid.cache.vastXml.cacheId,t.vastUrl=e.ext.prebid.cache.vastXml.url):i&&i.hb_uuid&&i.hb_cache_host&&i.hb_cache_path&&(t.videoCacheKey=i.hb_uuid,t.vastUrl="https://".concat(i.hb_cache_host).concat(i.hb_cache_path,"?uuid=").concat(i.hb_uuid)),e.adm&&(t.vastXml=e.adm),e.nurl&&(t.vastUrl=e.nurl),!t.vastUrl&&e.nurl&&(t.vastUrl=e.nurl),"outstream"===h(d,"mediaTypes.video.context").toLowerCase()&&(t.renderer=function(e){e=k.install({id:e.adId,url:E.rendererUrl||"https://video-outstream.rubiconproject.com/apex-2.0.0.js",config:E.rendererConfig||{},loaded:!1,adUnitCode:e.adUnitCode});try{e.setRender(O)}catch(e){v("Prebid Error calling setRender on renderer",e)}return e}(t))):v("Rubicon: video response received non-video media type"),n.push(t)})}),n}var c,t=s.ads,u=0;return"object"!==l(d)||Array.isArray(d)||"video"!==U(d)||"object"!==l(t)||(t=t[d.adUnitCode]),!Array.isArray(t)||t.length<1?[]:t.reduce(function(e,t,i){if(t.impression_id&&c===t.impression_id?u++:c=t.impression_id,"ok"!==t.status)return e;var r,n,o,a=Array.isArray(d)?d[i-u]:d;return a&&"object"===l(a)?(r={requestId:a.bidId,currency:"USD",creativeId:t.creative_id||"".concat(t.network||"","-").concat(t.advertiser||""),cpm:t.cpm||0,dealId:t.deal,ttl:300,netRevenue:!1!==E.netRevenue,rubicon:{advertiserId:t.advertiser,networkId:t.network},meta:{advertiserId:t.advertiser,networkId:t.network,mediaType:S}},t.creative_type&&(r.mediaType=t.creative_type),t.adomain&&(r.meta.advertiserDomains=Array.isArray(t.adomain)?t.adomain:[t.adomain]),t.creative_type===I?(r.width=a.params.video.playerWidth,r.height=a.params.video.playerHeight,r.vastUrl=t.creative_depot_url,r.impression_id=t.impression_id,r.videoCacheKey=t.impression_id):(r.ad=(n=t.script,o=t.impression_id,"<html>\n<head><script type='text/javascript'>inDapIF=true;<\/script></head>\n<body style='margin : 0; padding: 0;'>\n\x3c!-- Rubicon Project Ad Tag --\x3e\n<div data-rp-impression-id='".concat(o,"'>\n<script type='text/javascript'>").concat(n,"<\/script>\n</div>\n</body>\n</html>")),n=p(j[t.size_id].split("x").map(function(e){return Number(e)}),2),r.width=n[0],r.height=n[1]),r.rubiconTargeting=(Array.isArray(t.targeting)?t.targeting:[]).reduce(function(e,t){return e[t.key]=t.values[0],e},{rpfl_elemid:a.adUnitCode}),e.push(r)):m("Rubicon: bidRequest undefined at index position:".concat(i),d,s),e},[]).sort(function(e,t){return(t.cpm||0)-(e.cpm||0)})},getUserSyncs:function(e,t,i,r){if(!q&&e.iframeEnabled){e="";return i&&"string"==typeof i.consentString&&("boolean"==typeof i.gdprApplies?e+="?gdpr=".concat(Number(i.gdprApplies),"&gdpr_consent=").concat(i.consentString):e+="?gdpr_consent=".concat(i.consentString)),r&&(e+="".concat(e?"&":"?","us_privacy=").concat(encodeURIComponent(r))),q=!0,{type:"iframe",url:"https://".concat(E.syncHost||"eus",".rubiconproject.com/usync.html")+e}}},transformBidParams:function(e,t){return d({accountId:"number",siteId:"number",zoneId:"number"},e)}};function C(e,t){var i=x.getConfig("pageUrl"),i=e.params.referrer||i||t.refererInfo.referer;return e.params.secure?i.replace(/^http:/i,"https:"):i}function O(e){var t,i=document.getElementById(e.adUnitCode);(t=(t=i).querySelector("div[id^='google_ads']"))&&t.style.setProperty("display","none"),(i=(i=(i=i).querySelector("script[id^='sas_script']"))&&i.nextSibling)&&"iframe"===i.localName&&i.style.setProperty("display","none");var r=e.renderer.getConfig();e.renderer.push(function(){window.MagniteApex.renderAd({width:e.width,height:e.height,vastUrl:e.vastUrl,placement:{attachTo:"#".concat(e.adUnitCode),align:r.align||"center",position:r.position||"append"},closeButton:r.closeButton||!1,label:r.label||void 0,collapse:r.collapse||!0})})}function R(e,t){var i=e.params;if("video"===t){var r=[];return i.video&&i.video.playerWidth&&i.video.playerHeight?r=[i.video.playerWidth,i.video.playerHeight]:Array.isArray(h(e,"mediaTypes.video.playerSize"))&&1===e.mediaTypes.video.playerSize.length?r=e.mediaTypes.video.playerSize[0]:Array.isArray(e.sizes)&&0<e.sizes.length&&Array.isArray(e.sizes[0])&&1<e.sizes[0].length&&(r=e.sizes[0]),r}var n,r=[];return Array.isArray(i.sizes)?r=i.sizes:void 0!==h(e,"mediaTypes.banner.sizes")?r=P(e.mediaTypes.banner.sizes):Array.isArray(e.sizes)&&0<e.sizes.length?r=P(e.sizes):v("Rubicon: no sizes are setup or found"),n=[15,2,9],r.sort(function(e,t){var i=n.indexOf(e),r=n.indexOf(t);return-1<i||-1<r?-1===i?1:-1===r?-1:i-r:e-t})}function B(e,t,n){var i={user:{ext:{data:c({},e.params.visitor)}},site:{ext:{data:c({},e.params.inventory)}}};e.params.keywords&&(i.site.keywords=y(e.params.keywords)?e.params.keywords.join(","):e.params.keywords);function r(e,t,i){var r=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],e=function(e,t,i){if("data"===t&&Array.isArray(e))return e.filter(function(e){return e.segment&&h(e,"ext.segtax")&&s[i]&&-1!==s[i].indexOf(h(e,"ext.segtax"))}).map(function(e){e=e.segment.filter(function(e){return e.id}).reduce(function(e,t){return e.push(t.id),e},[]);if(0<e.length)return e.toString()}).toString();if("object"!==l(e)||Array.isArray(e)){if(void 0!==e)return(Array.isArray(e)?e.filter(function(e){return"object"!==l(e)&&void 0!==e?e.toString():void v("Rubicon: Filtered value: ",e,"for key",t,": Expected value to be string, integer, or an array of strings/ints")}):e).toString()}else v("Rubicon: Filtered FPD key: ",t,": Expected value to be string, integer, or an array of strings/ints")}(e,i,t),i=d[i]&&r?"".concat(d[i]):"data"===i?"".concat(d[t],"iab"):"".concat(d[t]).concat(i);n[i]=n[i]?n[i].concat(",",e):e}var o=f({},x.getConfig("ortb2")||{},i),a=h(e.ortb2Imp,"ext.data")||{},s={user:[4],site:[1,2,5,6]},d={user:"tg_v.",site:"tg_i.",adserver:"tg_i.dfp_ad_unit_code",pbadslot:"tg_i.pbadslot",keywords:"kw"};Object.keys(a).forEach(function(t){"adserver"===t?["name","adslot"].forEach(function(e){a[t][e]&&(a[t][e]=a[t][e].toString().replace(/^\/+/,""))}):"pbadslot"===t&&(a[t]=a[t].toString().replace(/^\/+/,""))}),t===S?(["site","user"].forEach(function(t){Object.keys(o[t]).forEach(function(e){"site"===t&&"content"===e&&o[t][e].data?r(o[t][e].data,t,"data"):"ext"!==e?r(o[t][e],t,e):o[t][e].data&&Object.keys(o[t].ext.data).forEach(function(e){r(o[t].ext.data[e],t,e,!1)})})}),Object.keys(a).forEach(function(e){"adserver"===e?r(a[e].adslot,name,e):r(a[e],"site",e)})):(Object.keys(a).length&&f(n.imp[0].ext,{data:a}),f(n,o))}function P(e){return _(e).reduce(function(e,t){t=parseInt(j[t],10);return t&&e.push(t),e},[])}function U(e,t){var i=1<arguments.length&&void 0!==t&&t;if("object"===l(h(t=e,"params.video"))&&void 0!==h(t,"mediaTypes.".concat(I)))if(-1!==["outstream","instream"].indexOf(h(e,"mediaTypes.".concat(I,".context")))){if(!(R(e,"video").length<2))return i&&w("Rubicon: making video request for adUnit",e.adUnitCode),"video";i&&m("Rubicon: could not determine the playerSize of the video")}else i&&m("Rubicon: mediaTypes.video.context must be outstream or instream");else{if(0!==R(e,"banner").length)return i&&w("Rubicon: making banner request for adUnit",e.adUnitCode),"banner";i&&m("Rubicon: could not determine the sizes for banner request")}}function D(e){var t=!1,i=["asi","sid","hp"];return e.nodes&&((t=e.nodes.reduce(function(e,t){return e&&i.every(function(e){return t.hasOwnProperty(e)})},!0))||m("Rubicon: required schain params missing")),t}function N(e,t){return"rp_schain"===e?"rp_schain=".concat(t):"".concat(e,"=").concat(encodeURIComponent(t))}var q=!1;t.exports=e("../shim.js").wrap({spec:T,unitIDKey:"zoneId",floorKey:"floor",floorStr:!1,uspSupport:!0,gdprSupport:!0})},{"../shim.js":33}],10:[function(e,t,i){"use strict";function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(t,e){var i,r=Object.keys(t);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(t),e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,i)),r}function d(r){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach(function(e){var t,i;t=r,e=n[i=e],i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))})}return r}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var r,n,o=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(i="Object"===i&&e.constructor?e.constructor.name:i)||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?r(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}var n=e("../shim.js").polyfills,u=n.generateUUID,p=n.deepAccess,l=n.inIframe,g=(n.registerBidder,n.config),a=n.BANNER,f=n.VIDEO,m=n.createEidsArray,h="sharethrough",b="https://btlr.sharethrough.com/universal/v1?supply_id=".concat("WYu2BXv1"),v={getProtocol:function(){return window.location.protocol}},n={code:h,supportedMediaTypes:[f,a],isBidRequestValid:function(e){return!!e.params.pkey&&e.bidder===h},buildRequests:function(e,t){var i=g.getConfig("bidderTimeout"),a=v.getProtocol().indexOf("http")<0||-1<v.getProtocol().indexOf("https"),r={id:u(),at:1,cur:["USD"],tmax:i,site:{domain:window.location.hostname,page:window.location.href,ref:t.refererInfo&&t.refererInfo.referer||null},user:{ext:{eids:function(e){var t=m(p(e,"userId"))||[],e=p(e,"userId.flocId");e&&e.id&&e.version&&t.push({source:"chrome.com",uids:[{id:e.id,atype:1,ext:{ver:e.version}}]});return t}(e[0])}},device:{ua:navigator.userAgent,language:navigator.language,js:1,dnt:"1"===navigator.doNotTrack?1:0,h:window.screen.height,w:window.screen.width},regs:{coppa:!0===g.getConfig("coppa")?1:0,ext:{}},source:{ext:{version:"5.18.0-pre",str:"4.0.1",schain:e[0].schain}},bcat:e[0].params.bcat||[],badv:e[0].params.badv||[],test:0};return t.gdprConsent&&(i=!0===t.gdprConsent.gdprApplies,r.regs.ext.gdpr=i?1:0,i&&(r.user.ext.consent=t.gdprConsent.consentString)),t.uspConsent&&(r.regs.ext.us_privacy=t.uspConsent),e.map(function(e){var t,i,r,n={},o=p(e,"ortb2Imp.ext.data.pbadslot");return o&&(n.ext={gpid:o}),e.mediaTypes&&e.mediaTypes.video&&"outstream"===e.mediaTypes.video.context?null:(e.mediaTypes&&e.mediaTypes.video?(i=640,r=360,(t=e.mediaTypes.video).playerSize&&t.playerSize[0]&&t.playerSize[1]&&(i=(o=c(t.playerSize,2))[0],r=o[1]),n.video={pos:y(t.pos,0),topframe:l()?0:1,skip:y(t.skip,0),linearity:y(t.linearity,1),minduration:y(t.minduration,5),maxduration:y(t.maxduration,60),playbackmethod:t.playbackmethod||[2],api:function(e){e=e.api;return e&&Array.isArray(e)&&0<e.length?e:[2]}(t),mimes:t.mimes||["video/mp4"],protocols:function(e){e=e.protocols;return e&&Array.isArray(e)&&0<e.length?e:[2,3,5,6,7,8]}(t),w:i,h:r,startdelay:y(t.startdelay,0),skipmin:y(t.skipmin,0),skipafter:y(t.skipafter,0)},t.placement&&(n.video.placement=t.placement),t.delivery&&(n.video.delivery=t.delivery),t.companiontype&&(n.video.companiontype=t.companiontype),t.companionad&&(n.video.companionad=t.companionad)):n.banner={pos:p(e,"mediaTypes.banner.pos",0),topframe:l()?0:1,format:e.sizes.map(function(e){return{w:+e[0],h:+e[1]}})},d({id:e.bidId,tagid:String(e.params.pkey),secure:a?1:0,bidfloor:function(e){var t=null;{var i;"function"==typeof e.getFloor&&("object"!==s(i=e.getFloor({currency:"USD",mediaType:e.mediaTypes&&e.mediaTypes.video?"video":"banner",size:e.sizes.map(function(e){return{w:e[0],h:e[1]}})}))||"USD"!==i.currency||isNaN(parseFloat(i.floor))||(t=parseFloat(i.floor)))}return null!==t?t:e.params.floor}(e)},n))}).filter(function(e){return!!e}).map(function(e){return{method:"POST",url:b,data:d(d({},r),{},{imp:[e]})}})},interpretResponse:function(e,i){var r=e.body;return r&&r.seatbid&&0!==r.seatbid.length&&r.seatbid[0].bid&&0!==r.seatbid[0].bid.length?r.seatbid[0].bid.map(function(e){var t={requestId:e.impid,width:+e.w,height:+e.h,cpm:+e.price,creativeId:e.crid,dealId:e.dealid||null,mediaType:i.data.imp[0].video?f:a,currency:r.cur||"USD",netRevenue:!0,ttl:360,ad:e.adm,nurl:e.nurl,meta:{advertiserDomains:e.adomain||[]}};return t.mediaType===f&&(t.ttl=3600,t.vastXml=e.adm),t}):[]},getUserSyncs:function(e,t,i,r){var n=r?"&us_privacy=".concat(r):"",o=[];return e.pixelEnabled&&0<t.length&&t[0].body&&t[0].body.cookieSyncUrls&&t[0].body.cookieSyncUrls.forEach(function(e){o.push({type:"image",url:e+n})}),o},onTimeout:function(e){},onBidWon:function(e){},onSetTargeting:function(e){}};function y(e,t){return null==e?t:e}t.exports=e("../shim.js").wrap({spec:n,unitIDKey:"pkey",floorKey:"bidfloor",floorStr:!1,uspSupport:!0,gdprSupport:!0})},{"../shim.js":33}],11:[function(e,t,i){"use strict";var r=e("../shim.js").polyfills,l=r._each,g=r.getBidIdParameter,f=r.isArray,m=r.deepClone,h=r.parseUrl,b=r.getUniqueIdentifierStr,v=r.deepSetValue,y=r.logError,s=r.deepAccess,n=(r.registerBidder,r.BANNER),_=r.createEidsArray,w=r.config,r={code:"sovrn",supportedMediaTypes:[n],gvlid:13,isBidRequestValid:function(e){return!(!e.params.tagid||isNaN(parseFloat(e.params.tagid))||!isFinite(e.params.tagid))},buildRequests:function(e,t){try{var r,n,o,a,s=[],d=[];l(e,function(e){!o&&e.userId&&(o=_(e.userId)).forEach(function(e){e.uids&&e.uids[0]&&("criteo.com"===e.source&&(a=e.uids[0].id),d.push({source:e.source,uid:e.uids[0].id}))}),e.schain&&(n=n||e.schain),r=r||g("iv",e.params);var t=e.mediaTypes&&e.mediaTypes.banner&&e.mediaTypes.banner.sizes||e.sizes,i=(t=(t=f(t)&&f(t[0])?t:[t]).filter(function(e){return f(e)})).map(function(e){return{w:parseInt(e[0],10),h:parseInt(e[1],10)}}),t=e.getFloor&&"function"==typeof e.getFloor?e.getFloor({currency:"USD",mediaType:"banner",size:"*"}):{};t.floor=t.floor||g("bidfloor",e.params);t={adunitcode:e.adUnitCode,id:e.bidId,banner:{format:i,w:1,h:1},tagid:String(g("tagid",e.params)),bidfloor:t.floor};t.ext=g("ext",e.ortb2Imp)||void 0;e=g("segments",e.params);e&&(t.ext=t.ext||{},t.ext.deals=e.split(",").map(function(e){return e.trim()})),s.push(t)});var i=m(w.getConfig("ortb2")),c=i.site||{};c.page=t.refererInfo.referer,c.domain=h(c.page).hostname;var u={id:b(),imp:s,site:c,user:i.user||{}};n&&(u.source={ext:{schain:n}}),t.gdprConsent&&(v(u,"regs.ext.gdpr",+t.gdprConsent.gdprApplies),v(u,"user.ext.consent",t.gdprConsent.consentString)),t.uspConsent&&v(u,"regs.ext.us_privacy",t.uspConsent),o&&(v(u,"user.ext.eids",o),v(u,"user.ext.tpid",d),a&&v(u,"user.ext.prebid_criteoid",a));var p="https://ap.lijit.com/rtb/bid?src=prebid_prebid_5.18.0-pre";return r&&(p+="&iv=".concat(r)),{method:"POST",url:p,data:JSON.stringify(u),options:{contentType:"text/plain"}}}catch(e){y("Could not build bidrequest, error deatils:",e)}},interpretResponse:function(e){var t=e.body,e=t.id,t=t.seatbid;try{var i=[];return e&&t&&0<t.length&&t[0].bid&&0<t[0].bid.length&&t[0].bid.map(function(e){i.push({requestId:e.impid,cpm:parseFloat(e.price),width:parseInt(e.w),height:parseInt(e.h),creativeId:e.crid||e.id,dealId:e.dealid||null,currency:"USD",netRevenue:!0,mediaType:n,ad:decodeURIComponent("".concat(e.adm,'<img src="').concat(e.nurl,'">')),ttl:e.ext&&e.ext.ttl||90,meta:{advertiserDomains:e&&e.adomain?e.adomain:[]}})}),i}catch(e){y("Could not intrepret bidresponse, error deatils:",e)}},getUserSyncs:function(e,t,i,r){try{var n,o,a=[];return t&&0!==t.length&&(e.iframeEnabled&&(n=t.filter(function(e){return s(e,"body.ext.iid")}).map(function(e){return e.body.ext.iid}),o=[],i&&i.gdprApplies&&"string"==typeof i.consentString&&o.push(["gdpr_consent",i.consentString]),r&&o.push(["us_privacy",r]),n[0]&&(o.push(["informer",n[0]]),a.push({type:"iframe",url:"https://ap.lijit.com/beacon?"+o.map(function(e){return e.join("=")}).join("&")}))),e.pixelEnabled&&t.filter(function(e){return s(e,"body.ext.sync.pixels")}).reduce(function(e,t){return e.concat(t.body.ext.sync.pixels)},[]).map(function(e){return e.url}).forEach(function(e){return a.push({type:"image",url:e})})),a}catch(e){return[]}}};t.exports=e("../shim.js").wrap({spec:r,unitIDKey:"tagid",floorKey:"bidfloor",floorStr:!1,uspSupport:!0,gdprSupport:!0})},{"../shim.js":33}],12:[function(e,t,i){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(t,e){var i,r=Object.keys(t);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(t),e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,i)),r}function a(r){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach(function(e){var t,i;t=r,e=n[i=e],i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))})}return r}function s(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(i="Object"===i&&e.constructor?e.constructor.name:i)||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?r(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}var d=e("../shim.js").polyfills,c=d.tryAppendQueryString,u=d.logMessage,p=d.isEmpty,l=d.BANNER,g=d.VIDEO,f=(d.registerBidder,d.config),m=!0,h=null,g={gvlid:28,code:"triplelift",supportedMediaTypes:[l,g],isBidRequestValid:function(e){return void 0!==e.params.inventoryCode},buildRequests:function(e,t){var i="https://tlx.3lift.com/header/auction?",r=function(e){var t={},i=e[0].schain,r=function(){var e={},t={},i={},r=f.getLegacyFpd(f.getConfig("ortb2"))||{},n=d.utils.assign({},r.context),r=d.utils.assign({},r.user);v(t,n),v(i,r),p(t)||(e.context=t);p(i)||(e.user=i);return e}();t.imp=e.map(function(e,t){t={id:t,tagid:e.params.inventoryCode,floor:function(e){var t=null;{var i;"function"==typeof e.getFloor&&("object"!==n(i=e.getFloor({currency:"USD",mediaType:b(e)?"video":"banner",size:"*"}))||"USD"!==i.currency||isNaN(parseFloat(i.floor))||(t=parseFloat(i.floor)))}return null!==t?t:e.params.floor}(e)};return b(e)?t.video=function(e){e=a(a({},e.params.video),e.mediaTypes.video);e.w||(e.w=e.playerSize[0][0]);e.h||(e.h=e.playerSize[0][1]);"instream"===e.context&&(e.placement=1);return delete e.playerSize,e}(e):e.mediaTypes.banner&&(t.banner={format:e.sizes.filter(_).map(function(e){return{w:e[0],h:e[1]}})}),p(e.ortb2Imp)||(t.fpd=function(e){var t={},i={};v(i,e.ext),p(i)||(t.context=i);return t}(e.ortb2Imp)),t});e=[].concat(s(function(e){return y(e,"tdid","adserver.org","TDID")}([e[0]])),s(function(e){return y(e,"idl_env","liveramp.com","idl")}([e[0]])),s(function(e){return y(e,"criteoId","criteo.com","criteoId")}([e[0]])),s(function(e){return y(e,"pubcid","pubcid.org","pubcid")}([e[0]])));0<e.length&&(t.user={ext:{eids:e}});r=function(e,t){var i={};p(e)||(i.schain=a({},e));p(t)||(i.fpd=a({},t));return i}(i,r);p(r)||(t.ext=r);return t}(e);return i=c(i,"lib","prebid"),i=c(i,"v","5.18.0-pre"),t&&t.refererInfo&&(e=t.refererInfo.referer,i=c(i,"referrer",e)),t&&t.timeout&&(i=c(i,"tmax",t.timeout)),t&&t.gdprConsent&&(void 0!==t.gdprConsent.gdprApplies&&(m=t.gdprConsent.gdprApplies,i=c(i,"gdpr",m.toString())),void 0!==t.gdprConsent.consentString&&(h=t.gdprConsent.consentString,i=c(i,"cmp_cs",h))),t&&t.uspConsent&&(i=c(i,"us_privacy",t.uspConsent)),(i=!0===f.getConfig("coppa")?c(i,"coppa",!0):i).lastIndexOf("&")===i.length-1&&(i=i.substring(0,i.length-1)),u("tlCall request built: "+i),{method:"POST",url:i,data:r,bidderRequest:t}},interpretResponse:function(e,t){var i=t.bidderRequest;return(e.body.bids||[]).map(function(e){return function(e,t){var i={},r=t.width||1,n=t.height||1,o=t.deal_id||"",a=t.crid||"",e=e.bids[t.imp_id];0!=t.cpm&&t.ad&&(i={requestId:e.bidId,cpm:t.cpm,width:r,height:n,netRevenue:!0,ad:t.ad,creativeId:a,dealId:o,currency:"USD",ttl:300,tl_source:t.tl_source,meta:{}},b(e)&&(i.vastXml=t.ad,i.mediaType="video",i.ttl=3600),t.advertiser_name&&(i.meta.advertiserName=t.advertiser_name),t.adomain&&t.adomain.length&&(i.meta.advertiserDomains=t.adomain),t.tl_source&&"hdx"==t.tl_source&&(i.meta.mediaType="banner"),t.tl_source&&"tlx"==t.tl_source&&(i.meta.mediaType="native"));return i}(i,e)})},getUserSyncs:function(e,t,i,r){var n=function(e){if(e)return e.iframeEnabled?"iframe":e.pixelEnabled?"image":void 0}(e);if(n){e="https://eb2.3lift.com/sync?";return"image"===n&&(e=c(e,"px",1),e=c(e,"src","prebid")),null!==h&&(e=c(e,"gdpr",m),e=c(e,"cmp_cs",h)),[{type:n,url:e=r?c(e,"us_privacy",r):e}]}}};function b(e){return e.mediaTypes.video&&(e.mediaTypes.video.context&&"instream"===e.mediaTypes.video.context.toLowerCase())}function v(t,i){p(i)||Object.keys(i).forEach(function(e){null!=i[e]&&(t[e]=i[e])})}function y(e,t,i,r){return e.map((a=t,function(e){return e&&e.userId&&e.userId[a]})).filter(function(e){return!!e}).map((n=i,o=r,function(e){return{source:n,uids:[{id:e,ext:{rtiPartner:o}}]}}));var n,o,a}function _(e){return 2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]}t.exports=e("../shim.js").wrap({spec:g,unitIDKey:"inventoryCode",floorKey:"floor",floorStr:!1,uspSupport:!0,gdprSupport:!0})},{"../shim.js":33}],13:[function(e,t,i){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=e("../shim.js").polyfills,o=n.isNumber,a=n.isStr,s=n.isInteger,c=n.isBoolean,u=n.isArray,p=n.isEmpty,l=n.isArrayOfNums,d=n.getWindowTop,g=n.parseQueryStringParameters,f=n.parseUrl,m=n.deepSetValue,h=n.deepAccess,b=n.logError,v=n.BANNER,y=n.VIDEO,_=(n.registerBidder,n.Renderer),w=n.includes,x=n.find,S=n.createEidsArray,I="USD",A="https://ads.yieldmo.com/exchange/prebid",k=["mimes","startdelay","placement","startdelay","skipafter","protocols","api","playbackmethod","maxduration","minduration","pos","skip","skippable"],z=["name","domain","cat","keywords"],E=d(),j=2,T=0,C=["description","title","pr","page_url"],d={code:"yieldmo",supportedMediaTypes:[v,y],isBidRequestValid:function(e){return!!(e&&e.adUnitCode&&e.bidId&&(O(e)||R(e))&&function(d){if(!R(d))return!0;function i(e,t,i){throw e='"'.concat(e,'" is required'),i&&(e+=" when "+i),new Error(e)}function e(e,t,i){throw i=i?", expected: "+i:"",t=JSON.stringify(t),new Error('"'.concat(e,'"=').concat(t," is invalid").concat(i))}function t(e){return void 0!==e}function r(e,t,i,r){if(0!==e.indexOf("video"))return s=h(d,e),t(s)||i(e,s,r),s;var n="params."+e,o="mediaTypes."+e,a=h(d,n),s=h(d,o),e=t(a),t=t(s);return e?a:t||(e?t||i(o,s,r):i(n,a,r),a||s)}try{r("video.context",function(e){return!p(e)},i),r("params.placementId",function(e){return!p(e)},i),r("video.playerSize",function(e){return l(e,2)||u(e)&&e.every(function(e){return l(e,2)})},e,"array of 2 integers, ex: [640,480] or [[640,480]]"),r("video.mimes",t,i),r("video.mimes",function(e){return u(e)&&e.every(function(e){return a(e)})},e,'array of strings, ex: ["video/mp4"]');var n=r("video.placement",t,i);return r("video.placement",function(e){return 1<=e&&e<=5},e),1===n&&(r("video.startdelay",t,function(e,t){return i(e,0,"placement == 1"),0}),r("video.startdelay",function(e){return o(e)},e,"number, ex: 5")),r("video.protocols",t,i),r("video.protocols",function(e){return l(e)&&e.every(function(e){return 1<=e&&e<=6})},e,"array of numbers, ex: [2,3]"),r("video.api",t,i),r("video.api",function(e){return l(e)&&e.every(function(e){return 1<=e&&e<=6})},e,"array of numbers, ex: [2,3]"),r("video.playbackmethod",function(e){return!t(e)||l(e)},e,"array of integers, ex: [2,6]"),r("video.maxduration",t,i),r("video.maxduration",function(e){return s(e)},e),r("video.minduration",function(e){return!t(e)||o(e)},e),r("video.skippable",function(e){return!t(e)||c(e)},e),r("video.skipafter",function(e){return!t(e)||o(e)},e),r("video.pos",function(e){return!t(e)||o(e)},e),r("params.badv",function(e){return!t(e)||u(e)},e,'array of strings, ex: ["ford.com","pepsi.com"]'),r("params.bcat",function(e){return!t(e)||u(e)},e,'array of strings, ex: ["IAB1-5","IAB1-6"]'),!0}catch(e){return b(e.message),!1}}(e))},buildRequests:function(e,t){var i=e.filter(O),r=e.filter(R),n=[],o=function(e){if(h(e,"userId"))return S(e.userId)||[]}(e[0])||[];if(0<i.length){var a={pbav:"5.18.0-pre",p:[],page_url:t.refererInfo.referer,bust:(new Date).getTime().toString(),pr:E.document&&E.document.referrer||"",scrd:E.devicePixelRatio||0,dnt:"1"===window.doNotTrack||"1"===window.navigator.doNotTrack||!1,description:document.querySelector('meta[name="description"]')&&document.querySelector('meta[name="description"]').getAttribute("content")||"",title:E.document.title||"",w:E.innerWidth,h:E.innerHeight,userConsent:JSON.stringify({gdprApplies:h(t,"gdprConsent.gdprApplies")||"",cmp:h(t,"gdprConsent.consentString")||""}),us_privacy:h(t,"uspConsent")||""},e=window.navigator.maxTouchPoints;e&&(a.mtp=e),i.forEach(function(e){a.p.push(function(e){var t=h(e,"ortb2Imp.ext.data.pbadslot"),i={placement_id:e.adUnitCode,callback_id:e.bidId,sizes:e.mediaTypes.banner.sizes};e.params&&(e.params.placementId&&(i.ym_placement_id=e.params.placementId),(e=P(e,v))&&(i.bidFloor=e));t&&(i.gpid=t);return JSON.stringify(i)}(e));var t=B(e,"pubcid");t?a.pubcid=t:e.crumbs&&e.crumbs.pubcid&&(a.pubcid=e.crumbs.pubcid);t=B(e,"tdid");t&&(a.tdid=t);t=B(e,"criteoId");t&&(a.cri_prebid=t),e.schain&&(a.schain=JSON.stringify(e.schain)),h(e,"params.lr_env")&&(a.ats_envelope=e.params.lr_env)}),a.p="["+a.p.toString()+"]",o.length&&(a.eids=JSON.stringify(o));var s="".concat(A,"?").concat(g(a)).length-8e3;if(0<s)for(var d=0;d<C.length&&!((s=function(e,t,i){if(t[i].length>e)return t[i]=t[i].substring(0,t[i].length-e),0;e-=t[i].length;return t[i]="",e}(s,a,C[d]))<=0);d++);n.push({method:"GET",url:A,data:a})}return 0<r.length&&(t=function(e,t){var i=e[0].schain,e={id:e[0].bidderRequestId,at:1,imp:e.map(function(e){var t=h(e,"ortb2Imp.ext.data.pbadslot"),i=function(e){e=h(e,"mediaTypes.video.playerSize");{if(l(e,2))return e;if(u(e)&&l(e[0],2))return e[0]}return null}(e),r={id:e.bidId,tagid:e.adUnitCode,bidfloor:P(e,y),ext:{placement_id:e.params.placementId},video:{w:i[0],h:i[1],linearity:1}},n=h(e,"mediaTypes.video");Object.keys(n).filter(function(e){return w(k,e)}).forEach(function(e){return r.video[e]=n[e]});var o=h(e,"params.video");Object.keys(o).filter(function(e){return w(k,e)}).forEach(function(e){return r.video[e]=o[e]}),r.video.skippable&&(r.video.skip=1,delete r.video.skippable);1!==r.video.placement&&(r.video.startdelay=T,r.video.playbackmethod=[j]);t&&(r.ext.gpid=t);return r}),site:function(e,t){var i={},t=f(h(t,"refererInfo.referer"));p(t)||(i.page="".concat(t.protocol,"://").concat(t.hostname).concat(t.pathname));self===top&&document.referrer&&(i.ref=document.referrer);t=document.getElementsByTagName("meta").keywords;t&&t.content&&(i.keywords=t.content);var r=h(e,"params.site");r&&Object.keys(r).filter(function(e){return w(z,e)}).forEach(function(e){return i[e]=r[e]});return i}(e[0],t),device:(e[0],{ua:navigator.userAgent,language:navigator.language||navigator.browserLanguage||navigator.userLanguage||navigator.systemLanguage}),badv:e[0].params.badv||[],bcat:e[0].params.bcat||[],ext:{prebid:"5.18.0-pre"},ats_envelope:e[0].params.lr_env};i&&(e.schain=i);return function(e,t){var i=t.gdprConsent;i&&"gdprApplies"in i&&(m(e,"regs.ext.gdpr",i.gdprApplies?1:0),m(e,"user.ext.consent",i.consentString));t=h(t,"uspConsent");t&&m(e,"regs.ext.us_privacy",t)}(e,t),e}(r,t),o.length&&(t.user={eids:o}),n.push({method:"POST",url:"https://ads.yieldmo.com/exchange/prebidvideo",data:t})),n},interpretResponse:function(e,t){var i=[],e=e.body;return 0<e.length&&e.forEach(function(e){0<e.cpm&&i.push({requestId:e.callback_id,cpm:e.cpm,width:e.width,height:e.height,creativeId:e.creative_id,currency:I,netRevenue:!0,ttl:300,ad:e.ad,meta:{advertiserDomains:e.adomain||[],mediaType:v}})}),e.seatbid&&e.seatbid.reduce(function(e,t){return e.concat(t.bid)},[]).forEach(function(e){return i.push(function(t,e){var i=x(h(e,"data.imp")||[],function(e){return e.id===t.impid}),e={requestId:i.id,cpm:t.price,width:i.video.w,height:i.video.h,creativeId:t.crid||t.adid,currency:I,netRevenue:!0,mediaType:y,ttl:300,vastXml:t.adm,meta:{advertiserDomains:t.adomain||[],mediaType:y}};i.video.placement&&1!==i.video.placement&&((i=_.install({url:"https://prebid-outstream.yieldmo.com/bundle.js",config:{width:e.width,height:e.height,vastTimeout:15e3,maxAllowedVastTagRedirects:5,allowVpaid:!0,autoPlay:!0,preload:!0,mute:!0},id:i.tagid,loaded:!1})).setRender(function(i){i.renderer.push(function(){var e=i.renderer,t=e.id,e=e.config;window.YMoutstreamPlayer(i,t,e)})}),e.renderer=i);return e}(e,t))}),i},getUserSyncs:function(){return[]}};function O(e){return!!h(e,"mediaTypes.banner")}function R(e){return!!h(e,"mediaTypes.video")}function B(e,t){return"object"===r(h(e,"userId"))?e.userId[t]:void 0}function P(e,t){var i={};return(i="function"==typeof e.getFloor?e.getFloor({currency:I,mediaType:t,size:"*"}):i).floor||e.params.bidfloor||e.params.bidFloor||0}t.exports=e("../shim.js").wrap({spec:d,unitIDKey:"placementId",floorKey:"bidFloor",floorStr:!1,uspSupport:!0,gdprSupport:!0})},{"../shim.js":33}],14:[function(e,t,i){var o=e("./utils.js");t.exports=o.wrapAsync(function(i,r){var n,e=!1,t=i.method||(i.data?"POST":"GET");window.XMLHttpRequest?(n=new window.XMLHttpRequest).onreadystatechange=o.wrapAsync(function(){if(4===n.readyState){var e=n.status;if(200<=e&&e<300||304===e){if(i.rawProcessor)try{i.rawProcessor(n)}catch(e){o.err("AjaxRawProcFail",e)}if(i.parseResponseJson)try{var t=JSON.parse(n.responseText||"null");r(null,t,n)}catch(e){r({err:e,type:"parse"},"",n)}else r(null,n.responseText,n)}else r(0===e?{err:"",type:"timeout"}:{err:n.statusText,type:"status="+e},"",n)}}):(e=!0,(n=new window.XDomainRequest).onload=o.wrapAsync(function(){if(i.rawProcessor)try{i.rawProcessor(n)}catch(e){o.err("AjaxRawProcFail",e)}if(i.parseResponseJson)try{var e=JSON.parse(n.responseText||"null");r(null,e,n)}catch(e){r({err:e,type:"parse"},"",n)}else r(null,n.responseText,n)}),n.onerror=o.wrapAsync(function(e){r({err:e,type:"error"},"",n)}),n.ontimeout=o.wrapAsync(function(e){r({err:e,type:"timeout"},"",n)}),n.onprogress=function(){}),n.open(t,i.url),0!==i.max_ms&&(n.timeout=i.max_ms||3e3,o.logl("at","Ajax >",i.url,n.timeout)),e||(i.withCredentials&&(n.withCredentials=!0),o.each(i.headers,function(e,t){n.setRequestHeader(t,e)}),i.preflight&&n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.setRequestHeader("Content-Type",i.contentType||"text/plain")),n.send("POST"===t&&i.data)})},{"./utils.js":35}],15:[function(e,t,s){function r(){for(var e="",t=0;t<10;++t)e+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".charAt(Math.floor(62*Math.random()));return e}var l=e("./utils.js"),d=e("./config.js"),c=3,g={USD:1,EUR:2},f={banner:1,native:2,video:3},n=r(),o="aX0";s.id=[2,o,n].join(",");var u="";d.afterConsent(function(e,t,i){try{u=(window.__tcfapi?"2":window.__cmp?"1":"0")+(window.__uspapi?"1":"0")+i,e&&(u+=".g"+(e.gdprApplies?"Y":"N")+(e.consentString||"")),t&&(u+=".u"+(t.version||0)+(t.uspString||""))}catch(e){l.err("ClogErr",e)}e&&e.gdprApplies||(o=(o=String((document.cookie.match(/_adb=([^;]+)/)||[""]).pop()))||"a2"+(new Date).getTime().toString(36)+r(),l.cw("_adb",o,365),s.id=[2,o,n].join(","))});function p(e,t,i,r,n){m[e]||(m[e]=[]),m[e].push(n),h[e]=r,b[e]||(b[e]=setTimeout(function(){a(e,t)},i))}function a(e,t){var i,r;clearTimeout(b[e]),b[e]=!1,m[e]&&m[e].length&&(i=h[e],r=e===c?"1//"+m[e].length+i:"",r+=m[e].join(i),m[e]=[],_(e,t,r))}var m={},h={},b={};s.flushNow=function(){for(var e in m)a(e)};function v(e,t){return w(e)+"`"+w(t)}function y(e){var t=[];return l.each(e,function(e){e=e.split("x");2==e.length&&t.push(v(e[0],e[1]))}),t.join(".")}var _=function(e,t,i){if(document.body){var r=s.id,n=function(){if(!m[c]||!m[c].length)return"";var e=m[c].join("&e=");return m[c]=[],e}(),o=l.vp(),a="https://adspsp.com/pt/"+d.getId()+"/"+e+"/"+t+"/?a="+r+"&aa="+u+"&b="+i+"&e="+n+"&c="+encodeURIComponent(l.url().href)+"&d="+encodeURIComponent(l.url().referrer)+"&f="+l.pgts().join(".")+"&g="+l.perfts()+"&u=5eec30b4:kuojee3b:29d&v="+w(o.w)+"."+w(o.h)+"."+w(o.y)+"."+w(document.body.clientHeight),o=x();for(o&&(a+="&m="+o),a=d.deca(a),l.each(S,function(e,t){l.isarr(e)||(e=[e]),l.each(e,function(e){a+="&"+t+"="+encodeURIComponent(e)})});I.length;)delete S[I.pop()];l.each(A,function(e,t){a+="&"+t+"="+encodeURIComponent(e)}),A={},a+=D(),l.pixel(a,!0)}else setTimeout(function(){_(e,t,i)},50)},w=function(e){return(parseInt(e,10)||0).toString(36)},i=[];s.mod=function(e){-1===i.indexOf(e)&&i.push(e)};var x=function(){return i.length?i.join(""):""},S={};s.meta=l.thread(function(e,t){S[e]=t});var I=[];s.metaqx=l.thread(function(e,t){-1==I.indexOf(e)&&I.push(e),S[e]?l.isarr(S[e])||(S[e]=[S[e]]):S[e]=[],S[e].push(t)});var A={};s.ctr=l.thread(function(e,t){(t=void 0===t?1:t)&&(A[e]=(A[e]||0)+t)}),s.auctionConfigured=l.thread(function(e){var r=[];e.eachUnit(function(e){var i=[],t=y(e.all_sizes);e.eachBidReqConf(function(e){var t,t=e.bidder_id+"@"+(t=e.bidder_unit_id,String(t).replace(/[^\d\w-]/,"")),e=y(e.all_sizes);i.push(t+"^"+e)}),r.push(e.id+"^"+t+":"+i.join(","))});var i=e.instancectr+"//"+r.length+"-"+r.join("_");e.eachUnit(function(e){var t=T("auctionConfigured",e);i+="&bu="+[e.unique_id,encodeURIComponent(t.dom_id),encodeURIComponent(t.gpt_path)].join(",")}),_(1,2,i)});function k(e,r){var n="";return e.rawbid&&e.rawbid.meta&&(n=[],l.each(e.rawbid.meta,function(e,t){var i=j[String(t).toLowerCase()];i&&(l.isarr(e)||(e=[e]),l.each(e,function(e){n.push(i+r.id(e))}))}),n=n.join(".")),n}function z(e,t){var i=e._origin?t.id(e._origin.config.unit.unique_id):"";i?(c=(l.dts()-e.ts)/1e3,u=0|Math.max(0,e.extras.ttl-c),i+="@"+l.b62(u)):i=l.b62(0|e.ms);var r,n,o,a,s,d,c,u,p=[i];return(e._bid_cpm||e.extras.dealid)&&(r=t.id(e.width+"x"+e.height),n=l.b62(e.extras.ttl),o=g[e.extras.cur]||(e.extras.cur?t.id(e.extras.cur):""),a=e.extras.nr?1:0,s=f[e.extras.mediaType]||0,d=e.extras.crid!==e.config.id?t.id(e.extras.crid):"",c=e.extras.dealid?t.id(e.extras.dealid):"",u=e.cpm,i=k(e,t),p=p.concat([r,n,o,a,s,d,c,u,i]),e._bid_cpm!=e.cpm&&(p.push(e._bid_cpm),p.push(e._min_cpm),e.blocked&&p.push(t.id(e.blocked)))),p.join(",")}function E(){this.reset()}var j={advertisername:"0",advertiserdomains:"1",adomain:"1",advertiserid:"2",buyerid:"3",networkid:"4",brandid:"5",brandname:"6",dspid:"7",primarycatid:"8"},T=function(t,e){var i="",r="";try{i=e.get("dom_id").replace(/[:,]+/g,""),r=e.get("gpt_slot").getAdUnitPath().replace(/[:,]+/g,"")}catch(e){l.log(t,"failed to encode ids",e)}return{dom_id:i,gpt_path:r}};E.prototype.reset=function(){this.ids={},this.data=[],this.length=0},E.prototype.id=function(e){var t;return e=String(e).replace(/,/,"_"),this.ids[e]||(t=encodeURIComponent(e),this.length+=t.length,this.ids[e]=l.b62(this.data.push(t)-1)),this.ids[e]},s.auctionCompleted=l.thread(function(t){var a=new E,i=[],r=0;t.eachUnit(function(n){var e=T("bidRendered",n),e=[a.id(t.instancectr),a.id(t.id),a.id(n.id),a.id(n.unique_id),a.id(e.dom_id),a.id(e.gpt_path)].join(","),o=[];n.eachBidReqConf(!1,function(e){var r=a.id(e.bidder_id)+","+a.id(e.bidder_unit_id);e.responses.length?l.each(e.responses,function(e){var t=n.getWinner()===e?1:"",i=r,e=z(e,a);e&&(i+=","+t+","+e),o.push(i)}):o.push(r)}),encoded_unit=e+":"+o.join(":"),r+=encoded_unit.length,i.push(encoded_unit),3e3<r+a.length&&(_(11,3,i.join("&b=")+"&bi="+a.data.join(",")),a.reset(),i=[],r=0)}),r&&_(11,3,i.join("&b=")+"&bi="+a.data.join(","))}),s.bidRendered=l.thread(function(e,t,i){var r=T("bidRendered",e.config.unit),n=[e.config.unit.auction.instancectr,e.config.unit.id];n.push(e.config.bidder_id),n.push(e.config.bidder_unit_id),n.push(e.cpm),n.push(e.width),n.push(e.height),n.push(e.config.unit.unique_id),n.push(t),n.push(encodeURIComponent(r.dom_id)),n.push(encodeURIComponent(r.gpt_path));t=new E,r=k(e,t),t=t.data;r&&(e.extras.anfo=r,e.extras.anfd=t);t=JSON.stringify(e.extras);"{}"!=t&&n.push(encodeURIComponent(t));n=(i?5:1)+":"+n.join(",");d.libSettings().record_bidids&&(n+="&b=4:"+[e.config.unit.unique_id,e.config.unit.id,e.id].join(",")),p(12,2,100,"&b=",n)}),s.enhRendered=l.thread(function(e,t,i){i=[e,t,w(i.advertiserId),w(i.campaignId),w(i.creativeId),w(i.versionId)];p(12,1,100,"&b=","3:"+i.join(","))}),s.gptRendered=l.thread(function(e,t,i){var r=T("gptRendered",t);p(12,2,100,"&b=","2:"+[e.instancectr,t.id,w(i.advertiserId),w(i.campaignId),w(i.creativeId),i.isEmpty||"",w(i.lineItemId),i.size?v(i.size[0],i.size[1]):"",w(i.sourceAgnosticCreativeId),w(i.sourceAgnosticLineItemId),t.unique_id,encodeURIComponent(r.dom_id),encodeURIComponent(r.gpt_path)].join(","))}),s.gptViewed=l.thread(function(e,t,i){var r=T("gptViewed",t);p(15,2,100,"&b=","1:"+[e.instancectr,t.id,t.unique_id,encodeURIComponent(r.dom_id),encodeURIComponent(r.gpt_path)].join(","))});function C(){var e,i,r;clearTimeout(O),O=!1,R?O=setTimeout(C,100):(e=P,P={},R=B,B=new E,i=[],r=0,l.each(e,function(e,t){e=t+":"+e.join(":");r+=e.length,i.push(e),3e3<r+R.length&&(_(13,3,i.join("&b=")+"&bi="+R.data.join(",")),i=[],r=0)}),r&&_(13,3,i.join("&b=")+"&bi="+R.data.join(",")),R=!1)}var O,R,B=new E,P={};s.lateBid=l.thread(function(e){var t=T("lateBid",e.config.unit),t=[B.id(e.config.unit.auction.instancectr),B.id(e.config.unit.auction.id),B.id(e.config.unit.id),B.id(e.config.unit.unique_id),B.id(t.dom_id),B.id(t.gpt_path)].join(","),e=[B.id(e.config.bidder_id),B.id(e.config.bidder_unit_id),"",z(e,B)].join(",");P[t]||(P[t]=[]),P[t].push(e),O=O||setTimeout(C,500)}),l.onerr(function(){try{var t="";l.each(arguments,function(e){null!=e&&("object"==typeof e?e=e.stack?(e.message||"")+" "+e.stack:JSON.stringify(e):"string"!=typeof e&&"number"!=typeof e&&(e=e.toString?e.toString():String(e)),t+=" "+e)}),t=t.substr(0,300)+(300<t.length?"...":""),t="500.1:"+l.perfts()+":"+t,p(c,1,1e3,"&e=",t)}catch(e){l.isdebug()&&console.error("AdBridg error report failed: ",e)}}),s.rec=l.thread(function(e){p(17,1,500,"&b=",e)}),l.onrec(s.rec);var U={};s.sqz=l.thread(function(e,t,i,r,n){var o,a=t+"."+r;U[a]||(U[a]={qk:t,qd:r,s:!1,d:[]},t&&(U[a].s=new E)),!1===t?U[a].d.push(n):(l.isarr(i)||(i=[i]),o=[],l.each(i,function(e){o.push(U[a].s.id(e))}),o=o.join(","),U[a].d.push(o+":"+n)),p(18,1,e,"","")});var D=function(){var e=U;U={},m[18]=[];var i="";return l.each(e,function(t,e){t.qk&&(i+="&"+t.qk+"="+t.s.data.join(",")),l.each(t.d,function(e){i+="&"+t.qd+"="+e})}),i};s.init=l.thread(function(){p(19,1,100,"","")})},{"./config.js":17,"./utils.js":35}],16:[function(e,t,i){var h=e("./utils"),b=(e("./unit"),e("./analytics")),v=e("./modules"),y=e("./config"),_=0;t.exports=function(){var r,n;this.instancectr=++_,this.id=h.genID("A"),this.uuid=h.genUUID(),this.ts=0,this.jsts=0,this.jstsend,this.max_ms,y.afterConsent(function(e,t){r=e,n=t}),this.ajax_ms=y.libSettings().ajax_ms,"function"==typeof this.ajax_ms&&(this.ajax_ms=this.ajax_ms());var d,o=this,a={},s=[],c=[],u=[],p=!1,l=[],g=!1,f=[];this.addUnit=function(e){return c.push(e),u.push(e.alias),e.auction=o,e.eachBidder(function(e,t){!t.uspSupport&&n&&"Y"===n.uspString[2]||a[e]||(a[e]=t,.5<Math.random()?s.push(e):s.unshift(e))}),o.max_ms=o.max_ms?Math.min(o.max_ms,e.max_ms):e.max_ms,(!o.ajax_ms||o.ajax_ms<o.max_ms)&&(o.ajax_ms=o.max_ms+200),o},this.ctUnits=function(){return c.length},this.hasUnit=function(){return 0<c.length},this.eachUnit=function(e){h.each(c,e)},this.findUnit=function(e){for(var t=0;t<c.length;++t)if(e(c[t]))return c[t];return!1},this.eachBidRequest=function(e,i){"function"==typeof e&&(i=e,e=!1),this.eachUnit(function(t){t.eachBidReqConf(e,function(e){i(t,e)})})},this.getUnitByBidReqId=function(t){var i=!1;return o.eachUnit(function(e){e.getBidReqConf(t)&&(i=e)}),i},this.getBidRequest=function(t){var i=!1;return o.eachUnit(function(e){i=i||e.getBidReqConf(t)}),i},this.getBid=function(e){for(var t=0;t<c.length;++t){var i=c[t].getBid(e);if(i)return i}return!1},this.markBidEmpty=function(e){var t=o.getUnitByBidReqId(e);t?t.addEmptyBid(e):h.err("Cannot mark bid empty: unknown id",e)},this.markBidderEmpty=function(t){o.eachUnit(function(e){e.markEmpty(t)})},this.isDone=function(){return p},this.lock=function(e){-1==l.indexOf(e)&&(h.log("Auction ",o.id," locked: ",e),l.push(e))},this.unlock=h.wrapAsync(function(e){var t=l.indexOf(e);-1!=t?(l.splice(t,1),h.log("Auction ",o.id," unlocked: ",e,l),!l.length&&g&&g()):h.log("Auction ",o.id," lock not found: ",e)}),this.onHalt=function(e){f.push(e)},this.execute=function(e){o.ts=h.dts(),o.jsts=(new Date).getTime();var t=y.libSettings().fbo;"function"==typeof t&&(s=t(a)),d="started",v.trigger("auction.before_bids",o),h.log("Auction",o.id,"starting with",c.length,"units:",u,"/ bidders:",s,"/ timeout:",o.max_ms),d="inProgress",b.auctionConfigured(o),v.trigger("auction.start",o);var i=h.wrapAsync(function(){p||(p=!0,v.trigger("auction.bidding_done",o),o.eachUnit(function(e){e.halt()}),d="completed",o.jstsend=(new Date).getTime(),b.auctionCompleted(o),v.trigger("auction.complete",o),h.each(f,function(e){h.thread(e)()}),e(o))}),r=h.wrapAsync(function(){return l.length?(h.log("Auction ",o.id,"waiting on locks",l),void(g=i)):void i()}),n=0;o.eachUnit(function(e){e.onReady(h.wrapAsync(function(){p||++n>=c.length&&(h.log("Auction ",o.id," received bids for ",n," / ",c.length," units. Duration: ",h.dts()-o.ts,"ms"),r())}))}),h.each(s,function(e){var t=a[e];h.thread(function(){t.execute(o)})()}),setTimeout(function(){p||(h.log("Auction ",o.id," timing out with ",n," / ",c.length," units completed. Duration: ",h.dts()-o.ts,"ms"),r())},o.max_ms)};var t=[],m={};this.getBdrReqId=function(e){return t[e]||(t[e]=h.genID("R")),t[e]},this.toPrebidBidderReq=function(e){var i,t;return m[e]||(a[e],i=[],this.eachBidRequest(e,function(e,t){i.push(t.toPrebid())}),t={referer:h.url().href,stack:[h.url().href],reachedTop:window.top===window,numIframes:0|!(window.top===window)},m[e]={auctionId:this.uuid,auctionStart:this.jsts,bidderCode:e,bidderRequestId:this.getBdrReqId(e),bids:i,gdprConsent:r,uspConsent:(n||{}).uspString,timeout:this.max_ms,refererInfo:t}),m[e]},this.toPrebidBidderReqs=function(){var i=[];return h.each(a,function(e,t){i.push(this.toPrebidBidderReq(t))}.bind(this)),i},this.toPrebid=function(){var e=this.toPrebidBidderReqs(),i=[],r=[],n=[],o=[],a=[],s=[];return this.eachUnit(function(e){var t=e.toPrebidAdUnit();i.push(t),r.push(t.code);e=e.toPrebidResults();n=n.concat(e.noBids),o=o.concat(e.bidsReceived),a=a.concat(e.winningBids),s=s.concat(e.prebidWinningBids)}),{auctionId:this.uuid,timestamp:this.jsts,auctionEnd:this.jstsend,auctionStatus:d,adUnits:i,adUnitCodes:r,labels:void 0,bidderRequests:e,noBids:n,bidsReceived:o,winningBids:a,timeout:this.max_ms,prebidWinningBids:s}}}},{"./analytics":15,"./config":17,"./modules":21,"./unit":34,"./utils":35}],17:[function(d,e,t){function c(e,t,i){var r=t.mapping_rules;if(r){var n,o=e.get("gpt_slot"),a=o.getAdUnitPath(),s=e.get("gpt_sizes"),d=e.get("dom_id"),c=e.get("dom_ad_class");for(n in r){if(!r.hasOwnProperty(n))return;var u=r[n],p=Math.max(document.documentElement.clientWidth,window.innerWidth||0);if("vp.max_width"==n&&u<p)return;if("vp.min_width"==n&&p<u)return;if("lib"==n.substr(0,3)){p=i[n.substr(4)];if(("function"==typeof p&&p(o,a,s,d))!=u)return}if("gpt.adunit"==n&&u!=a)return;if("gpt.adunit_regex"==n&&!new RegExp(u,"i").test(a))return;if("gpt.domid"==n&&u!=d)return;if("gpt.domid_regex"==n&&!new RegExp(u,"i").test(d))return;if("gpt.has_size"==n&&!s.match(u))return;if("gpt.no_size"==n&&s.match(u))return;if("adb.ad_class"==n&&u!=c)return;if("adb.ad_class_regex"==n&&!new RegExp(u,"i").test(c))return}return l.log("Unit mapped: ",d,"->",t.alias),1}}function u(e,t){return{id:t[0],alias:t[1],size:t[2],other_sizes:t[3]||[],min_cpm:t[4],max_ms:t[5],settings:t[6]||{},rule_order:t[7],mapping_rules:t[8],bid_req_confs:t[9]}}var l=d("./utils"),p=(d("./ajax"),{c:5781260,s:{bid_strategy:".05:.05-7.5,.5:8-20,1:21-40,2:42-50",block_invisible:function(e,t,i){return!!(l.url().domain.match("genealogy")&&l.vp().w<=767)||!!i.match(/anc.*display_none/)},lazy:function(e,t,i){return!(t&&t.getAdUnitPath&&t.getAdUnitPath()||"").match("fg_728x90_search")&&400},initfn:function(){l.url().href.match("search")&&(l.log("Suppressing rate limiting errors for search 728x90"),l.wraperr(function(e){return!(e[2]&&e[2].message&&e[2].message.match("slot.defineSizeMapping"))&&e}));var e;l.url().domain.match("findagrave")&&!l.cr("contributorId")&&!l.url().page.match("create|upload-spreadsheet|edit|memorial/merge|photo-request|transcribe|user/account|memorial/transfer-management")&&Math.random()<.5&&(l.log("FG adhesion conditions met"),e=function(){var e={memorial:"Memorials/fg_728x90_mem_bottom",famous:"Famous/fg_728x90_famebottom",cemetery:"Cemetery/fg_728x90_cem_top",contribute:"fg_728x90_bottom"},t=new RegExp(Object.keys(e).join("|")),i=l.url().page.match(t);if(i){var r=i[0],n=e[r];if(l.qs("force_adhesion"))return AdBridg.global("enableAdhesion",!0),n;if(r.match("memorial")){l.log("Frequency capping on adhesion active"),AdBridg.global("adbFrequencyCap",!0);t="adb_adhesion",i="adb_ts",e=l.cr(i),r=parseInt(l.cr(t));return e?3<r?24<(Date.now()-e)/1e3/60/60?(l.log("Adhesion frequency cap expired"),AdBridg.global("enableAdhesion",!0),l.cw(t,1),l.cw(i,Date.now()),n):(l.log("Adhesion frequency cap reached"),AdBridg.global("enableAdhesion",!1)):(l.log("Adhesion frequency cap updated"),AdBridg.global("enableAdhesion",!0),l.cw(t,r+1),n):(l.log("Adhesion frequency cap created"),AdBridg.global("enableAdhesion",!0),l.cw(t,1),l.cw(i,Date.now()),n)}return l.log("Adhesion active"),AdBridg.global("enableAdhesion",!0),n}return l.log("Adhesion not active"),AdBridg.global("enableAdhesion",!1)}());var t=l.vp().w<768,i=l.url().domain.match("rootsweb");AdBridg.cmd.push({action:"spa_pv_initialize",config:{sizePathNameLeaderboard:t?"320x50":"728x90",fameSpelling:t?"fame":"fam",hpPathBottom:t?"_bottom":"",rwgen_bottomSlotPath:i?"tgn.rootsweb.com/RW_728x90_btf":"tgn.genealogy.com/728x90_bottom",rwgen_bottomRightSlotPath:i?"tgn.rootsweb.com/RW_300x250":"tgn.genealogy.com/300x250_ROS",rwgen_rightSlotPath:i?"tgn.rootsweb.com/RW_160x600":"tgn.genealogy.com/160x600_ROS",rwgen_topSlotPath:i?"tgn.rootsweb.com/RW_728x90":"tgn.genealogy.com/728x90_ROS",adhesionGAMPath:e||""}})},dynamic_configuration:function(e,t,i){return l.qs("adb_run_insticator")&&(l.log("No auctions running for insticator test page"),i.get("gpt_slot").setTargeting("adb_imp",["inst"]),e.bid_req_confs=[]),e},gpt_exclusions:{Exclude_Any_AdBridg_Bid:.01,Exclude_HighValue_AdBridg_Bids:.5,Exclude_HighValue_Amazon_Bids:function(e){var t=(e.getTargeting("amznbid")||[""])[0];if(t&&"2"!==t){if(t=" "+parseInt(t,36)/8192+" ",!AdBridg.global("ancamhv")){for(var i="01234563272163812942286334a266635a361239a63337233633211262286345327663635a126694333aa23368361234b1261c46de36364a2228fg3337hi34566ie35a123jh1263ik233214527ed6lh66335472ie36364561hi31112fg61233lh32hm65a3nd4a2622me9433633612381263723363276633612622863332766363612612336327663812622863312666363612o63337233638126228633327663636126663337233636361238126126663636123863337233663361238126p233632766",r="wb,oM,8g,gw,48,co,x2,Fi,Ny,sU,kE,Jq,Ba,mI,ak,es,iA,24,6c,Lu,z6,uY,De,qQ,144,VO".split(","),n=" ",o=0,a=0;a<i.length;++a){var s=l.fb62(i[a]);n+=(o+=l.fb62(r[s]))+" "}AdBridg.global("ancamhv",n)}var d=!!AdBridg.global("ancamhv").match(t);return l.log("Ancestry amazon hv",t,d),d&&((t=e.getTargeting("adb_imp")).push("el_amzn_hv"),e.setTargeting("adb_imp",t)),!!d}}},override_define:function(e,t,i){if(AdBridg.global("enableAdhesion")&&e.match("x600"))return(o=document.getElementById(i)).parentNode.className.match("fg-prad")&&(o.parentNode.style.display="none"),!(o.style.display="none");if(e&&e.match("fg_300x600"))return{dfp_sizes:[[300,600],[300,250],[160,600]]};if(e.match("fg_728x90_search")){var r=AdBridg.global("fg_inf_rate_limit")||0,n=AdBridg.global("fg_inf_rate_last_dts")||0,e=l.dts()-n;return(l.log("Rate limit search?",r,n,e),2<=r&&e<3e4)?!1:(r+=1,AdBridg.global("fg_inf_rate_limit",r),AdBridg.global("fg_inf_rate_last_dts",l.dts()),l.log("Rate limit allowed",r,n,e),{})}if(AdBridg.global("enableAdhesion")&&0<=["mem-ldr-footerspot","cem-ldr-footerspot","famous-ldr-footerspot","global-ldr-footerspot"].indexOf(i)){var o=document.getElementById(i);return document.body.style.marginBottom="45px",!(o.style.display="none")}},dt:function(){var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))?"m":/tablet|ipad/i.test(e)?"t":"d"},x1m:function(e,t,i){return"d"!=t.dt()&&(e.api="onemobile",e.dcn="2c9d2b4f016363008abc08dc05de0176",e.bidder_unit_id=i),e},cmd_override:function(e){if("function"==typeof e)try{if(e.toString().match("beginAuction"))return l.log("AncGamConfigConversion - disable beginAuction"),!1}catch(e){l.err("AncPubOverrideFail",e)}return e},before_gpt:function(){l.log("Requiring GPT Sandbox SafeFrames"),googletag.pubads().setSafeFrameConfig({sandbox:!0}),l.url().domain.match("findagrave")&&l.vp().w<728&&googletag.pubads().setCentering(!0)},track_imps:"1:1-12",max_imp_ctr:4,cmp:function(e,t){l.url().domain.match("findagrave")&&t("iab"),t("geoblock")},ccpa:"geoblock,USCA",ccpa_signatory:"Y",pmmutatefn:function(e,t){return t.a=e.config.id,t.b=e.config.bidder_name,t.c=e.cpm,t.w=e.width,t.h=e.height,t.cfd="clarium.global.ssl.fastly.net",t.cfid="MDm0g4ZhT4ICKskqdVRvwPd9wTw",t},pubrenderfn:function(e,t,i,r,n,o,a){if(a)return!1;return function(o,a,e,s,d){function c(e){return(r(e)||"")[n]("/","_")[n]("+","-")}var t=a.bidder,i=a.size,u=o.parentWindow||o.defaultView,p=u.JSON,r=u.btoa,l=u.encodeURIComponent;if(!p||!r)return!1;var g="script",f="src",n="replace",m="error",h="stringify",b="write",v="https://"+e+"/?wrapper="+l(s)+"&tpid=",y={k:{hb_bidder:[t],hb_size:[i]}};return function(){var e,t,i=c(s+"/"+y.k.hb_bidder[0]+":"+y.k.hb_size[0]),r={wh:i,wd:p.parse(p[h](y)),wr:0};n=i,e=c(p[h](r)),t=function(){o[b](a.ad)},n=v+l(n)+"&d="+e,e="err__"+ +new Date,u[e]=t,o[b]("<"+g+" on"+m+'="void('+e+'())" '+f+'="'+n+'" type="text/java'+g+'" ></'+g+">");var n={prebid:{adId:a.adId,cpm:a.cpm}},n={d:r,t:a.ad,cb:d,id:n};u[s]={},u[s][i]=n}(),o.close(),!0}(e,{size:o.width+"x"+o.height,bidder:o.config.bidder_name,ad:o.creative||o.creative_url,cpm:o.cpm,adId:o.config.id},"clarium.global.ssl.fastly.net","MDm0g4ZhT4ICKskqdVRvwPd9wTw",function(e,t,i,r,n,o){l.err("Confiant block",e,t,i,r,n,o)})}},u:{7:[7,"FindAGrave New 300x250","300x250",[],.2,3e3,0,0,{"gpt.adunit_regex":"FindAGraveNEW/fg_300x250_right"},[[2,"521832",{siteId:"110548"},0],[3,"Oldfg_300x250_righ",{size:"300x250"},0],[4,"538911241",0,0],[5,"11028238",0,0],[9,"378816",{size:"300x250"},0],[10,"198554",{size:"300x250"},0],[16,"107598",0,0],[18,"fg_300x250_right",0,0],[115,"findagrave_hb_300x250",{pos:"findagrave_hb_300x250",dcn:"8a96902c0173737e21138272ff6a0017"},0],[116,"421151152",0,0],[154,"dB6_QCbQir7lnyaKjGFx_2",0,0]]],8:[8,"FindAGrave_Connect_160x600","160x600",[],.2,3e3,0,0,{"gpt.adunit_regex":"FindAGrave/fg_160x600_left"},[[2,"521832",{siteId:"110548"},0],[3,"Oldfg_160x600_left",{size:"160x600"},0],[4,"538911243",0,0],[5,"11028226",0,0],[9,"378811",{size:"160x600"},0],[10,"198553",{size:"160x600"},0],[16,"107598",0,0],[18,"fg_HDX_ROS",0,0],[115,"aol_findagrave_memorials_160x600",{pos:"aol_findagrave_memorials_160x600",dcn:"8a9698ea0173737e1d8782771db3042c"},0],[116,"190131456",0,0]]],9:[9,"FindAGrave_Connect_Home_728x90","728x90",[],.2,3e3,0,0,{"gpt.adunit_regex":"FindAGrave/Home/fg_728x90_Home_ATF"},[[2,"521832",{siteId:"110548"},0],[3,"Oldfg_160x600_left",{size:"728x90"},0],[4,"538911244",0,0],[5,"11028261",0,0],[9,"378818",{size:"728x90"},0],[10,"198551",{size:"728x90"},0],[16,"107598",0,0],[18,"fg_search_desktop_728x90",0,0],[115,"findagrave_hb_728x90",{pos:"findagrave_hb_728x90",dcn:"8a96902c0173737e21138272ff6a0017"},0],[116,"555474821",0,0]]],10:[10,"FindAGrave_Connect_ATF_728x90","728x90",[],.2,3e3,0,0,{"gpt.adunit_regex":"FindAGrave/fg_728x90_atf"},[[2,"521832",{siteId:"110548"},0],[3,"Oldfg_728x90_atf",{size:"728x90"},0],[4,"538911244",0,0],[5,"11028261",0,0],[9,"378818",{size:"728x90"},0],[10,"198551",{size:"728x90"},0],[16,"107598",0,0],[18,"fg_728x90_top",0,0],[115,"findagrave_hb_728x90",{pos:"findagrave_hb_728x90",dcn:"8a96902c0173737e21138272ff6a0017"},0],[116,"142086141",0,0]]],11:[11,"FindAGrave_Connect_BTF_728x90","728x90",[],.2,3e3,0,0,{"gpt.adunit_regex":"FindAGrave/fg_728x90_btf"},[[2,"521832",{siteId:"110548"},0],[3,"Oldfg_728x90_btf",{size:"728x90"},0],[4,"538911245",0,0],[5,"11028268",0,0],[9,"325556",{size:"728x90"},0],[10,"198552",{size:"728x90"},0],[16,"107598",0,0],[18,"fg_728x90_bottom",0,0],[115,"findagrave_hb_728x90",{pos:"findagrave_hb_728x90",dcn:"8a96902c0173737e21138272ff6a0017"},0],[116,"528599236",0,0]]],14:[14,"Newspapers 300x250 3rdParty","300x250",[],.2,3e3,0,0,{"gpt.adunit_regex":"Newspapers/300x250_3rdparty"},[[2,"608996",{siteId:"128982"},0],[3,"NP_300x250",{size:"300x250"},0],[4,"538911246",0,0],[5,"11822498",0,0],[9,"432525",{size:"300x250"},0],[10,"242540",{size:"300x250"},0],[16,"108637",0,0],[18,"NP_ROS_HDX",0,0],[33,"yKSLd1HtssjOyY2zn9e9GpdP",0,0],[109,"2336438619096424790",0,0],[115,"newspapers_dt_300x250",{pos:"newspapers_dt_300x250",dcn:"8a9691ed017373ba9c3abb97cde70117"},0],[116,"768944187",0,0],[154,"aN5lB6fWyr7ioJrkHcnnVW",0,0]]],15:[15,"Newspapers 728x90 3rdParty","728x90",[],.2,3e3,0,0,{"gpt.adunit_regex":"Newspapers/728x90_3rdparty"},[[2,"608996",{siteId:"128982"},0],[3,"NP_728x90",{size:"728x90"},0],[4,"538911247",0,0],[5,"11822499",0,0],[9,"432526",{size:"728x90"},0],[10,"242539",{size:"728x90"},0],[16,"108637",0,0],[18,"NP_728x90_Desktop",0,0],[33,"gV4AAwATvixMQhpoxKqkiCi2",0,0],[109,"2336438619096424790",0,0],[115,"newspapers_dt_728x90",{pos:"newspapers_dt_728x90",dcn:"8a9691ed017373ba9c3abb97cde70117"},0],[116,"417999794",0,0],[154,"aN5lB6fWyr7ioJrkHcnnVW",0,0]]],16:[16,"Rootsweb 300x250","300x250",[],.04,3e3,0,0,{"gpt.adunit_regex":"rootsweb.com/(|mailinglists/|World_Connect/)RW(|WC)_(|ML_)300x250.*"},[[2,"608986",{siteId:"128980"},0],[3,"RW_300x250",{size:"300x250"},0],[4,"538911248",0,0],[5,"11822500",0,0],[9,"623382",{size:"300x250"},0],[10,"203710",{size:"300x250"},0],[16,"108636",0,0],[18,"RW_ROS_HDX",0,0],[33,"9U8C5JLdCijhe6ouzrfdeqqG",0,0],[109,"2285479370833953896",0,0],[115,"rootsweb_dt_300x250",{pos:"rootsweb_dt_300x250",dcn:"8a9691ed017373ba9c3abb936d3a0113"},0],[116,"264352041",0,0],[154,"df55dUbQir7lnyaKjGFx_2",0,0]]],17:[17,"Rootsweb 160x600","160x600",[],.04,3e3,0,0,{"gpt.adunit_regex":"rootsweb.com/(|mailinglists/)RW_(|ML_)160x600.*"},[[2,"608986",{siteId:"128980"},0],[3,"RW_160x600",{size:"160x600"},0],[4,"538911249",0,0],[5,"11822501",0,0],[9,"623522",{size:"160x600"},0],[10,"203711",{size:"160x600"},0],[16,"108636",0,0],[18,"RW_ROS_HDX",0,0],[33,"438658ULo5iKUhVemzsV0iO2",0,0],[109,"2285485432358208620",0,0],[115,"rootsweb_dt_160x600",{pos:"rootsweb_dt_160x600",dcn:"8a9691ed017373ba9c3abb936d3a0113"},0],[116,"710189225",0,0],[154,"dkltKgbQir7lnyaKjGFx_2",0,0]]],18:[18,"Rootsweb 728x90","728x90",[],.04,3e3,0,0,{"gpt.adunit_regex":"rootsweb.com/(|WikiPages/)RW_(|Wiki_|Sites_)728x90$"},[[2,"1957912",{siteId:"128980",position:"atf"},0],[3,"RW_320x50_ATF",{size:"320x50"},0],[3,"RW_728x90",{size:"728x90"},0],[4,"543880349",0,0],[5,"20956780",0,0],[9,"623383",{size:"728x90"},0],[10,"203712",{size:"728x90"},0],[16,"108636",0,0],[18,"rootsweb_docking_728x90",0,0],[33,"PC5iTvRusKIwvSk1lMoaVi2I",0,0],[109,"2285486735276803183",0,0],[115,"rootsweb_dt_728x90_atf",{pos:"rootsweb_dt_728x90_atf",dcn:"8a9691ed017373ba9c3abb936d3a0113"},0],[116,"212208145",0,0],[154,"doDfPobQir7lnyaKjGFx_2",0,0]]],19:[19,"Rootsweb Adhesion","728x90",["320x50"],.04,3e3,0,0,{"gpt.adunit_regex":"rootsweb.com/RW_728x90_btf"},[[2,"1957888",{siteId:"128980",position:"atf"},0],[3,"RW_320x50_ATF",{size:"320x50"},0],[3,"RW_728x90_bottom",{size:"728x90"},0],[4,"543537162",0,0],[4,"543537163",0,0],[5,"20491671",0,0],[9,"829344",{size:"728x90"},0],[9,"829349",{size:"320x50"},0],[10,"588745",{size:"320x50"},0],[10,"588745",{size:"728x90"},0],[16,"108636",0,0],[18,"rootsweb_adhesion_728x90",0,0],[33,"mhMNNNQsfobwXpHjQBKO2Zr8",0,0],[33,"u22WCJCnE4alaAYaTNDFe9Cx",0,0],[109,"2285487304125088881",0,0],[115,"rootsweb_dt_728x90_btf",{pos:"rootsweb_dt_728x90_btf",dcn:"8a9691ed017373ba9c3abb936d3a0113"},0],[116,"817150925",0,0],[154,"dtylsEbQir7lnyaKjGFx_2",0,0]]],20:[20,"FindAGrave New 300x250 Sticky","300x250",[],.2,3e3,0,0,{"gpt.adunit_regex":"FindAGraveNEW/fg_300x250_stickyright"},[[2,"521832",{siteId:"110548",position:"atf"},0],[3,"fg_300x250_stickyright",{size:"300x250"},0],[4,"538911242",0,0],[5,"11028248",0,0],[9,"445113",{size:"300x250"},0],[10,"198555",{size:"300x250"},0],[16,"107598",{},0],[18,"fg_HDX_ROS",0,0],[33,"fmwyIEvvSbtjAkrMLEiaELUN",0,0],[109,"2285492305799054465",0,0],[115,"findagrave_hb_300x250",{pos:"findagrave_hb_300x250",dcn:"8a96902c0173737e21138272ff6a0017"},0],[116,"357527026",0,0],[154,"dx3d2gbQir7lnyaKjGFx_2",0,0]]],21:[21,"FindAGrave New 300x250","300x250",[],.2,3e3,0,0,{"gpt.adunit_regex":"FindAGraveNEW/(|Famous/|Memorials/|Cemetery/)fg_300x250_(hp|mem*|cem|fame)"},[[2,"521832",{siteId:"110548",position:"atf"},0],[3,"fg_300x250_right",{size:"300x250"},0],[4,"538911241",0,0],[5,"11028238",{test:!0},0],[9,"378816",{size:"300x250"},0],[10,"198554",{size:"300x250"},0],[16,"107598",0,0],[18,"fg_300x250_right",0,0],[33,"QxHxWnv9vBQuB9rxJTIhuUY3",0,0],[109,"2285492305799054465",0,0],[115,"findagrave_hb_300x250",{pos:"findagrave_hb_300x250",dcn:"8a96902c0173737e21138272ff6a0017"},0],[116,"566336173",0,0],[154,"dB6_QCbQir7lnyaKjGFx_2",0,0]]],22:[22,"FindAGrave New 160x600","160x600",[],.2,3e3,0,0,{"gpt.adunit_regex":"FindAGraveNEW/(|Famous/|Memorials/|Cemetery/)fg_160x600_(fame|mem)"},[[2,"521832",{siteId:"110548"},0],[3,"fg_160x600_left",{size:"160x600"},0],[4,"538911243",0,0],[5,"11028226",0,0],[9,"378811",{size:"160x600"},0],[10,"198553",{size:"160x600"},0],[16,"107598",0,0],[18,"fg_HDX_ROS",0,0],[33,"qYQsO81EJnXdQMfCtsJpLseC",0,0],[109,"2285493195847140483",0,0],[115,"aol_findagrave_memorials_160x600",{pos:"aol_findagrave_memorials_160x600",dcn:"8a9698ea0173737e1d8782771db3042c"},0],[116,"362743734",0,0],[154,"dF-vWqbQir7lnyaKjGFx_2",0,0]]],23:[23,"FindAGrave New 728x90 ATF","728x90",[],.2,3e3,0,0,{"gpt.adunit_regex":"FindAGraveNEW/(|Famous/|Memorials/|Cemetery/)fg_728x90(_hp|_[a-z]*top|_[a-z]*_top)"},[[2,"521832",{siteId:"110548",position:"atf"},0],[3,"fg_728x90_top",{size:"728x90"},0],[4,"538911244",0,0],[5,"11028261",0,0],[9,"378818",{size:"728x90"},0],[10,"198551",{size:"728x90"},0],[16,"107598",0,0],[18,"fg_728x90_top",0,0],[33,"zL66o7S8lhe0zKdJSPq2NQhY",0,0],[109,"2285495210396517510",0,0],[115,"findagrave_hb_728x90",{pos:"findagrave_hb_728x90",dcn:"8a96902c0173737e21138272ff6a0017"},0],[116,"373484656",0,0],[154,"dKnXcWbQir7lnyaKjGFx_2",0,0]]],24:[24,"FindAGrave New 728x90 BTF","728x90",[],.2,3e3,0,0,{"gpt.adunit_regex":"FindAGraveNEW/(|Famous/|Memorials/|Cemetery/)fg_728x90(_[a-z]*bottom|_[a-z]*_bottom)"},[[2,"521832",{siteId:"110548",position:"atf"},0],[3,"fg_728x90_bottom",{size:"728x90"},0],[4,"538911245",0,0],[5,"11028268s",{test:!0},0],[9,"325556",{size:"728x90"},0],[10,"198552",{size:"728x90"},0],[16,"107598",0,0],[18,"fg_728x90_bottom",0,0],[33,"1gPC4L7l6ysebYtfnZS19M6G",0,0],[109,"2285496074750297225",0,0],[115,"findagrave_hb_728x90",{pos:"findagrave_hb_728x90",dcn:"8a96902c0173737e21138272ff6a0017"},0],[116,"171548684",0,0],[154,"dOjTTQbQir7lnyaKjGFx_2",0,0]]],25:[25,"Gene_ROS ATF 728x90","728x90",[],.04,3e3,0,0,{"gpt.adunit_regex":"genealogy.com/728x90_ROS"},[[2,"769942",{siteId:"158664",position:"atf"},0],[3,"Gene_ROSATF728x90",{size:"728x90"},0],[4,"539429795",0,0],[5,"12405490",0,0],[9,"623387",{size:"728x90"},0],[10,"226492",{size:"728x90"},0],[16,"108605",0,0],[18,"Gene_ROS_HDX",0,0],[33,"HNcUYfcLLcyVsjLKZmKM36kI",0,0],[109,"2285488926792254583",0,0],[115,"genealogy_728x90_atf_hb",{pos:"genealogy_728x90_atf_hb",dcn:"8a9691ed017373ba9c3abb98e9f8011b"},0],[116,"239342527",0,0],[154,"d8twTubQir7lnyaKjGFx_2",0,0]]],26:[26,"Gene_ROS 300x250","300x250",[],.04,3e3,0,0,{"gpt.adunit_regex":"genealogy.com/300x250_ROS"},[[2,"769942",{siteId:"158664",position:"atf"},0],[3,"Gene_ROS300x250",{size:"300x250"},0],[4,"539429794",0,0],[5,"12405479",0,0],[9,"623386",{size:"300x250"},0],[10,"226491",{size:"300x250"},0],[16,"108605",0,0],[18,"Gene_ROS_Deskop_300x250",0,0],[33,"mBgoHErwDoyVk4vwkjuyuRTd",0,0],[109,"2285489612141528185",0,0],[115,"genealogy_300x250_hb",{pos:"genealogy_300x250_hb",dcn:"8a9691ed017373ba9c3abb98e9f8011b"},0],[116,"552718304",0,0],[154,"aat3KybQmr7lnyaKjGFx_2",0,0]]],27:[27,"Gene_ROS 160x600","160x600",[],.04,3e3,0,0,{"gpt.adunit_regex":"genealogy.com/160x600_ROS"},[[2,"769942",{siteId:"158664"},0],[3,"Gene_ROS160x600",{size:"160x600"},0],[4,"539429793",0,0],[5,"12405483",0,0],[9,"623385",{size:"160x600"},0],[10,"226490",{size:"160x600"},0],[16,"108605",0,0],[18,"Gene_ROS_HDX",0,0],[33,"5asQ4ceTk7sNAkJJrDN6Iv1r",0,0],[109,"2285490456538809467",0,0],[115,"genealogy_160x600_hb",{pos:"genealogy_160x600_hb",dcn:"8a9691ed017373ba9c3abb98e9f8011b"},0],[116,"576553679",0,0],[154,"aeIrxabQmr7lnyaKjGFx_2",0,0]]],28:[28,"Gene_ROS BTF 728x90","728x90",[],.04,3e3,0,0,{"gpt.adunit_regex":"genealogy.com/728x90_bottom"},[[2,"769942",{siteId:"158664"},0],[3,"Gene_ROSBTF728x90",{size:"728x90"},0],[4,"539429796",0,0],[5,"12405492",0,0],[9,"623388",{size:"728x90"},0],[10,"226493",{size:"728x90"},0],[16,"108605",0,0],[18,"Gene_ROS_BTF_728x90",0,0],[33,"NDIErvsdTtUfeOUGpR8Jmc7Z",0,0],[109,"2285491209668035710",0,0],[115,"genealogy_728x90_btf_hb",{pos:"genealogy_728x90_btf_hb",dcn:"8a9691ed017373ba9c3abb98e9f8011b"},0],[116,"174166046",0,0],[154,"akICcwbQmr7lnyaKjGFx_2",0,0]]],29:[29,"FindAGrave New 320x50","320x50",[],.2,3e3,0,0,{"gpt.adunit_regex":"FindAGraveNEW/(|Famous/|Memorials/|Cemetery/)fg_320x50_*"},[[2,"521832",{siteId:"110548"},0],[3,"fg_320x50_mobile",{size:"320x50"},0],[4,"539753634",0,0],[5,"12762494",0,0],[9,"547108",{size:"320x50"},0],[16,"107598",0,0],[18,"fg_HDX_ROS",0,0],[33,"3edJy1pHdtLE0wcGtBeiCGtx",0,0],[109,"2285495210396517510",0,0],[115,"findagrave_320x50_hb",{pos:"findagrave_320x50_hb",dcn:"8a96902c0173737e21138272ff6a0017"},0],[116,"676294403",0,0],[154,"dSuZUIbQir7lnyaKjGFx_2",0,0]]],30:[30,"FindAGrave New Search 728x90","728x90",[],.2,3e3,{require_bid:!0},0,{"gpt.adunit_regex":"FindAGraveNEW/fg_728x90_search","vp.min_width":768},[[2,"521832",{siteId:"110548"},0],[3,"fg_search_desktop",{size:"728x90"},0],[4,"539780867",0,0],[5,"12795850",0,0],[9,"549884",{size:"728x90"},0],[16,"107598",0,0],[18,"fg_search_desktop_728x90",0,0],[33,"2gxM8lyoHkVzcMpx7VgkCO6T",0,0],[109,"2285495210396517510",0,0],[115,"findagrave_hb_728x90",{pos:"findagrave_hb_728x90",dcn:"8a96902c0173737e21138272ff6a0017"},0],[116,"568345417",0,0],[154,"dWlRNGbQir7lnyaKjGFx_2",0,0]]],31:[31,"FindAGrave New Search 320x50","320x50",[],.2,3e3,{require_bid:!0},0,{"gpt.adunit_regex":"FindAGraveNEW/fg_(728x90|320x50)_search","vp.max_width":767},[[2,"521832",{siteId:"110548"},0],[3,"fg_search_mobile",{size:"320x50"},0],[4,"539780881",0,0],[5,"12795851",0,0],[9,"549885",{size:"320x50"},0],[16,"107598",0,0],[18,"fg_HDX_ROS",0,0],[33,"ZjhvoQOrKn5G3QC7kLtlB14I",0,0],[109,"2285495210396517510",0,0],[115,"findagrave_hb_320x50_search",{pos:"findagrave_hb_320x50_search",dcn:"8a96902c0173737e21138272ff6a0017"},0],[116,"931185384",0,0],[154,"dZki9YbQir7lnyaKjGFx_2",0,0]]],32:[32,"FindAGrave New 300x600","300x600",["300x250","160x600"],.2,3e3,0,0,{"gpt.adunit_regex":"FindAGraveNEW/(|Famous/|Memorials/|Cemetery/)fg_300x600_(fame|mem|cem)"},[[2,"521832",{siteId:"110548"},0],[3,"fg_300x600_right",{size:"300x600"},0],[4,"539792738",0,0],[5,"12803530",0,0],[9,"550113",{size:"300x600"},0],[10,"249382",{size:"160x600"},0],[10,"249382",{size:"300x250"},0],[10,"249382",{size:"300x600"},0],[16,"117128",0,0],[18,"fg_HDX_ROS",0,0],[33,"3Q7fpVTig8DIIFozmjdHbn3j",0,0],[33,"9Hh61YCiCxVK4KK9weTjQW0n",0,0],[33,"CEDSkT45YDGTRkjJGjmdISKh",0,0],[109,"2285496761961841803",0,0],[115,"findagrave_hb_300x600",{pos:"findagrave_hb_300x600",dcn:"8a96902c0173737e21138272ff6a0017"},0],[116,"589080703",0,0],[154,"d3zKgWbQir7lnyaKjGFx_2",0,0],[171,"21672795",0,0]]],33:[33,"Rootsweb 300x600","300x600",[],.04,3e3,0,0,{"gpt.adunit_regex":"rootsweb.com/World_Connect/rwwc_300x600.*"},[[2,"608986",{siteId:"128980"},0],[3,"RW_300x600",{size:"300x600"},0],[4,"540681522",0,0],[5,"20031573",0,0],[9,"761065",{size:"300x250"},0],[10,"408514",{size:"300x600"},0],[16,"108636",0,0],[18,"RW_ROS_HDX",0,0],[33,"NJ0jaPv7et3S0FPplzc0Uao3",0,0],[109,"2285487837112075379",0,0],[115,"rootsweb_dt_160x600",{pos:"rootsweb_dt_160x600",dcn:"8a9691ed017373ba9c3abb936d3a0113"},0],[116,"988356205",0,0],[154,"bgk8UKbQir7j4GaKlKyvbs",0,0]]],34:[34,"Rootsweb Sticky Sidebar","300x600",["300x250","160x600"],.04,3e3,0,0,{"gpt.adunit_regex":"rootsweb","adb.ad_class":"sticky_sidebar"},[[2,"608986",{siteId:"128980",position:"atf"},0],[3,"RW_sticky_sidebar_160x600",{size:"160x600"},0],[3,"RW_sticky_sidebar_300x250",{size:"300x250"},0],[3,"RW_sticky_sidebar_300x600",{size:"300x600"},0],[4,"538911248",0,0],[4,"538911249",0,0],[4,"540681522",0,0],[5,"20031590",0,0],[9,"623382",{size:"300x250"},0],[10,"562847",{size:"160x600"},0],[10,"562847",{size:"300x250"},0],[10,"562847",{size:"300x600"},0],[16,"108636",0,0],[18,"RW_ROS_HDX",0,0],[33,"3riGCLfRYmfgbq7y61HX9Sse",0,0],[33,"fLdV9mwHCCJ8IRgZVcOXNCx4",0,0],[33,"gAgrOQ9MlHDHyIyySEA90zFq",0,0],[109,"2550894483713499427",0,0],[109,"2550894483830939940",0,0],[109,"2550894483948380453",0,0],[115,"rootsweb_dt_300x250",{pos:"rootsweb_dt_300x250",dcn:"8a9691ed017373ba9c3abb936d3a0113"},0],[116,"523538018",0,0],[154,"dawBI-bQir7lnyaKjGFx_2",0,0],[171,"21672794",0,0]]]}}),g={},f={},i={};window.AdBridg=window.AdBridg||{cmd:[]},window.AdBridg.global=function(e,t){if(void 0===t)return l.logl("g","Global read: ",e,i[e]),i[e];i[e]=t,l.logl("g","Global set: ",e,t)},window.AdBridg.globals={version:"v5.18.0-pre"},p.s.preconfigure_init&&l.wrapAsync(p.s.preconfigure_init)(p.s),t.getId=function(){return p.c},t.libSettings=function(t){if(t){var e,i;try{i="function"==typeof p.s[t]?(e=Array.prototype.slice.apply(arguments,[1]),p.s[t].apply(null,e)):p.s[t]}catch(e){l.err("ConfigKeyFail",t,e)}return i}return p.s},t.kvp=function(e){var t=p.s.gpt_kvp_overrides;return t&&t[e]?t[e]:e},t.proc=function(e){p.s.pub=p.s.pub||{},l.each(e,function(e,t){p.s.pub[t]=e}),l.log("Publisher config update: ",JSON.stringify(p.s.pub)),d("./modules.js").trigger("pub.config",p.s.pub)},t.deca=function(e){if(p.s.alter_adb_pixel)try{e=p.s.alter_adb_pixel(e)}catch(e){l.err("Alter adb fail",e)}return e};t.configureUnit=function(e,t){var i,r=!1,n=[];for(i in p.u)if(p.u.hasOwnProperty(i)){var o=u(0,p.u[i]);if(d("./modules.js").trigger("unit.dynamic",o,p.s,e),p.s.dynamic_configuration)try{var a=p.s.dynamic_configuration(o,p.s,e);if(!(o="object"==typeof a||!1===a?a:o))continue}catch(e){l.err("Failed dynamic configuration",e)}if(t){if(t!==o.id)continue;r=o;break}if(o.rule_order)n[o.rule_order]=o;else if(c(e,o,p.s)){r=o;break}}if(!r&&n.length)for(var s=0;s<n.length;++s)if(n[s]&&c(e,n[s],p.s)){r=n[s];break}r&&(e.configure(r),function(e,t){if(t.bid_req_confs&&t.bid_req_confs.length)for(var i=0;i<t.bid_req_confs.length;++i){var r=t.bid_req_confs[i],n={bidder_id:r[0],bidder_unit_id:r[1],settings:r[2]||{},mutate:r[3]||!1};0;r=f[String(n.bidder_id)];l.qsab(r,n.bidder_id)&&(e.addBidder(r,g[r]),e.addBidReqConf(r,n,p.s))}}(e,r))},t.units=function(i){l.each(p.u,function(e,t){i(u(0,e))})};var r=p.s.usp;(r="function"==typeof r?r():r)&&l.cfusp(r.image,r.iframe,r.delay),t.afterConsent=d("./consent.js")(p);function n(i,r,n){t.afterConsent(function(e){return e&&e.gdprApplies&&!e.consentString?l.log("GDPR skip register",i,e):void(g[i]?l.err("Duplicate bidder alias "+i):(t={bidder_id:n[0],settings:n[1]||{},mutate:n[2]||!1},g[i]=new r(i,t.bidder_id,t.settings,e,o),g[i].alias=i,g[i].id=t.bidder_id,g[i].settings=t.settings,g[i].mutate=t.mutate||!1,f[String(t.bidder_id)]=i));var t})}var o=d("./modules.js");o.setup(t);var a=d("./adapters/33across.js"),s=d("./adapters/medianet.js"),m=d("./adapters/aol.js"),h=d("./adapters/yieldmo.js"),b=d("./adapters/sharethrough.js"),v=d("./adapters/triplelift.js"),y=d("./adapters/conversant.js"),_=d("./adapters/index.js"),w=d("./adapters/sovrn.js"),x=d("./adapters/appnexusast.js"),S=d("./adapters/openx.js"),r=d("./adapters/pubmatic.js");n("rubicon",d("./adapters/rubicon.js"),[2,{adjust:.8,accountId:14544},0]),n("pubmatic",r,[3,{publisherId:"158092"},0]),n("openx",S,[4,{delDomain:"ancestry-d.openx.net"},0]),n("appnexus",x,[5,0,0]),n("sovrn",w,[9,0,0]),n("index",_,[10,0,0]),n("conversant",y,[16,0,0]),n("triplelift",v,[18,0,0]),n("sharethrough",b,[33,0,0]),n("yieldmo",h,[109,{test:!0},0]),n("onemobile",m,[115,0,0]),n("medianet",s,[116,{cid:"8CU12G3DV"},0]),n("33across",a,[154,{productId:"siab"},0]),n("appnexus_infolinks",x,[171,{test:!0},0]),t.afterConsent(function(e){d("./modules.js").trigger("consent.check_complete",e)})},{"./adapters/33across.js":1,"./adapters/aol.js":2,"./adapters/appnexusast.js":3,"./adapters/conversant.js":4,"./adapters/index.js":5,"./adapters/medianet.js":6,"./adapters/openx.js":7,"./adapters/pubmatic.js":8,"./adapters/rubicon.js":9,"./adapters/sharethrough.js":10,"./adapters/sovrn.js":11,"./adapters/triplelift.js":12,"./adapters/yieldmo.js":13,"./ajax":14,"./consent.js":18,"./modules.js":21,"./utils":35}],18:[function(r,e,t){var n,o=r("./utils.js");e.exports=o.wrapAsync(function(e){return n=e,function(e){I(e)}});var i,a,s="",d=function(e,t){s+=e,t&&(s+=t)},c={iab:"A",conversant:"B"},u={geoblock:"C",geoblockbids:"D",geocmp:"E"},p="M",l="AT,BE,BG,CR,CY,CZ,DK,EE,FI,FR,DE,GR,HU,IE,IT,LV,LI,LU,MT,NL,PL,PT,RO,SK,SI,SP,SE,GB,NO,IS,LI,GI,AX,GF,GP,MQ,YT,RE,MF,FK,CH,AD,MC,SM,VA,",g=!1,f=!1,m=!1,h=[];o.qs("adb_skip_consent")&&(o.log("Consent: skipped by qs"),f=g=!0);function b(){if(g&&f)for(;h.length;){var e=h.shift();A(e)}}function v(){E||(E=!0,o.log("Consent: removing action configurations."),n.u=[],d("N"))}function y(){googletag&&googletag.cmd&&!j&&(j=!0,o.log("Consent: set GPT setRequestNonPersonalizedAds(1)."),d("L"),googletag.cmd.push(function(){googletag.pubads().setRequestNonPersonalizedAds(1)}))}function _(){googletag&&googletag.cmd&&!T&&(T=!0,o.log('Consent: set GPT setPrivacySettings({ "restrictDataProcessing": true }).'),d(p),googletag.cmd.push(function(){googletag.pubads().setPrivacySettings({restrictDataProcessing:!0})}))}var w,x,S,I=o.wrapAsync(function(e){"function"==typeof e?(e=o.wrapAsync(e),g&&f?A(e):(h.push(e),m||(m=!0,C(),P()))):o.err("Consent: invalid cb",e)}),A=function(e){e(i,a,s)},k=o.wrapAsync(function(e){o.log("Consent: done gathering GDPR consent",e),i=e,g=!0,d("u"),b()}),z=o.wrapAsync(function(e){o.log("Consent: done gathering USP consent",e),a=e,f=!0,d("h"),b()}),E=!1,j=!1,T=!1,C=function(){var e=n.s.cmp;"function"==typeof e?(d("t"),e(n.s,o.wrapAsync(function(e){O(e)}))):O(e)},O=o.wrapAsync(function(i){return i?"pubblock"===i?(o.log("Consent: gdpr: pubblock"),d("F"),v(),y(),void k({gdprApplies:!0,consentString:""})):"iab"===i||"conversant"===i?(d(c[i]),void B(i)):"geoblock"===i||"geoblockbids"===i||"geocmp"===i?(d(u[i]),void q(function(e){if(-1===l.indexOf(e.slice(0,2)))return o.log("Consent: gdpr: not in EU:",e),d("y"),void k({gdprApplies:!1,consentString:""});if("geocmp"===i){var t=n.s.cmp_for_geo;return o.log("Consent: gdpr: in EU, checking cmp:",t),d("x"),void setTimeout(function(){O(t)},0)}if("geoblock"===i)return d("v"),o.rec("GDPRBlockAll"),void o.log("Consent: gdpr: in EU, disabling ads");d("w"),o.log("Consent: gdpr: geoblockbids - preventing auctions and continuing to GAM"),v(),y(),k({gdprApplies:!0,consentString:""})})):(d("z"),o.err("Consent: unrecognized cmp value",i),void k()):(d("G"),void k())}),R=0,B=o.wrapAsync(function(){if("function"!=typeof window.__cmp&&"function"!=typeof window.__tcfapi){var e=n.s.cmp_check_interval,t=n.s.cmp_check_max;if(e&&R<t)return 0===R&&(d("p"),o.log("Consent: gdpr: cmp not found yet - checking every ",e,"ms; max ",t,"intervals")),R+=1,void setTimeout(B,e);var i=n.s.cmp_fallback;return i?(o.log("Consent: gdpr: fallback to",i),d("o"),void setTimeout(function(){O(i)},0)):(d("n"),void o.log("Consent: gdpr: CMP object not found, preventing further execution."))}if(window.__tcfapi)return o.log("Consent: gdpr: calling TCFv2"),d("U"),void window.__tcfapi("getTCData",2,o.wrapAsync(function(e,t){var i,r,n;e?(d("s"),i=e.tcString,n=e.gdprApplies,r=e):d("r"),k({consentString:i,vendorData:r,gdprApplies:n})}));o.log("Consent: gdpr: calling CMP"),d("q"),window.__cmp("getVendorConsents",null,o.wrapAsync(function(e){var t,i,r;o.log("Consent: gdpr: CMP result",e),e?(t=e.metadata||e.consentData,i=e.vendorConsents,r=e.gdprApplies,d("s")):d("r"),k({consentString:t,vendorData:i,gdprApplies:r})}))}),P=function(){var e=n.s.ccpa;if("optout"===e)return o.log("Consent: ccpa: opting out all users, restricting gpt processing"),d("l"),_(),void z({version:1,uspString:U()});if(0!==(e||"").indexOf("geoblock,"))return!e&&window.__uspapi&&(e="iab",d("k")),e?"iab"===e?(d("j"),void N()):(o.log("Consent: ccpa: unknown strategy, continuing as normal; strategy=",e),d("i"),void z()):(o.log("Consent: ccpa: no strategy defined, continuing as normal"),d("m"),void z());var t=e.split(",").slice(1);q(function(e){-1!==t.indexOf(e)?(o.log("Consent: ccpa: opting out ",t," users, restricting gpt processing"),d("O"),_(),z({version:1,uspString:U()})):(o.log("Consent: ccpa: region OK",e),d("T"),z({version:1,uspString:"1---"}))})},U=function(){var e=n.s.ccpa_signatory||"N";return"1"+(n.s.ccpa_button||"N")+"Y"+e},D=0,N=o.wrapAsync(function(){var i=n.s.usp_check_interval||500,r=n.s.usp_check_max||30;if(!window.__uspapi)return i&&D<r?(0===D&&(o.log("Consent: usp: __uspapi not found yet - checking every ",i,"ms; max ",r,"intervals"),d("b")),D+=1,void setTimeout(N,i)):(o.log("Consent: usp: __uspapi not found, preventing further execution."),void d("a"));0===D&&d("c"),window.__uspapi("getUSPData",1,o.wrapAsync(function(e,t){return o.log("Consent: usp: result",e,t),t||e&&e.uspString?(e&&e.uspString?(d("g"),"Y"===e.uspString.substr(2,1)&&_()):d("d"),void z(e)):i&&D<r?(0===D&&(o.log("Consent: usp: result empty, re-checking in ",i,"ms"),d("e")),D+=1,void setTimeout(N,i)):(o.log("Consent: usp: __uspapi returned invalid, defaulting to Opt Out"),d("f"),_(),void z({version:1,uspString:U()}))}))}),q=(S=[],function(e){var t,i;"function"==typeof e?(e=o.wrapAsync(e),w||(t=o.cr("adbrgn"))&&(o.log("Consent: region cookie found",t),d("S"),w=t),w?e(w):(S.push(e),x||(o.log("Consent: geo region requested"),i=function(){for(;S.length;)S.shift()(w)},x=!0,r("./ajax.js")({url:"https://geo.adspsp.com",withCredentials:!1,parseResponseJson:!1},o.wrapAsync(function(e,t){return e?(o.err("geo/region",e),n.s.cmp_allow_geofail?(w="????",o.log("Consent: error getting region, continuing"),d("P"),void i()):(o.log("Consent: region check failed; preventing further action"),void d("Q"))):(w=t,o.log("Consent: region check result",w),o.cw("adbrgn",w),o.log("Consent: cached region",w),d("R"),void i())}))))):o.err("Consent: bad region cb",e)})},{"./ajax.js":14,"./utils.js":35}],19:[function(e,t,r){if(window.AdBridg=window.AdBridg||{cmd:[]},window.googletag=window.googletag||{cmd:[]},window.pbjs=window.pbjs||{que:[]},AdBridg.gpt=window.googletag,!(AdBridg.exists||window.googletag&&googletag.cmd&&googletag.cmd===AdBridg.cmd)){AdBridg.exists=!0;var a,s,y=e("../utils.js"),u=e("../unit.js"),p=e("../auction.js"),_=e("../config.js"),w=e("../analytics.js"),x=e("../modules.js"),n=e("../mockprebid.js");if(!y.qs("adb_off")){if(H=y.vp(),/headless/i.test(navigator.userAgent)||0===H.w||0===H.h)return y.log("headless browser detected; shutting down"),void y.rec("headless");s={enableSingleRequest:ve,disableInitialLoad:ve,addEventListener:(a={add:function(e,t){a[e]=(a[e]||[]).concat(t)},remove:function(e,t){a[e]=(a[e]||[]).filter(function(e){return e!==t})},trigger:function(){var t=[].slice.apply(arguments),e=t.shift();(a[e]||[]).forEach(function(e){e.apply(0,t)})}}).add,removeEventListener:a.remove,safeFrameConfig:!1,setSafeFrameConfig:function(e){s.safeFrameConfig=e},targeting:{},setTargeting:function(e,t){s.targeting[e]=t},refresh:function(e){e.forEach(function(e){var i=document.createElement("iframe"),t=document.getElementById(e.getSlotElementId()),r=!s.safeFrameConfig||e.getTargeting("unsafe")[0];i.height=e.sizes[0][1],i.width=e.sizes[0][0],i.border="0px",i.hspace="0",i.vspace="0",i.marginWidth="0",i.marginHeight="0",i.style.border="0",i.scrolling="no";var n={slot:e,advertiserId:0,campaignId:0,creativeId:0,isEmpty:!(i.frameBorder="0"),lineItemId:0,size:null,sourceAgnosticCreativeId:0,sourceAgnosticLineItemId:0},o=e.getTargeting(_.kvp("adb_adid"))[0];r?i.src="about:blank":(s.safeFrameConfig&&s.safeFrameConfig.sandbox&&(i.sandbox="allow-forms allow-pointer-lock allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"),i.src="https://prod.adspsp.com/iframe.html"),t.innerHTML="",t.appendChild(i),o?(i.contentDocument.open(),i.contentDocument.write(r?'<script>try { top.AdBridg.render(document, "'+o+'") } catch(e) {}<\/script>':'<html><head><script type="text/javascript" src="https://prod.adspsp.com/adbpmc2.js"><\/script><script type="text/javascript">AdBridgServe("'+location.href+'", "'+o+'");<\/script></head><body></body></html>'),a.trigger("slotRenderEnded",n)):"function"==typeof(o=_.libSettings().getHouseAd)?o(e,function(e,t){i.contentDocument.open(),i.contentDocument.write(e),n.isEmpty=!1,a.trigger("slotRenderEnded",y.assign(n,t))}):(y.log(e.getAdUnitPath(),"nothing to render"),n.isEmpty=!0,a.trigger("slotRenderEnded",n))})}},AdBridg.gptStub={cmd:{push:function(e){e()}},pubads:function(){return s},defineSlot:function(e,t,i){var r={sizes:t,targeting:{},addService:ve,getSlotElementId:function(){return i},getAdUnitPath:function(){return e},setTargeting:function(e,t){r.targeting[e]=t},getTargeting:function(e){return[].concat(r.targeting[e],s.targeting[e]).filter(Boolean)},getTargetingMap:ve};return r},enableServices:ve,display:ve},("function"==typeof _.libSettings().nogpt&&_.libSettings().nogpt()||y.qs("adb_nogpt"))&&(y.log("Disabling GPT"),AdBridg.gpt=AdBridg.gptStub);var d=!1,c=[],l=!1,g=[],o=!1,f=[],m=[],h={},S={},b={},v={},I=!1,A=[],k=[],z={},E=[],j="Workflow |",T=!0,e=_.libSettings().sra_if;(e&&!e()||_.libSettings().no_sra)&&(T=!1);function C(i,r,a){return y.wrapAsync(function(o){le("ra",function(){var n=[];o.eachUnit(function(t){if(o===l){if(!t.get("gpt_slot")||t.get("preload_used"))return;t.set("preload_used",1)}try{var e=_.libSettings().post_auc_ufilter;if(e){var i=e(t,a);if(i)return void y.log("Ignoring",t.alias,t.get("dom_id"),i)}}catch(e){y.err("Err auc unit filter ",t.alias,t.get("dom_id"),e)}try{var r=t.getWinner();if(t.settings.require_bid&&!r)return y.log("Discarding unit ",t.alias,t.get("dom_id")," -- requires bid but had none."),void y.thread(function(){AdBridg.destroySlots([t.get("gpt_slot")])})();r&&(r.config.unit.setImpData("adb_mtype",r.extras.mediaType),t.gptTargetSet(r)),function(e){var t=_.libSettings().bid_strategy,i=e.getWinner(),r=e.get("gpt_slot");P(r),x.trigger("gpt.set_targeting",e,r);var n,o=e.get("adb_imp_data");if(o&&(n=r.getTargeting("adb_imp")||[],y.isarr(n)||(n=[n]),y.each(o,function(e){e&&-1===n.indexOf(e)&&n.push(e)}),n.length&&r.setTargeting(_.kvp("adb_imp"),n)),_.libSettings().track_alias&&r.setTargeting(_.kvp("adb_cfg"),e.alias),!i)return r.setTargeting(_.kvp("adb_bdr"),["none"]),D(r,-1),x.trigger("gpt.no_hbc",e,r,function(e){return y.toRange(e,t)},function(e,t){U(e),D(e,t)});AdBridg.gpt!==window.googletag&&(r.setTargeting("unit",e),(_.libSettings().unsafeBidders||"").split(",").filter(function(e){return e===i.config.bidder_name}).length&&r.setTargeting("unsafe",!0));var a=(z[i.id]=i).config.dfp_bidder_name||i.config.bidder_name,s=i.cpm,o=_.libSettings().cur;o&&(o.exclude&&-1<o.exclude.indexOf(i.config.bidder_id)?y.log("Currency conversion skipped: ",i.config.bidder_name):(y.log("Currency conversion: USD = ",s,"; Rate = ",o.rate,"; DFP = ",o.rate*s),s*=o.rate));var d=y.toRange(s,t),c=d.kv;x.trigger("gpt.modify_hbc",e,r,{bid:i,range:d,mod:function(e){return s=e,d=y.toRange(s,t),c=d.kv,d}}),y.qs("adb_force_bidder")?(a="force",c=""):y.qs("adb_force_sf_bidder")&&(a="forcesf",c=""),y.qs("adb_force_pbuc")&&(a="force_pbuc",c="",y.log("Forcing PBUC"));e=_.libSettings().vs_threshold;if("function"==typeof e)try{var u=e(s);u&&r.setTargeting(_.kvp("adb_vs"),u)}catch(e){y.err("HVfail",e)}r.setTargeting(_.kvp("adb_bdr"),[a]),r.setTargeting(_.kvp("adb_hbc"),[c]),r.setTargeting(_.kvp("adb_adid"),[i.id]),_.libSettings().track_mtype&&i.extras&&i.extras.mediaType&&r.setTargeting(_.kvp("adb_mtype"),[i.extras.mediaType]),y.log("Set GPT targeting for ",r.getAdUnitPath()," / ",r.getSlotElementId(),": ",a,c),D(r,s)}(t),n.push(t.get("gpt_slot"))}catch(e){y.err("Err setting unit ",t.alias,t.get("dom_id"),e)}});var e,t=k.concat(n);if(k=[],R(t),"function"==typeof i&&i(o),T&&!(t=L("AC",t)).length)return y.err("All units cancelled",o.id);(T||a)&&(Z(),y.log(j,"GPT Batch: ",t.length),(e=_.libSettings("gpt_refresh_options",r))&&(r=e),x.trigger("gpt.before_request",t,r,a),AdBridg.gpt.pubads().refresh(t,r),x.trigger("gpt.request_adbridg",o,a))})})}function O(){var e,t;I&&(e=A.length,(A=L("PT",A)).length?(y.isdebug()&&(t=[],y.each(A,function(e){t.push(e.getAdUnitPath()+" / "+e.getSlotElementId())}),y.log("Non-bid request with",A.length," units: ",t)),le("rp",function(){var e,t=A;A=[],t.length&&(Z(),R(t),y.log(j,"GPT PT Batch: ",t.length),e=_.libSettings("gpt_refresh_options")||{},x.trigger("gpt.before_request",t,e),AdBridg.gpt.pubads().refresh(t,e),x.trigger("gpt.request_passthrough",t))})):e&&y.err("PT units cancelled"))}function R(e){y.each(e,function(e){var t=e.getSlotElementId(),i=(q[t]||0)+1;q[t]=i;t=_.libSettings().track_imps;if(t)try{"string"!=typeof t&&(t="1:1-11");for(var r=Math.floor(y.toRange(i,t).kv.split("-")[0]),n=e.getTargeting("adb_imp"),o=n.length-1;0<=o;--o)String(n[o]).match(/^\d+$/)&&n.splice(o,1);n.push(r),e.setTargeting(_.kvp("adb_imp"),n)}catch(e){y.err("Counter failed: ",e)}})}function B(e){return F[e.getSlotElementId()]}var P=function(e){var t,i,r=_.libSettings().gpt_clear_kvps,n=[],o=e.getTargetingMap(),a=!1;for(i in o)o.hasOwnProperty(i)&&("adb_"===i.substr(0,4)||r&&0<=r.indexOf(i)?a=!0:n.push([i,o[i]]));if(a)for(e.clearTargeting(),t=0;t<n.length;++t)e.setTargeting(n[t][0],n[t][1]);U(e)},U=function(e){var t=_.libSettings().gpt_exclusions;if(t){for(var i=!1,r=e.getCategoryExclusions(),n=r.length-1;0<=n;--n){var o=r[n];t.hasOwnProperty(o)&&(r.splice(n,1),i=!0)}if(i)for(e.clearCategoryExclusions(),n=0;n<r.length;++n)e.setCategoryExclusion(r[n])}},D=function(e,t){var i=_.libSettings().gpt_exclusions;if(i){var r,n=[];for(r in i){var o=i[r];("function"==typeof o&&o(e,t)||o<=t)&&(e.setCategoryExclusion(r),n.push(r))}n.length&&y.log("Set GPT category exclusions for ",e.getAdUnitPath()," / ",e.getSlotElementId(),": ",n)}},N={},q={},F={};AdBridg.has_gpt_lock=B;function M(e){y.log("Locked slot: ",e.getSlotElementId()),F[e.getSlotElementId()]=!0}function G(e,r,n){var o=[],o=Number(e[0])===e[0]?[e]:[].concat(e),a=[];if(y.each(o,function(e,t){if("string"==typeof e[t]){var i=e[t].split("x");return 0!==i[0]&&0!==i[1]||y.err("0 size in",r,n,e[t]),void(e[t].match(/^\d+x\d+$/)||a.push(t))}0!==e[0]&&0!==e[1]||y.err("0 size in",r,n,e.join?e.join("x"):e),o[t]=e.join("x")}),a.length)for(var t=a.length-1;0<=t;--t)o.splice(t,1);return o}var L=y.wrapAsync(function(n,e,o){var a=_.libSettings().max_imp_ctr;"function"==typeof a&&(a=a());var s=[];return y.each(e,function(e){var t=e&&e.getSlotElementId?e:e.get("gpt_slot");if(t){var i=t.getSlotElementId();if(!b[i]){if(W("F"+n,i))return y.log("Slot excluded; element hidden",i);if(o){if(B(t))return y.log("Cannot refresh locked dom_id: ",t.getSlotElementId());if(a){var r=q[i]||0;if(a<=r)return N[i]?y.log("Slot excluded; too many imps: ",t,r+" > "+a):y.err("Slot imp max: ",t.getAdUnitPath(),i,a)}}i=[];if(x.trigger("gpt.filter_slot",n,t,o,i),i.length)return y.log("Module blocking",n,t,i);s.push(e)}}}),s}),W=function(e,t,i){var r=y.dom_invisible(t);if(r){i=i||0;var n=_.libSettings().block_invisible;if(n="function"==typeof n?n(e,t,r):n)return y.logl("dei","DEI.R",e,t,r,i),r;y.logl("dei","DEI.A",e,t,r,i)}return!1};window.AdBridg.defineSlot=y.wrapAsync(function(e,t,i){var r=W("DS",i);if(r)return y.log("Slot definition blocked: ",i,r),!1;var n=_.libSettings().block_slot;if("function"==typeof n)try{if(n(e,i))return void y.err("Blocking slot:  ",e," with dom_id: ",i)}catch(e){y.err("DefineOverride",e)}var o=_.libSettings().override_define;if("function"==typeof o)try{var a=o(e,t,i);if(!1===a)return y.log("Param override prevented defineSlot",e," dom_id=",i),!1;"object"==typeof a&&(a.dfp_ad_unit_path&&(e=a.dfp_ad_unit_path),a.dfp_sizes&&(t=a.dfp_sizes),a.dom_id&&(i=a.dom_id))}catch(e){y.err("DefineOverride",e)}t&&(!y.isarr(t)||t.length)||(w.ctr("dsea"),t=[1,1]);r=AdBridg.gpt.defineSlot(e,t,i);if(!r)return r;r.addService(AdBridg.gpt.pubads()),M(r);var n=G(t,e,i),o=n.join(","),s=new u({dom_id:i,gpt_slot:r,gpt_sizes:o,imp_ctr:(q[i]||0)+1});s.restrictSizesTo(n),h[i]=o;a=400,n=_.libSettings().lazy;return"number"==typeof(n="function"==typeof n?n(s,r,i,_.libSettings()):n)&&(a=n),n&&(y.log("Requiring lazy: ",i,"distance=",a),s.set("lock.lazy",1),n=_.libSettings().lazy_measurement_filter,y.dom(i,a,0,function(){y.logl("wf",j,"unit triggered lazy load",s.alias,s.get("dom_id")),s.set("lock.lazy",!1),T?AdBridg.serve():AdBridg.display(i)},n,_.libSettings().lazy_compatible_collapse)),f.push(s),y.log(j,"Defined slot: ",e,i,o),x.trigger("gpt.define",s,r,e,t,i),_.libSettings().allow_serve_from_display&&v[i]&&(y.logl("wf",j,"triggering serve from define after display",i),AdBridg.serve()),T||(t="function"==typeof(t=_.libSettings().nonsra_poll)?t():t)&&(y.log("Nonsra poll for DOM ids"),Y(i)),r}),window.AdBridg.defineOutOfPageSlot=y.wrapAsync(function(e,t){var i=AdBridg.gpt.defineOutOfPageSlot(e,t);if(!i)return i;i.addService(AdBridg.gpt.pubads()),M(i);var r=new u({dom_id:t,gpt_slot:i,gpt_sizes:""});return f.push(r),y.log(j,"Defined OOP slot: ",e,t),x.trigger("gpt.define",r,i,e,!1,t),_.libSettings().allow_serve_from_display&&v[t]&&(y.logl("wf",j,"triggering serve from defineOOP after display",t),AdBridg.serve()),i});var K={},Y=function(t){K[t]=K[t]||{ct:0,tx:-1};var i=K[t];clearTimeout(i.tx),10!==i.ct?(i.ct+=1,i.tx=setTimeout(y.wrapAsync(function(){if(!v[t]){var e=!!document.getElementById(t);if(y.log("Nonsra display poll #"+i.ct+": ",t,"; display received =",!!v[t],"; dom exists =",e),e)return y.log("Nonsra issuing display from poll",t),void AdBridg.display(t);Y(t)}}),1e3)):y.log("Nonsra display poll is giving up on",t)};window.AdBridg.display=y.wrapAsync(function(e,t,i){if(i?(AdBridg.defineSlot(e,t,i),AdBridg.serve()):i=e,v[i]=!0,y.logl("wf",j,"display received",i),_.libSettings().allow_serve_from_display&&f.length&&(y.logl("wf",j,"triggering serve from display",i),AdBridg.serve()),I=!0,!T){f.length&&(m=m.concat(f),f=[]);for(var r=m.length-1;0<=r;--r){var n,o=m[r].get("dom_id");v[o]&&((n=m.splice(r,1)[0]).get("gpt_sizes")?f.push(n):y.logl("Ignoring display for unit with no sizes",o))}return f.length?(y.logl("wf",j,"nonsra issuing serve",f.length),void te(function(r,n){le("dn",function(){r?r.eachUnit(function(e){y.logl("wf",j,"display resolved",e.get("dom_id"),"auction=",r),AdBridg.gpt.display(e.get("dom_id")),x.trigger("gpt.request_nosra",e.get("dom_id"))}):(y.logl("wf",j,"display resolved",n," as passthrough"),AdBridg.gpt.display(n),x.trigger("gpt.request_nosra",n));var e=m.length;if(e){y.logl("wf",j,"nonsra units queued: ",e);for(var t=e-1;0<=t;--t){var i=m[t].get("dom_id");if(v[i]){setTimeout(function(){AdBridg.display(i)},0);break}}}})})):void y.logl("wf",j,"nonsra display waiting on definition/serve")}le("ds",function(){Z(),y.logl("wf",j,"display resolved",i),AdBridg.gpt.display(i)}),O()}),window.AdBridg.refresh=y.wrapAsync(function(e,t,i){if(e=e||AdBridg.gpt.pubads().getSlots(),_.libSettings().allow_serve_from_refresh&&f.length){for(var r=e.length-1;0<=r;r--)for(var n=f.length-1;0<=n;n--)e[r]===f[n].get("gpt_slot")&&e.splice(r,1);if(AdBridg.serve(),!e.length)return}var o,a,s,d,c;x.trigger("gpt.filter_refresh",e,t),e.length&&(o=e.length,e=L("RF",e,!0),y.logl("wf",j,"refresh: ",o,"slots requested; ",o-e.length,"filtered out;",e.length,"remaining."),e.length?(a=new p,!(s=!0)!==i&&"no_auction"!==_.libSettings().refresh||(s=!1),d=[],c=[],y.each(e,function(e){try{P(e)}catch(e){return y.err("Failed to clear slot: ",e)}var t=e.getSlotElementId();M(e);var i,r,n=h[t]||"";S[t]&&(r=(i=S[t].adb||S[t].gpt)&&"0x0"!==i&&i.match(/^\d{2,}x\d{2,}\d/),y.logl("sz","Refresh size restriction for",t,"=",i,"; is_valid=",r),r&&(n=i));t=new u({dom_id:t,gpt_slot:e,gpt_sizes:n,is_refresh:!0,imp_ctr:(q[t]||0)+1});s&&(_.configureUnit(t),y.logl("sz","Refresh restricting sizes to ",n),t.restrictSizesTo(n.split(","))),t.hasBidReqConf()?a.addUnit(t):(c.push(e.getAdUnitPath()+" / "+e.getSlotElementId()),d.push(e))}),d.length&&(y.log("Refreshing",d.length,"non-bid units: ",c),le("rn",function(){Z(),R(d),y.log(j,"GPT RF Batch: ",d.length);var e=_.libSettings("gpt_refresh_options",t);e&&(t=e),x.trigger("gpt.before_request",d,t,!0),AdBridg.gpt.pubads().refresh(d,t),x.trigger("gpt.request_passthrough",d,!0)})),a.hasUnit()&&(E.push(a),a.execute(C(null,t,!0)))):o&&y.err("RF units cancelled"))});var V={},H=y.wrapAsync(function(e){var t=String(e.message||e.data);if("string"==typeof e.data)try{var i=JSON.parse(e.data);if("Prebid Request"===i.message)return void AdBridg.render({safeframe:!0,source:e.source,origin:e.origin,pbuc:!0},i.adId)}catch(e){}var r=t.substr(0,9),t=t.substr(10);if("adbsrverr"===r)return y.err("Safeframe error: ",t);if("adbsrvlog"===r)return y.log("Safeframe: ",t);if("adbvidend"===r)return x.trigger("bid.outstream_end",t);if("adbductag"!==r)return"adbconfbl"===r?x.trigger("adb.confiant_block_sf",t):"adbsrvreq"===r?V.hasOwnProperty(t)?y.err("SafeframeDupe:",t):void AdBridg.render({safeframe:!0,source:e.source},t):void 0;r=JSON.stringify((t=ne(r=t),r={},t&&(t=t.pbjsBid.adserverTargeting,r.targetingMap=t,r.hbPb=t.hb_pb,r.size=t.hb_size),r));e.source.postMessage("adbductape:"+r,e.origin)});window.addEventListener?window.addEventListener("message",H,!1):document.attachEvent&&window.attachEvent("onmessage",H);function J(e,t,i){return e?(e=e.replace(/\$\{AUCTION_PRICE\}/g,t),i&&i.clickThrough?e.replace(/\$\{CLICKTHROUGH\}/g,i.clickThrough):e):""}window.AdBridg.render=y.wrapAsync(function(t,e,i){var r=z[e],n=!1;if(r||(n=!0,r=ne(e))){n?y.log("Unit ",r.config.unit.alias," rendering ",r.width+"x"+r.height," [override] creative from ",r.config.bidder_name," BR ",r.config.id):(c=r._origin?"(pooled bid from "+r._origin.config.unit.unique_id+")":"",y.log("Unit ",r.config.unit.alias," rendering ",r.width+"x"+r.height," creative from ",r.config.bidder_name,c," BR ",r.config.id));var o=r.config.unit.get("dom_id"),a=y.dom_invisible(o);W("AR",o,r.config.bidder_id),a&&y.log("AdBridg render detected invisible container at time of render:",o,a);var s={config:r.config.unit.alias,bidder:r.config.bidder_name,size:r.width+"x"+r.height,extras:r.extras,dom_id:o};n&&(s.override=1);var d=JSON.stringify(s);r.creative=J(r.creative,r.cpm,i),r.creative_url=J(r.creative_url,r.cpm,i),r.config.unit.bidRendered(r,s);var c=0,a=i&&i.pbuc;if(t.pbuc)r.creative&&(r.creative="\x3c!-- AdBridg Delivery PBUC (SF): "+d+" --\x3e"+r.creative),t.source.postMessage(JSON.stringify({message:"Prebid Response",ad:r.creative,adUrl:r.creative_url,adId:e,width:r.width,height:r.height}),t.origin),c=1;else if(t.safeframe&&t.source&&t.source.postMessage){var u=_.libSettings().pmmutatefn;if(!r.creative)return y.err("AD1245F Safeframe render fail: no creative");var p={ad:"\x3c!-- AdBridg Delivery (SF): "+d+" --\x3e"+r.creative},l=JSON.stringify(p);"function"==typeof u?p=u(r,p):x.trigger("adb.confiant_pmmutate",r,p);c=JSON.stringify(p)!==l?2:3;t.source.postMessage("adbsrvad:"+JSON.stringify(p),"*")}else if(r.creative){i=_.libSettings().pubrenderfn,u="pubrenderfn",l={};x.trigger("adb.get_ff_renderer",l);p=Object.keys(l);p.length&&(i?y.log("Module renderers ignored; dbmock pubrenderfn set"):(u=p[0],1<p.length&&y.err("More than one module provided renderer; using",u,"of",JSON.stringify(p)),i=l[u]));l=!1;"function"==typeof i&&(t.write("\x3c!-- AdBridg Delivery (ER="+u+"): "+d+" --\x3e"),i(t,r.creative,r.config.bidder_name,r.width,r.height,r,a)?(l=!0,y.log("Creative rendered externally"),c=a?"B":4):y.log("External render skipped")),l||(t.write("\x3c!-- AdBridg Delivery: "+d+" --\x3e"),t.write(r.creative),t.close(),c=a?8:5)}else if(r.creative_url)try{var g=y.iiframe();g.width=r.width,g.height=r.height,g.style.display="inline",g.style.overflow="hidden",g.src=r.creative_url,t.body.appendChild(document.createComment("AdBridg Delivery: "+d)),t.body.appendChild(g),c=a?9:6}catch(e){return y.err("AD1245F Delivery failure from ",r.config.bidder_name," / ",r.config.bidder_unit_id,e)}else{if("function"!=typeof r.render)return y.err("AD1245F No creative from ",r.config.bidder_name," / ",r.config.bidder_unit_id);r.rawbid.adUnitCode=document.getElementById(o).children[0].id,document.getElementById(r.rawbid.adUnitCode).innerHTML="";try{r.render(),y.rec("winner.render:"+r.id)}catch(e){return y.err("AD1245F Renderer",e)}c=a?"A":7}w.bidRendered(r,c,n);var f,m,h=r.resize_pad_top||!1,b=document.getElementById(o);if(b.style.textAlign="center",(m=(f=b).getElementsByClassName("adbridg-dyn-pad")).length&&y.each(m,function(e){e.parent.removeChild(e)}),h&&((m=y.prepend(f,"span")).className="adbridg-dyn-pad",m.innerHTML="&nbsp;",m.style="display:block;width:1px;height:"+h+"px;overflow:hidden;",(m=document.createElement("span")).className="adbridg-dyn-pad",m.innerHTML="&nbsp;",m.style="display:block;width:1px;height:"+h+"px;overflow:hidden;",f.appendChild(m)),t.safeframe)try{var v=b.getElementsByTagName("iframe");y.each(v,function(e){e.contentWindow===t.source&&(y.logl("RS","RS SF element: ",e.id,r.width,r.height),y.resize_element(e,r.width,r.height),String(e.parentNode.id).match(/google_ads_iframe.*container/)&&(y.logl("RS","RS SF parent: ",e.parentNode.id,r.width,r.height),y.resize_element(e.parentNode,r.width,r.height)))})}catch(e){y.err("Frame resize fail: ",e)}else t.defaultView&&t.defaultView.frameElement&&(t.defaultView.frameElement.width=r.width,t.defaultView.frameElement.height=r.height),y.logl("RS","RS iframe: ",r.width,r.height),y.resize_iframe(window,t,r.width,r.height);_.libSettings().refresh_keep_size&&(S[o]||(S[o]={gpt:"",adb:""}),S[o].adb=s.size,y.log("SIZE REFRESH KEEPING ADB: ",o,S[o]));o=_.libSettings().post_render;"function"==typeof o&&o(r)}else y.err("AD1245F Render failed for ID ",e)}),window.AdBridg.getSizes=y.wrapAsync(function(e){var t=[];return y.each(e,function(e){t.push([e.viewport,e.sizes])}),ye(t)});var X=[],Q=(Q=y.qs("adb_restrict_size"))&&Q.split(",");window.AdBridg.sizeMapping=y.wrapAsync(function(){var e,n=[],o=AdBridg.gpt.sizeMapping(),a={addSize:y.wrapAsync(function(e,t){if(Q){for(var i=t.length-1;0<=i;--i){var r=t[i].join("x");0<=Q.indexOf(r)&&(y.log("adb_restrict_size - Size ignored",r),t.splice(i,1))}if(!t.length)return a}return o.addSize(e,t),n.push([e,t]),a}),build:y.wrapAsync(function(){return e=o.build(),X.push({gpt_map:e,sizes:n}),e})};return a}),window.AdBridg.useSizeMapping=y.wrapAsync(function(e,t,i){var r,n=!1,o=e.getSlotElementId(),a=e.getAdUnitPath();for(e.defineSizeMapping(t),r=X.length-1;0<=r;--r)if(X[r].gpt_map===t){n=X[r].sizes;break}if(n){var s=ye(n),d=G(s,a,o),s=d.join(",");h[o]=s;var c=i||!1;if(!c)for(r=f.length-1;0<=r;--r)if(f[r].get("gpt_slot")===e){c=f[r];break}if(!c)return y.err("No unit for size map: ",a,o);c.set("gpt_sizes",s),c.restrictSizesTo(d),h[o]?y.log("Applied size mapping to ",o," / ",a,": ",s):(b[o]=1,y.log("Excluding unit ",o," / ",a," because it has no valid sizes"))}else y.err("Size mapping not found: ",a,o)}),window.AdBridg.resetInternals=function(){};var $=!(window.AdBridg.destroySlots=function(e){e=e||AdBridg.gpt.pubads().getSlots();var i=[];return y.each(e,function(e){var t;e&&(t=e.getSlotElementId(),delete q[t],delete h[t],delete S[t],delete b[t],delete F[t],delete v[t],y.undom(t),x.trigger("gpt.destroy",e,t),i.push(t))}),y.log("Destroyed slots: ",i),AdBridg.gpt.destroySlots(e)}),Z=function(){var e;$||($=!0,"function"==typeof(e=_.libSettings().before_gpt)&&y.wrapAsync(e)(),x.trigger("gpt.before_enable_services"),AdBridg.gpt.enableServices(),x.trigger("gpt.after_enable_services"))},ee=!1,te=y.wrapAsync(function(e){y.logl("wf",j,"serve called with",f.length,"pending units");var t=!1;Z();for(var i=!1,r=0;f.length>r;){var n=f.shift(),o=n.get("lock.lazy"),a=n.get("lock.batch");if(o||a)y.logl("wf",j,"serve skipped ("+(o?"lazy":"batch")+")",n.alias,n.get("dom_id")),r+=1,f.push(n);else{o=n.get("dom_id");if(b[o]||!W("AS",o))if(_.configureUnit(n),n.hasBidReqConf()){if(l){var s=g.indexOf(n.id);if(0<=s){var d=!1;if(l.eachUnit(function(e){var t,i,r;e.id===n.id&&(d=!0,g.splice(s,1),y.log("Proxy into preload ",n.alias),t=n.get("gpt_slot"),i=n.get("dom_id"),r=h[i]||n.get("gpt_sizes")||"",e.set({dom_id:i,gpt_slot:t,gpt_sizes:r}),e.restrictSizesTo(r.split(",")),x.trigger("unit.pre_attach",e))}),d){i=!0;continue}}}(t=t||new p).addUnit(n)}else T?A.push(n.get("gpt_slot")):(R([n.get("gpt_slot")]),y.thread(e)(!1,n.get("dom_id")));else y.err("Slot rejected before auction, element hidden:",o)}}(t||l)&&_.libSettings().gpt_keep_oop&&A.length&&(y.log("Batching passthrough units with auction units"),k=k.concat(A),A=[]),t&&(E.push(t),t.execute(C(e)),t=!1),i&&!ee&&(ee=!0,he(C())),O()}),ie=!1;window.AdBridg.serve=function(e){if(clearTimeout(ie),T){y.logl("wf",j,"queuing serve");var t=_.libSettings().batch_delay;if(0===(t="function"==typeof t?t(f):t))return y.log("Starting auctions ASAP."),te(e);t=t||100,ie=setTimeout(function(){te(e)},t)}else for(var i=f.length-1;0<=i;--i){var r=f[i].get("dom_id");if(v[r]){setTimeout(function(){AdBridg.display(r)},0);break}}};function re(e){for(var t,i,r=E.length-1;0<=r&&!(t=(i=E[r]).findUnit(e));--r);return!!(t=!t&&l?(i=l).findUnit(e):t)&&{auction:i,unit:t}}var ne=function(e){for(var t=E.length-1;0<=t;--t){var i=E[t].getBid(e);if(i)return i}return!1},oe=y.wrapAsync(function(t){var e=t.slot.getSlotElementId();!t.isEmpty&&W("RE",e)&&y.log("Slot rendered from GPT, but element hidden by CSS:",e);try{r=t.slot,y.log("Unlocked slot: ",r.getSlotElementId()),F[r.getSlotElementId()]=!1,P(r)}catch(e){y.err("Unlock failed")}var i=q[e];x.trigger("gpt.render_raw",t,i);var r=re(function(e){return e.get("gpt_slot")===t.slot});if(_.libSettings().refresh_keep_size&&t.size&&2===t.size.length&&(S[e]||(S[e]={gpt:"",adb:""}),S[e].gpt=t.size.join("x")),r){if(!r.auction)return y.err("AUQ",t.slot.getAdUnitPath(),t.slot.getSlotElementId());AdBridg.gpt===window.googletag?w.gptRendered(r.auction,r.unit,t):w.enhRendered(r.auction.instancectr,r.unit.id,t),x.trigger("gpt.render",r.unit,t,i),y.qdusp()}else x.trigger("gpt.render_pt",!1,t,i)}),ae=y.wrapAsync(function(t){x.trigger("gpt.viewed_raw",t);var e=re(function(e){return e.get("gpt_slot")===t.slot});if(e){w.gptViewed(e.auction,e.unit);try{var i=_.libSettings().post_view;"function"==typeof i&&i(t,e.unit)}catch(e){y.err("PostView fail",e)}x.trigger("gpt.viewed",t.slot,e.unit);e=t.slot.getSlotElementId();W("VE",e)&&y.log("Slot viewed from GPT, but element hidden by CSS:",e)}}),se=[],de={},ce=!1;window.AdBridg.lock=function(e){if(de[e])return de[e]=null,y.log("-== GPT lock already cleared: ",e);y.log("-== GPT locked by: ",e),se.push(e)},window.AdBridg.unlock=function(e,t){for(var i=!1,r=0;r<se.length;++r)if(se[r]===e){y.log("-== GPT lock cleared: ",e),se.splice(r,1),i=!0;break}i||t||(de[e]=!0,y.log("-== GPT unrecognized lock cleared: ",e)),ge()};var ue,pe=[],le=function(e,t){pe.push({n:e,f:y.wrapAsync(t)}),ge()},ge=function(){if(!se.length&&!ce){for(ce=!0;pe.length;)pe.shift().f();setTimeout(function(){ce=!1,pe.length&&ge()},0)}},fe=0,e=function(){AdBridg.cmd.unshift(function(){window.AdBridg.lock("window.focus"),fe<=99&&(fe+=1),w.meta("wb",fe)})},H=function(){AdBridg.cmd.push(function(){window.AdBridg.unlock("window.focus",!0),w.meta("wb",0)})};window.addEventListener?(window.addEventListener("blur",e),window.addEventListener("focus",H)):window.attachEvent&&(window.attachEvent("onblur",e),window.attachEvent("onfocus",H)),y.isdebug()&&(AdBridg.auctions=E,AdBridg.utils=y);var me=y.wrapAsync(function(){clearTimeout(ue);var e={delay:!1};if(x.trigger("adb.init_check",e),"number"!=typeof e.delay){x.trigger("adb.init"),AdBridg.gpt.pubads().addEventListener("slotRenderEnded",oe),AdBridg.gpt.pubads().addEventListener("impressionViewable",ae),d=!0;var t=_.libSettings().initfn;for(t&&AdBridg.cmd.push(t);c.length;){var i=c.shift();AdBridg.cmd.push(i)}}else ue=setTimeout(me,e.delay)});window.AdBridg.lazy=function(e,t,i,r){"function"==typeof i&&(r=i,i=0),y.dom(e,t,i,r)},y.log("First execution."),_.afterConsent(function(e){if(!e||!e.gdprApplies||e.consentString){e=_.libSettings().preload&&_.libSettings().preload()||[];if(e.length){function t(i){function r(e){function t(e){2===e.length&&1<e[0]&&1<e[1]?i.push(e):y.err("Invalid preload size: ",e)}var i=[];return y.isarr(e)&&(y.isarr(e[0])?y.each(e,t):t(e)),i}var n=r(i.size||[]);return function(){var t,e=AdBridg.defineSlot(i.gpt_path,n,i.dom_id);y.isarr(i.size_map)&&(t=AdBridg.sizeMapping(),y.each(i.size_map,function(e){t.addSize(e.viewport,r(e.sizes))}),t=t.build(),e.defineSizeMapping(t),AdBridg.useSizeMapping(e,t)),AdBridg.serve()}}for(var i=AdBridg.cmd.length;0<=i;i--){var r=AdBridg.cmd[i];r&&r.gpt_path&&AdBridg.cmd.splice(i,1,t(r))}e&&e.length&&(l=new p,y.each(e,function(e){if(e=parseInt(e),y.log("Preloading",e),e){var t=new u;if(_.configureUnit(t,e),!t.hasBidReqConf())return y.err("Preload bad id",e);g.push(e),l.addUnit(t)}}),l.hasUnit()&&(y.log("Preload kickoff",l),l.execute(y.wrapAsync(function(e){y.log("Preload complete"),o&&o(e)}))))}}});var he=function(e){l.isDone()?e(l):o=e};_.afterConsent(function(){AdBridg.gpt.cmd.push(function(){y.log("Initializing. SRA is",(T?"enabled":"disabled")+"."),T&&(AdBridg.gpt.pubads().enableSingleRequest(),AdBridg.gpt.pubads().disableInitialLoad()),me()})});function be(){return E}y.wrapAsync(function(){for(w.init(),AdBridg.cmd.push=AdBridg.cmd.unshift=function(t){if(y.qs("adb_critfail"))throw new Error("Simulating critical failure");if("function"==typeof _.libSettings().cmd_override)try{var e=_.libSettings().cmd_override(t);if(!e)return void y.log("AdBridg command cancelled",t);t=e}catch(e){y.err("CmdOverrideFail",e)}var i,r;if("object"==typeof t&&((t=y.copy(t)).targeting&&(i=t.targeting,delete t.targeting,y.log("Publisher targeting set queued:",i),r=y.genID("gpt_targeting_"),AdBridg.lock(r),x.trigger("pub.set_targeting",i),AdBridg.gpt.cmd.push(function(){y.each(i,function(e,t){AdBridg.gpt.pubads().setTargeting(t,e)}),y.log("Publisher targeting set complete:",i),AdBridg.unlock(r)})),t.config&&(_.proc(t.config),delete t.config),!t.gpt_path&&t.events&&(y.each(t.events,function(e,t){x.on(t,e)}),delete t.events),t.action&&(y.log("Publisher event triggered: ","pub."+t.action),x.trigger("pub."+t.action),delete t.action),!Object.getOwnPropertyNames(t).length))return;if(d){if("object"==typeof t&&(t.gpt_path||t.length))try{y.log("Initialization command object processing:",t);function n(n){AdBridg.gpt.cmd.push(function(){var i,e;if(n.oop)i=AdBridg.defineOutOfPageSlot(n.gpt_path,n.dom_id);else if((i=AdBridg.defineSlot(n.gpt_path,n.size||[1,1],n.dom_id))&&n.size_map){for(var t=AdBridg.sizeMapping(),r=0;r<n.size_map.length;r++)t=t.addSize(n.size_map[r].viewport,n.size_map[r].sizes);t=t.build(),i.defineSizeMapping(t),AdBridg.useSizeMapping(i,t)}i&&n.targeting&&y.each(n.targeting,function(e,t){i.setTargeting(t,e)}),i&&n.events&&(n.events["gpt.defined"]&&n.events["gpt.defined"](i),(e=function(t,e){n.events[t]&&AdBridg.gpt.pubads().addEventListener(e,function(e){e.slot===i&&n.events[t](i,e)})})("gpt.rendered","slotRenderEnded"),e("gpt.viewed","impressionViewable"),e("gpt.visibilityChanged","slotVisibilityChanged")),i&&AdBridg.display(n.dom_id)})}if(t.length)for(var o=0;o<t.length;++o)n(t[o]);else n(t);t=function(){AdBridg.serve()}}catch(e){y.err("CmdObj fail",e)}"function"==typeof t&&setTimeout(function(){try{t.call()}catch(e){y.err("AdBridg.cmd had error: ",String(t).substr(0,30),e)}},0)}else c.push(t)};AdBridg.cmd.length;){var e=AdBridg.cmd.shift();AdBridg.cmd.push(e)}n(be)})()}}function ve(){}function ye(e){var t=y.vp(),r=t.w,n=t.h,o=!1,a=[];for(i=e.length-1;0<=i;--i){var s=e[i][0];if(r>=s[0]&&n>=s[1]){if(o){if(o[0]>s[0])continue;if(o[0]===s[0]&&o[1]>s[1])continue}o=s,a=e[i][1]}}return a}},{"../analytics.js":15,"../auction.js":16,"../config.js":17,"../mockprebid.js":20,"../modules.js":21,"../unit.js":34,"../utils.js":35}],20:[function(e,t,i){var r=e("./utils");t.exports=function(a){for(window.pbjs.renderAd=function(e,t,i){r.log("PBJS renderAd override",t,i),(i=i||{}).pbuc=!0,window.AdBridg.render(e,t,i)},window.pbjs.que.push=AdBridg.cmd.push;window.pbjs.que.length;){var e=window.pbjs.que.shift();AdBridg.cmd.push(e)}window.pbjs.getBidResponses=function(){var t=[];return r.each(a(),function(e){t=t.concat(e.toPrebid().bidsReceived)}),t},window.pbjs.getAllWinningBids=function(){var t=[];return r.each(a(),function(e){t=t.concat(e.toPrebid().winningBids)}),t},window.pbjs.getAllPrebidWinningBids=function(){var t=[];return r.each(a(),function(e){t=t.concat(e.toPrebid().prebidWinningBids)}),t},window.pbjs.getAdserverTargeting=function(){var i={};return r.each(a(),function(e){r.each(e.toPrebid().prebidWinningBids,function(t){i[t.adUnitCode]={},r.assign(i[t.adUnitCode],t.adserverTargeting),r.each(Object.keys(t.adserverTargeting),function(e){i[t.adUnitCode][e+"_"+t.bidder]=t.adserverTargeting[e]})})}),i},window.pbjs.getBidResponsesForAdUnitCode=function(t){var i=[];return r.each(a(),function(e){r.each(e.toPrebid().bidsReceived,function(e){e.adUnitCode===t&&i.push(e)})}),i},window.pbjs.getHighestCpmBids=function(){var t=[];return r.each(a(),function(e){e=e.toPrebid().bidsReceived.reduce(function(e,t){return e.cpm===t.cpm?e.timeToRespond<t.timeToRespond?e:t:e.cpm<t.cpm?t:e});t.push(e)}),t},window.pbjs.findBidByAdId=function(e){for(var t=null,i=0;i<a().length;i+=1){for(var r=a()[i].toPrebid().bidsReceived,n=0;n<r.length;n+=1){var o=r[n];if(o.adId===e){t=o;break}}if(t)break}return t}}},{"./utils":35}],21:[function(e,t,i){function r(e){n.push(e)}var l=e("./utils.js"),n=[],o=["gpt.after_enable_services","consent.check_complete"],a={},s={},d={on:function(e,t){l.isarr(e)||(e=e.split(",")),l.each(e,function(e){a[e]?t(e):(s[e]||(s[e]=[]),s[e].push(t))})},trigger:null};d.trigger=i.trigger=l.wrapAsync(function(e){var t=arguments,i=(s[e]||[]).concat(s["*"]||[]);l.each(i,l.wrapAsync(function(e){e.apply(null,t)})),-1<o.indexOf(e)&&(a[e]=1)});var c=!1;l.onerr(l.wrapAsync(function(){return c?(console&&console.log("AdBridg nested module errors"),void l.pixel("https://adspsp.com/$CUSTOMER_PUBLIC_ID$/500/2/1/?e=errnest")):(c=!0,i.trigger("error",arguments),void(c=!1))})),i.on=l.wrapAsync(function(e,t){d.on(e,t)}),i.setup=function(e){0};try{r(new(e("./modules/icu.js"))({sample:.02,tick_ms:30,watch_gpt:!0,modify_dom_id:function(e){return e.replace(/^(fg_ldr_search).*$/,"$1")}},d)),r(new(e("./modules/dockable.js"))({detect_partial:!0,render_check:function(e,t){t=t.slot.getSlotElementId(),t=document.getElementById(t);return 18===e.id&&(120<l.where(t).c.h?(l.log("Docking leaderboard skip: ad too big"),!1):(l.log("Docking leaderboard activated"),!0))},setup:function(e,t,i,r,n){l.log("dock el_where: ",t,t.c.h),document.getElementById(e)&&(n.sz||(n.sz=document.createElement("div"),n.sz.id="adb_lb1__sizer",n.sz.setAttribute("class","ad-leaderboard-header"),n.sz.style="width: "+t.c.w+"px;height: "+t.c.h+"px;opacity: 0;display: none;"),n.close||(n.close=document.createElement("div"),n.close.style=["display: none","line-height: 19px","z-index: 101","cursor: pointer","background: rgba(44,62,80,.6)","color: rgb(255, 255, 255)","text-align: center","position: absolute","width: 20px","height: 20px","right: 0px","font-weight: bolder","font-family: monospace"].join(";"),n.close.id="converted_adhesion_close_btn",n.close.innerText="x",n.close.addEventListener("click",r)))},get_max_height:function(e,t,i){return 120},get_expiry_ms:function(){return 1e4},dock:function(e,t,i){e=document.getElementById(e);e&&(e.style.position="fixed",e.style.zIndex="100",e.style.backgroundColor="#00000080",e.style.top="0px",e.style.left=t.c.l+"px",i.close.style.display="block",i.sz.style.display="block",i.sz.parentNode||(e.nextElementSibling?e.parentNode.insertBefore(i.sz,e.nextElementSibling):e.parentNode.appendChild(i.sz)),i.close.parentNode||(e.children.length?e.insertBefore(i.close,e.children[0]):e.appendChild(i.close)))},undock:function(e,t,i){e=document.getElementById(e);e&&(e.setAttribute("style","text-align: center; width: "+t.c.w+"px; height: "+t.c.h+"px"),e.setAttribute("class","ad-leaderboard-header"),i.close.style.display="none",i.sz.style.display="none")},destroy:function(e,t,i){i.close.parentNode&&i.close.parentNode.removeChild(i.close),i.sz.parentNode&&i.sz.parentNode.removeChild(i.sz)}},d)),r(new(e("./modules/emit.js"))({"gpt.render":function(e,t,i){function r(e){return JSON.stringify(e,2)}var n=t.get("dom_id"),o=i.slot,a=t.alias,s=i.slot.getAdUnitPath(),d=i.advertiserId+"."+i.creativeId+"."+i.sourceAgnosticCreativeId;if(AdBridg.global("adbFrequencyCap")&&"fgAdhesion"==n){var c="adb_adhesion",u=l.cr("adb_ts"),i=parseInt(l.cr(c));if(!u)return;if(3<i){if(!(24<(Date.now()-u)/1e3/60/60))return void l.log("Adhesion refresh frequency cap reached");l.log("Adhesion refresh frequency cap expired"),l.cw(c,1),l.cw("adb_ts",Date.now())}else l.log("Adhesion refresh frequency cap updated"),l.cw(c,i+1)}l.log("Reload setup check in render event:",r({auction:a,dom_id:n,ad_unit_path:s,timeout:3e4}));var p=!1;t.ancReload=function(e){p||(p=!0,l.log("Reload scheduled from ",e,":",r({auction:a,dom_id:n,ad_unit_path:s,timeout:3e4})),"AdBridg"==e&&l.err("Reload track no GPT view",r({auction:a,dom_id:n,ad_unit_path:s,timeout:3e4,creative:d})),setTimeout(function(){l.log("Reload queuing lazy load check:",r({auction:a,dom_id:n,ad_unit_path:s,timeout:3e4})),l.dom(n,200,0,function(){l.log("Reload executing:",r({auction:a,dom_id:n,ad_unit_path:s,timeout:3e4})),AdBridg.refresh([o])})},3e4))},l.dom(n,.5,1e3,function(){p||(l.log("Reload AdBridg view event; triggering 3sec extra: ",r({auction:a,dom_id:n,ad_unit_path:s})),setTimeout(function(){t.ancReload&&t.ancReload("AdBridg")},3e3))}),18===t.id&&l.log("OLD DOCKABLE REMOVED")},"gpt.viewed":function(e,t,i){i.ancReload&&i.ancReload("GPT")}},d)),r(new(e("./modules/dombuilder.js"))({elements:[{active:{url:"wc\\.rootsweb\\.com(\\/?)(\\?[^\\/]+)?$"},type:"sticky_sidebar",position:"right",viewport:{min:1650},dock_threshold:{bottom:97},style:{top:"600px"},max_ads:6,attributes:{"adbridg-ad-class":"sticky_sidebar"},slot:{style:{top:"100px","padding-bottom":"40px"}}},{type:"adhesion",active:{url:".rootsweb.com"},viewport:{min:768},behaviour:{destroy:{close_btn:{pageview:!0},pageview:!0}},id:"bottomSlot-container",style:{bottom:"0px"},slot:{id:"bottomSlotAdhesion",attributes:{class:"ad-wrapper"},style:{height:"90px",width:"728px",margin:"auto","text-align":"center",position:"relative"}}},{type:"adhesion",active:{url:".rootsweb.com"},viewport:{max:767},behaviour:{destroy:{close_btn:{pageview:!0},pageview:!0}},id:"bottomSlot-container",style:{bottom:"0px"},slot:{id:"bottomSlotAdhesion",style:{height:"50px",width:"320px",margin:"auto","text-align":"center",position:"relative"}}},{type:"adhesion",active:function(){return!!AdBridg.global("enableAdhesion")},viewport:{min:768},behaviour:{destroy:{close_btn:{pageview:!0},pageview:!0}},css_templates:[{active:!0,container:{width:"auto",bottom:"0px",left:"50%",transform:"translateX(-50%)"}}],id:"bottomSlot-container",slot:{id:"fgAdhesion",attributes:{class:"ad-wrapper"},style:{height:"90px",width:"728px",margin:"auto","text-align":"center",position:"relative"}}}]},d)),r(new(e("./modules/amazon.js"))({no_ca:!0,use_pubcid:!0,init:{pubID:"3348",adServer:"googletag",bidTimeout:3e3}},d)),r(new(e("./modules/rhunt.js"))({},d)),r(new(e("./modules/confiantpb.js"))({loadCondition:function(){return-1!==window.location.hostname.indexOf("findagrave")},key:"MDm0g4ZhT4ICKskqdVRvwPd9wTw"},d)),r(new(e("./modules/pubcid.js"))({},d)),r(new(e("./modules/gamconfig.js"))({active:1,autostart:0,safeFrames:1,slots:[{dom_id:"div-bt_mrec",gpt_path:"/4802/Newspapers/300x250_3rdparty",size:[[300,250]]},{dom_id:"div-bt_leaderboard",gpt_path:"/4802/Newspapers/728x90_3rdparty",size_map:[{sizes:[320,50],viewport:[0,0]},{sizes:[728,90],viewport:[750,0]}]},{dom_id:"global-ldr-headerspot",gpt_path_builder:"/4802/FindAGraveNEW/fg_{{lib.pub.sizePathNameLeaderboard}}_top",size_map:[{sizes:[320,50],viewport:[0,0]},{sizes:[728,90],viewport:[768,0]}],targeting:{pos:"top"}},{dom_id:"global-ldr-footerspot",gpt_path_builder:"/4802/FindAGraveNEW/fg_{{lib.pub.sizePathNameLeaderboard}}_bottom",size_map:[{sizes:[320,50],viewport:[0,0]},{sizes:[728,90],viewport:[768,0]}]},{dom_id:"mem-ldr-headerspot",gpt_path_builder:"/4802/FindAGraveNEW/Memorials/fg_{{lib.pub.sizePathNameLeaderboard}}_mem_top",size_map:[{sizes:[320,50],viewport:[0,0]},{sizes:[728,90],viewport:[768,0]}],targeting:{pos:"top"}},{dom_id:"mem-ldr-footerspot",gpt_path_builder:"/4802/FindAGraveNEW/Memorials/fg_{{lib.pub.sizePathNameLeaderboard}}_mem_bottom",size_map:[{sizes:[320,50],viewport:[0,0]},{sizes:[728,90],viewport:[768,0]}],targeting:{pos:"bottom"}},{dom_id:"mem-mrc-topr",gpt_path:"/4802/FindAGraveNEW/Memorials/fg_300x250_mem",size:[[300,250]]},{dom_id:"mem-mrc-sidespot",gpt_path:"/4802/FindAGraveNEW/Memorials/fg_300x250_mem",size:[[300,250]]},{dom_id:"home-ldr-footerspot",gpt_path_builder:"/4802/FindAGraveNEW/fg_{{lib.pub.sizePathNameLeaderboard}}_hp{{lib.pub.hpPathBottom}}",size_map:[{sizes:[320,50],viewport:[0,0]},{sizes:[728,90],viewport:[768,0]}],targeting:{pos:"bottom"}},{dom_id:"home-mrc-side",gpt_path:"/4802/FindAGraveNEW/fg_300x250_hp",size:[[300,250]]},{dom_id:"cem-ldr-headerspot",gpt_path_builder:"/4802/FindAGraveNEW/Cemetery/fg_{{lib.pub.sizePathNameLeaderboard}}_cem_top",size_map:[{sizes:[320,50],viewport:[0,0]},{sizes:[728,90],viewport:[768,0]}],targeting:{pos:"top"}},{dom_id:"cem-ldr-footerspot",gpt_path_builder:"/4802/FindAGraveNEW/Cemetery/fg_{{lib.pub.sizePathNameLeaderboard}}_cem_top",size_map:[{sizes:[320,50],viewport:[0,0]},{sizes:[728,90],viewport:[768,0]}],targeting:{pos:"bottom"}},{dom_id:"cem-mrc-topr",gpt_path:"/4802/FindAGraveNEW/Cemetery/fg_300x250_cem",size:[[300,250]]},{dom_id:"cem-mrc-side",gpt_path:"/4802/FindAGraveNEW/Cemetery/fg_300x600_cem",size_map:[{sizes:[300,250],viewport:[0,0]},{sizes:[[300,600],[300,250],[160,600]],viewport:[768,0]}]},{dom_id:"memsrch-mrc-topr",gpt_path:"/4802/FindAGraveNEW/Memorials/fg_300x250_memsrch",size:[[300,250]]},{dom_id:"memsrch-mrc-side",gpt_path:"/4802/FindAGraveNEW/Memorials/fg_300x600_memsrch",size_map:[{sizes:"",viewport:[0,0]},{sizes:[[300,600],[300,250],[160,600]],viewport:[768,0]}]},{dom_id:"famous-mrc-side",gpt_path:"/4802/FindAGraveNEW/Famous/fg_300x250_fame",size:[[300,250]]},{dom_id:"famous-lmrc-side",gpt_path:"/4802/FindAGraveNEW/Famous/fg_300x600_fame",size_map:[{sizes:[300,250],viewport:[0,0]},{sizes:[[300,600],[300,250],[160,600]],viewport:[768,0]}]},{dom_id:"famous-sky-side",gpt_path:"/4802/FindAGraveNEW/Famous/fg_160x600_fame",size:[[160,600]]},{dom_id:"famous-ldr-headerspot",gpt_path_builder:"/4802/FindAGraveNEW/Famous/fg_{{lib.pub.sizePathNameLeaderboard}}_{{lib.pub.fameSpelling}}top",size_map:[{sizes:[320,50],viewport:[0,0]},{sizes:[728,90],viewport:[768,0]}],targeting:{pos:"top"}},{dom_id:"famous-ldr-footerspot",gpt_path_builder:"/4802/FindAGraveNEW/Famous/fg_{{lib.pub.sizePathNameLeaderboard}}_famebottom",size_map:[{sizes:[320,50],viewport:[0,0]},{sizes:[728,90],viewport:[768,0]}],targeting:{pos:"bottom"}},{dom_id:"mem-mrc-topspot",gpt_path:"/4802/FindAGraveNEW/Memorials/fg_300x250_mem",size:[[300,250]]},{dom_id:"mem-mrc-sidespot2",gpt_path:"/4802/FindAGraveNEW/Memorials/fg_160x600_mem",size:[[160,600]]},{dom_id:"mem-mrc-botspot",gpt_path:"/4802/FindAGraveNEW/fg_1x1",size:[[1,1]]},{dom_id:"rwwc-mrec-right3",gpt_path:"/4802/tgn.rootsweb.com/World_Connect/rwwc_300x250_right3",size:[[300,250]]},{dom_id:"rwwc-half-right2",gpt_path:"/4802/tgn.rootsweb.com/World_Connect/rwwc_300x600_right2",size:[[300,600]]},{dom_id:"rwwc-mrec-right1",gpt_path:"/4802/tgn.rootsweb.com/World_Connect/rwwc_300x250_right1",size:[[300,250]]},{dom_id:"rwwiki-ldr-bottom",gpt_path:"/4802/tgn.rootsweb.com/WikiPages/RW_Wiki_728x90_bottom",size:[[728,90]]},{dom_id:"rwwiki-ldr-top",gpt_path:"/4802/tgn.rootsweb.com/WikiPages/RW_Wiki_728x90_top",size:[[728,90]]},{dom_id:"rwsites-ldr-bottom",gpt_path:"/4802/tgn.rootsweb.com/websites/RW_Sites_728x90_bottom",size:[[728,90]]},{dom_id:"rwsites-ldr-top",gpt_path:"/4802/tgn.rootsweb.com/websites/RW_Sites_728x90_top",size:[[728,90]]},{dom_id:"rwmail-mrec-mid",gpt_path:"/4802/tgn.rootsweb.com/mailinglists/RW_ML_300x250",size:[[300,250]]},{dom_id:"rwmail-sky-left",gpt_path:"/4802/tgn.rootsweb.com/mailinglists/RW_ML_160x600",size:[[160,600]]},{dom_id:"rw-leftSlot",gpt_path:"/4802/tgn.rootsweb.com/RW_160x600_left",size:[[160,600]]},{dom_id:"bottomSlotAdhesion",gpt_path_builder:"/4802/{{lib.pub.rwgen_bottomSlotPath}}",size_map:[{sizes:[320,50],viewport:[0,0]},{sizes:[728,90],viewport:[768,0]}]},{dom_id:"bottomRightSlot",gpt_path_builder:"/4802/{{lib.pub.rwgen_bottomRightSlotPath}}",size:[[300,250]]},{dom_id:"rightSlot",gpt_path_builder:"/4802/{{lib.pub.rwgen_rightSlotPath}}",size:[[160,600]]},{dom_id:"topSlot",gpt_path_builder:"/4802/{{lib.pub.rwgen_topSlotPath}}",size:[[728,90]]},{dom_ad_class:"sticky_sidebar",gpt_path:"/4802/tgn.rootsweb.com/Sticky_Sidebar_Adbridg",size:[[300,250],[300,600],[160,600]]},{dom_id:"mem-exclusive",gpt_path:"/4802/FindAGraveNEW/Memorials/FlowersTab_Exclusive",size:[[300,250]]},{dom_id:"fgAdhesion",gpt_path_builder:"/4802/FindAGraveNEW/{{lib.pub.adhesionGAMPath}}",size:[[728,90]]},{dom_id:"global-mrc-sidespot",gpt_path:"/4802/FindAGraveNEW/fg_300x250_right",size:[[300,250]]}]},d))}catch(e){l.err("Module failed",e)}},{"./modules/amazon.js":22,"./modules/confiantpb.js":23,"./modules/dockable.js":24,"./modules/dombuilder.js":25,"./modules/emit.js":26,"./modules/gamconfig.js":27,"./modules/icu.js":28,"./modules/pubcid.js":29,"./modules/rhunt.js":30,"./utils.js":35}],22:[function(b,e,t){var v=b("../utils.js"),r=b("../config.js"),n=(e.exports=function(c,u){function p(e){var i=[],r=c.allowed_sizes;return v.each(e,function(e,t){if(r&&-1==r.indexOf(e))return v.log("Amazon unsupported size: ",e);e=e.split("x");e[0]=parseInt(e[0],10),e[1]=parseInt(e[1],10),i.push(e)}),i}var l={},g={},a={},f=!1,o=!v.qs("adb_enable_amzn")&&c.test;"function"==typeof o&&(o=o());var e=c.load_apstag;"function"==typeof e&&(e=e());var t=!1,i=!1,m=!1;if("function"==typeof r.libSettings().nogpt&&r.libSettings().nogpt()||v.qs("adb_nogpt"))return v.log("nogpt Disabling Amazon"),void(o=i=!(e=!1));function h(){if(t)return o;var n=c.init;return(n="function"==typeof n?n(r.libSettings()):n)?(t=!0,o?(v.log("Amazon disabled. Use ?adb_enable_amzn=1 to activate."),o):window.apstag?void(n.skip_init||r.afterConsent(function(e,t){var i=t&&t.uspString,r=i&&"1---"===t.uspString;if(i&&(!r||!c.skip_ccpa_default)&&(n.params=n.params||{},n.params.us_privacy=t.uspString,"Y"===t.uspString.substr(2,1)&&(f=!0,c.no_ca)))return o=!0,void v.log("Amazon disabled for CA",t.uspString);apstag.init(n),v.log("Amazon initialized:",n)})):(e||i||(v.err("Amazon library not found."),i=!0),o=!0)):(v.log("Amazon init bypassed."),!1)}o||!e||n()||(o=t=!0),u.on("unit.config",function(e,t){if(!h()){var i=t.get("dom_id"),r=t.get("gpt_slot");if(!i||!r)return v.log("Amazon skip",i,r);var n=r.getAdUnitPath()+"",r=c.get_slot_name?c.get_slot_name(n,i,r,t):(n.match(/([^\/]+)$/)||[""])[0];if(!r)return v.err("Amazon noname: ",r,i,n);r={slotID:i,slotName:r,sizes:g[i]||p(t.all_sizes)};if(c.use_pubcid&&window.PublisherCommonId&&window.PublisherCommonId.getId&&(t=window.PublisherCommonId.getId(),r.slotParams={"pubcid.org":[t]}),l[i]=r,v.log("Amazon slot configured",r,!!g[i]),c.pub_audiences&&!m){m=!0;function o(e){a=e,v.thread(function(){b("../analytics.js").meta("iA",a)})()}var a,s,i=c.pub_audiences,d=!1;if(u.on("gamkvp.getids",function(e,t){s&&!d&&(d=!0,t.push("iA"+s),v.log("Amazon Pub Audience gamkvp.getids",s))}),i.active&&!i.active())return v.log("Amazon PA: inactive"),s="n",void o("N");v.log("Amazon PA: active");i=i.record();if(!i)return v.log("Amazon PA: no email record"),s="n",void o("Z");i={hashedRecords:[{type:i.type,record:i.value}],optOut:f};apstag.rpa(i,v.wrapAsync(function(){o(f?"X":"Y"),s="y",v.log("Amazon PA: completed")}))}}}),u.on("unit.restrict_sizes",function(e,t,i){h()||(t=t.get("dom_id"),i=p(i),g[t]=i,(t=l[t])&&(v.log("Amazon slot resize",t,i),t.sizes=i))}),u.on("gpt.destroy",function(e,t,i){h()||(v.log("Amazon slot remove",i),delete l[i],delete g[i])}),u.on("unit.pre_attach",function(e,t){if(!h()){var i=t.get("dom_id"),r=l[i];if(!r)return v.log("Amazon preload mismatch",i);var n=t.auction,o="amazon."+t.id;n.lock(o),apstag.fetchBids({slots:[r],timeout:n.max_ms},v.wrapAsync(function(){v.log("Amazon preload response",n.id,arguments);try{apstag.setDisplayBids()}catch(e){v.err("Amazon setBids",e)}n.unlock(o)}))}}),u.on("auction.start",function(e,t){var i,r,n,o;h()||(i=[],t.eachUnit(function(e){var t=e.get("dom_id"),e=l[t];e?(i.push(e),l[t]=null):v.log("Amazon no config",t)}),i.length&&(r={slots:i,timeout:t.max_ms},v.log("Amazon request",t.id,r),n="amazon."+t.id,a[n]=!0,t.lock(n),o=setTimeout(v.wrapAsync(function(){a[n]&&(a[n]=!1,t.unlock(n),v.err("Amazon incomplete at 50"))}),t.max_ms+50),apstag.fetchBids(r,v.wrapAsync(function(){v.log("Amazon response",t.id,arguments);try{apstag.setDisplayBids()}catch(e){v.err("Amazon setBids",e)}clearTimeout(o),a[n]&&(a[n]=!1,t.unlock(n))}))))})},function(){if(window.apstag)return v.log("Amazon already loaded"),!0;v.log("Loading Amazon dependency");try{i="apstag",r=window,t=document,r[i]||(r[i]={init:function(){e("i",arguments)},fetchBids:function(){e("f",arguments)},setDisplayBids:function(){},targetingKeys:function(){return[]},dpa:function(){e("di",arguments)},rpa:function(){e("ri",arguments)},upa:function(){e("ui",arguments)},_Q:[]},(n=t.createElement("script")).async=!0,n.src="https://c.amazon-adsystem.com/aax2/apstag.js",(o=t.getElementsByTagName("script")[0]).parentNode.insertBefore(n,o))}catch(e){return v.err("Amazon load failed",e),!1}function e(e,t){r[i]._Q.push([e,t])}var i,r,t,n,o;return!0})},{"../analytics.js":15,"../config.js":17,"../utils.js":35}],23:[function(e,t,i){var a=e("../utils");t.exports=function(e){e.loadCondition&&!e.loadCondition()||(window.confiant=window.confiant||{},window.confiant.enable_integrations=["gpt","prebid"],window.confiant.callback=function(e,t,i,r,n,o){a.err("Confiant block",e,t,i,r,n,o)},a.load("https://confiant-integrations.global.ssl.fastly.net/"+e.key+"/gpt_and_prebid/config.js"))}},{"../utils":35}],24:[function(e,t,i){var g=e("../utils.js"),e=e("../modulewrapper.js");t.exports=e({name:"dock"},function(a,s){var d,c,u,p,n,l,e,t=!0;g.each(["render_check","setup","dock","undock","destroy","get_max_height","get_expiry_ms"],function(e){a.hasOwnProperty(e)||(g.err("Dock mod missing",e),t=!1)}),t&&("function"==typeof(d=a.detect_obstructed)&&(d=d()),c={},u={},g.isdebug()&&(AdBridg.dockable={docking:c,shadows:u}),p=function(e){var t,i=c[e];!i||i.docked||i.closed?g.logl("dock","dock cancel",e,i):(t=g.where(i.dock_el_id)).c.h>i.max_height?g.logl("dock","dock too big",e,i):(i.docked=!0,a.dock(e,t,i),g.logl("dock","docked",e,i),s.trigger("icu.watch",i.shadow,!1,e))},n=function(e){var t=c[e];t&&t.docked&&!t.closed?(t.docked=!1,a.undock(e,g.where(e),t),g.logl("dock","undocked",e,t),s.trigger("icu.ignore",t.shadow)):g.logl("dock","undock cancel",e,t)},l=g.wrapAsync(function(e,t){var i=c[e];t&&i&&(i.user_closed=!0),i&&!i.closed?(t=g.where(e),i.docked=!1,i.closed=!0,a.undock(e,t,i),a.destroy(e,t,i),g.logl("dock","closed",e,i),i.shadow&&((t=document.getElementById(i.shadow))&&t.parentNode&&(t.parentNode.removeChild(t),u[i.shadow]=!1,i.shadow=!1),s.trigger("icu.forget",i.shadow)),i.dock_el_id&&s.trigger("icu.forget",i.dock_el_id)):g.logl("dock","close cancelled",e,i)}),s.on("gpt.render",function(e,t,i){var r=t.get("dom_id"),n=c[r];if(n){if(n.user_closed)return;l(r)}a.render_check(t,i)&&(i=!1,a.get_dock_el&&(i=a.get_dock_el(t,r))&&!i.id&&(i.id=r+"__adb_dock"),function(e,t){var i=e.get("dom_id"),r=t||document.getElementById(i),n=document.createElement("div"),o=g.where(r,!!d);n.id=i+"__ds",n.style="position: absolute;top: "+Math.round(o.c.t+o.c.vp.y)+"px;left: "+Math.round(o.c.l+o.c.vp.x)+"px;width: "+o.c.w+"px;height: "+o.c.h+"px;opacity: 0;z-index: -1;",document.body.insertBefore(n,document.body.children[0]),c[i]={docked:!1,viewed:!1,closed:!1,unit:e,dock_el_id:r.id,shadow:n.id,max_height:a.get_max_height(i,o,e),expiry:a.get_expiry_ms(i,o,e)};r=c[i];t&&(c[t.id]=r,s.trigger("icu.watch",t.id,!1)),u[n.id]=i,g.logl("dock","setup",i,r),a.setup(i,o,e,function(){l(i,!0)},r),!r.view_closed&&r.max_height>o.c.h&&(!o.v||a.detect_partial&&o.v<1||d&&.1<o.o.o)&&(g.logl("dock","dock initial",i,r),p(i))}(t,i))}),a.ignore_viewed||s.on("gpt.viewed",function(e,t,i){var r=i.get("dom_id"),n=c[r];n&&!n.viewed&&(n.viewed=!0,g.logl("dock","viewed",r,n),setTimeout(g.wrapAsync(function(){g.logl("dock","close after view",r,n),n.view_closed=!0,l(r)}),n.expiry))}),d?(s.on("icu.obstructed",function(e,t,i){var r=t.d,t=c[r];!t||t.docked||t.closed||(g.logl("dock","dock icu obstructed",r,i.o.o,i.o.e,t),p(r))}),s.on("icu.unobstructed",function(e,t,i){var r=t.d,t=u[r],r=c[t];r&&r.docked&&(g.logl("dock","undock icu shadow unobstructed",t,i.o.o,r),n(t))})):(e=a.detect_partial?"icu.leaving":"icu.offscreen",s.on(e,function(e,t,i){var r=t.d,t=c[r];!t||t.docked||t.closed||(g.logl("dock","dock icu",r,t),p(r))}),e=a.detect_partial?"icu.onscreen":"icu.appearing",s.on(e,function(e,t,i){var r=t.d,t=u[r],r=c[t];r&&r.docked&&(g.logl("dock","undock icu shadow",t,r),n(t))})),s.on("icu.resized",function(e,t,i){var r=t.d,n=c[r];n&&!n.closed&&(i=n.dock_el_id!==t.d?g.where(n.dock_el_id):i).c.h>n.max_height&&(g.logl("dock","close icu resize",r,i.c),l(r))}))})},{"../modulewrapper.js":31,"../utils.js":35}],25:[function(e,t,i){var v=e("../utils.js");t.exports=function(t,m){var o={},a={},h="adb_bottom_pixel";m.on("pub.spa_pv_initialize",function(){i()}),m.on("dom.close",function(e,t){t=o[t];t&&t.close_btn_id&&(t.behaviour.destroy.close_btn.pageview||(a[t.id]=t),l(t))});function s(t){return Object.keys(t).map(function(e){return[e,"function"==typeof(e=t[e])?e():e]}).reduce(function(e,t){return e[t[0]]=t[1],e},{})}var d=function(e){var t=e;if(!0===t)return t;if(t)if("function"==typeof e)t=t&&t();else if(t.js)t=function(e){var t=e.js.split(".");if("window"===t[0]){t=t[1];return window.hasOwnProperty(t)?window[t]:void 0}v.log("GamConfig JS read fail",e)}(t);else if(t.qs)t=t&&v.qs(t.qs);else if(e.url)t=t&&v.url().href.match(new RegExp(e.url,"i"));else{if(!e.noturl)return!1;t=t&&!v.url().href.match(new RegExp(e.noturl,"i"))}return t},r=function(e){var t=!1,i=!1;if(e.min&&(t="function"==typeof e.min?e.min():e.min),e.max&&(i="function"==typeof e.max?e.max():e.max),!t&&!i)return!1;e=v.vp().w;return!!(t&&i&&t<e&&e<i)||(!i&&t<e||!t&&e<i)},n=function(e){var l=s(e),t=[],i="adb-sidebar",g=document.getElementById(h)||{},f=[];v.log("Building sidebar");var n=document.querySelector("body"),r=document.createElement("div");l.css_templates&&l.css_templates.length&&l.css_templates.forEach(function(e){d(e.active)&&(v.log("Active css template",e),l.style=v.assign(l.style,e.style||{}),l.slot.style=v.assign(l.slot.style,(e.slot||{}).style||{}))}),r.classList.add(i),r.style=b(v.assign({position:"absolute",top:0,"text-align":"center","z-index":5,margin:"0 auto"},l.style)),r.style[l.position||"left"]="20px";e=Number.parseInt(r.style.top.replace("px","")||"0");r.style.height=n.offsetHeight-e+"px",v.prepend(n,r);var o=[].slice.apply(document.querySelectorAll("."+i));o.forEach(function n(o){v.log("Injecting sticky: ",l);var a=Number.parseInt(o.style.top.replace("px","")||"0"),s=l.dock_threshold?l.dock_threshold.bottom||l.dock_threshold.top:.01;v.dom(h,s,0,function(){o.style.height=(g.offsetTop||0)-a-s+"px"});var d=l.timout||5e3,c=l.max_ads||4,u=document.createElement("div"),p=document.createElement("div");p.style.position=u.style.position="sticky",p.style.paddingBottom=l.slot&&(l.slot.style||{})["padding-bottom"]||"10px",l.enable_debug&&(p.style.background="rgb(240, 170, 0)"),Object.keys(l.style||{}).forEach(function(e){u.style[e]=l.slot.style[e]}),p.style.top=l.slot.style.top||0,Object.keys(l.attributes||{}).forEach(function(e){u.setAttribute(e,l.attributes[e])}),l.clearContent&&-1===t.indexOf(o)&&(o.innerHTML="",t.push(o)),p.appendChild(u),o.appendChild(p),v.log("Injected sticky element",p),"function"==typeof l.postInject&&l.postInject(u),m.on("gpt.viewed",function(e,t){o.style.height=(g.offsetTop||0)-a-s+"px";var i=t.getSlotElementId(),r=t.getAdUnitPath();i===u.id&&f.length<=c&&v.dom(u.id,1,d,function(){v.log("Scheduling next sidebar injection :",(t={dom_id:u.id,ad_unit_path:r,timeout:d},JSON.stringify(t,2))),f.push(i);var e=o.clientHeight-[].slice.apply(o.children).reduce(function(e,t){return e+t.offsetHeight},0),t=Math.min(window.innerHeight-o.getBoundingClientRect().top,o.offsetHeight);e<t||(p.style["min-height"]=t+"px",p.style.position="unset",n(o))})})});var a=!0;window.addEventListener("resize",function(){a&&o&&o.length&&o.forEach(function(e){var t=v.vp().w,i="function"==typeof l.viewport.min?l.viewport.min():l.viewport.min,r="function"==typeof l.viewport.max?l.viewport.max():l.viewport.max;e&&(t<i||r<t)&&(n.removeChild(e),a=!1)})})},c=function(e){var t,i;!e.id||a[e.id]||o[e.id]||(t={id:e.id,style:{height:"1px",width:"1px"}},e.style&&v.assign(t.style,e.style),i=p(t),document.body.appendChild(i),v.log("Injected element",e),e.script&&(t=document.createElement("script"),e.script.js&&(i=document.createTextNode(e.script.js),t.appendChild(i)),document.head.appendChild(t),v.log("Injected script for element",t)),o[e.id]=e)},u=function(t){v.log("Building adhesion unit: ",t);var i,e,r,n=0;a[t.id]||o[t.id]||v.cr(t.id)||t.id&&((i={id:t.id,style:{width:"100%",position:"fixed",background:"rgba(44,62,80,.6)","z-index":1e3,opacity:1,padding:0,bottom:0},slot:t.slot}).slot.style={margin:"auto","text-align":"center",position:"relative","z-index":1},t.css_templates&&t.css_templates.length&&t.css_templates.forEach(function(e){d(e.active)&&(t.active_css_template=e,i.style=v.assign(i.style,e.container||{}),i.slot.style=v.assign(i.slot.style,e.slot||{}),n=e.injected_default_height||0)}),t.attributes&&(i.attributes=t.attributes),e=p(i),i.slot.id||(i.slot.id=v.genID("adb-adhesion-slot-")),r=p(i.slot),e.appendChild(r),document.body.appendChild(e),t.behaviour.destroy.close_btn&&(r=function(e,t){var i={style:{"line-height":"19px","z-index":2,opacity:0,cursor:"pointer",background:"rgba(44,62,80,.6)",color:"rgb(255, 255, 255)","text-align":"center",position:"absolute",top:"-20px",right:"0px",width:"20px",height:"20px","border-radius":"5px 5px 0px 0px","font-weight":"bolder","font-family":"monospace"},id:v.genID("close-btn-")};if(e.close_btn_id=i.id,e.active_css_template&&e.active_css_template.close_btn)i.style=v.assign(i.style,e.active_css_template.close_btn||{});var r=p(i);return r.innerHTML="&#x2715;",r.addEventListener("click",function(){if(!e.behaviour.destroy.close_btn.pageview){a[e.id]=e;v.cw(e.id,true)}t();document.getElementById(e.id).removeEventListener("click",l);l(e)}),r}(t,function(){document.getElementById(h).style.height="1px"}),v.prepend(e,r),m.on("gpt.render_raw",function(e,t){t=t.slot.getSlotElementId(),t=document.getElementById(t);t&&"none"!==t.style.display&&(t=t.parentNode,o[t.id]&&o[t.id].close_btn_id&&(document.getElementById(o[t.id].close_btn_id).style.opacity=1,t=document.getElementById(t.id).clientHeight||0,document.getElementById(h).style.height=Math.max(t,n)+"px"))})),v.log("Injected element",t),o[t.id]=t)},p=function(t){var e,i=document.createElement("div");return i.id=t.id,t.style&&(i.style=b(t.style)),t.attributes&&(e=Object.keys(t.attributes),v.each(e,function(e){i.setAttribute(e,t.attributes[e])})),i},b=function(e){for(var t=Object.keys(e),i="",r=0;r<t.length;r++)i+=t[r]+":"+e[t[r]]+";";return i},l=function(t){try{document.getElementById(t.id).remove(),v.log("Unloaded div",t),delete o[t.id]}catch(e){v.log("Unknow div to unload",t)}},i=function(){var e;document&&document.body?(v.log("Body loaded. Initialising DomBuilder module"),!(e=t).elements||!v.isarr(e.elements)||e.elements.length<1?v.log("No dom builder elements "):(v.log("Dom Builder enabled",e),e=e.elements,v.each(e,function(e){if(d(e.active))if(!e.viewport||r(e.viewport)){v.log("Dom Builder: Element active for this page",e),v.log("Injecting pixel at bottom of page");var t=document.getElementsByTagName("body")[0],i=document.createElement("div");switch(i.id=h,i.style.width=i.style.height="1px",t.appendChild(i),e.type){case"infinite-scroll":break;case"adhesion":u(e);break;case"container":c(e);break;case"sticky_sidebar":n(e);break;default:v.log("Invalid position for div",e)}}else v.log("Dom Builder: Element viewport threshold not met",e);else v.log("Dom Builder: Element not active for this page",e)}))):setTimeout(i,100)};t.initialize_immediately&&i()}},{"../utils.js":35}],26:[function(e,t,i){var r=e("../utils.js");t.exports=function(t,e){e.on("*",r.wrapAsync(function(e){t[e]&&t[e].apply(null,arguments)}))}},{"../utils.js":35}],27:[function(e,t,i){function U(e){var t=e.js.split(".");if("window"==t[0]){t=t[1];return window.hasOwnProperty(t)?window[t]:void 0}D.log("GamConfig JS read fail",e)}var D=e("../utils.js"),N=e("../config.js"),q=(e("../unit.js"),{});t.exports=function(i,e){var k="adbridg-ad-class",z="data-adbridg-ad-class",E="data-adbridg-ad-class-loaded",j="data-adbridg-ad-class-invalid",T="data-adbridg-ad-class-ctr",C="data-adbridg-phase",O="adbridg_ad_",R="data-adbridg-gam-path",B="data-adbridg-page-kvps",P=0;e.on("pub.spa_pv_initialize",function(){P=1}),e.on("pub.config",function(e,t){t.targeting&&(i.targeting?D.deepAssign(i.targeting,t.targeting):i.targeting=t.targeting)});function t(e,f){var t,i,o,m,h,b,v,y,_,w,a,s,n,r,x,S,I,d,c,u,p,l,g,A=e.active;(A=A&&A.js?U(A):A)&&A.url&&(new RegExp(A.url,"i"),A=D.url().href.match(A.url)),A?(D.log("GamConfig enabled",e),e.pageType&&(t=[],(i=e.pageType)&&i.js&&(i=U(i)),D.each(e.slots,function(e){e.page_type===i&&t.push(e)}),D.log("GamConfig page type slots: ",{total_slots:e.slots.length,page_type_slots:t.length,slots:t}),e.slots=t),e.collapseEmptyDivs&&AdBridg.gpt.cmd.push(function(){AdBridg.gpt.pubads().collapseEmptyDivs()}),e.centering&&AdBridg.gpt.cmd.push(function(){AdBridg.gpt.pubads().setCentering(!0)}),e.safeFrames&&AdBridg.gpt.cmd.push(function(){D.log("Requiring GPT Sandbox SafeFrames"),AdBridg.gpt.pubads().setSafeFrameConfig({sandbox:!0})}),o={},m=function(e){AdBridg.cmd.push(function(){D.each(e,function(e,t){var i=e;void 0!==(e=(e=e&&e.js?U(e):e)&&e.qs?D.qs(e.qs.match)?e.qs.value:void 0:e)?(D.log("GamConfig setting page targeting: ",t,e),AdBridg.gpt.pubads().setTargeting(t,e),o[t]=e):D.log("GamConfig targeting empty",t,e,i)})})},f.on("pub.config",function(e,t){m(t.targeting)}),e.targeting&&m(e.targeting),h=function(e,t){var i=e.getAttribute(C)||"";i&&(i+=";");t=(i+t+"@"+D.dts()+"ms").substr(0,200);200==t.length&&(t+="..."),e.setAttribute(C,t)},(a=function(){b={},v={},y={},w=!(_={}),D.each(e.slots,function(t){if(!N.libSettings().gamconfig_filter||N.libSettings().gamconfig_filter(t)){if(t.dom_ad_class)return w=!0,void(_[t.dom_ad_class]=t);if(t.inject&&!document.getElementById(t.dom_id)){var e=document.createElement("div");e.id=t.dom_id;try{document.body.appendChild(e)}catch(e){D.err("GamConfig cannot inject",t.dom_id,e)}}e=t.dom_id;b[e]||v[e]?D.err("GamConfig duplicate dom_id",e):b[e]=t}else D.log("GamConfig slot skipped by pub",t)})})(),s=function(e,t){if(b[e.id])return!0;var i,r=e.getAttribute&&(e.getAttribute(z)||e.getAttribute(k));if(_[r])return!0;if(i=(D.qs("adb_gcerr")?e.children:e.children||[]).length,t&&i)for(var n=0;n<i;++n)if(s(e.children[n],!0))return!0;return!1},n=function(){clearTimeout(x),x=setTimeout(function(){I()||u()},10)},r=function(e){for(var t=0;t<e.length;++t){var i=e[t];if("attributes"==i.type)return s(i.target,!1)?n():void 0;for(var r=0;r<i.addedNodes.length;++r){i.addedNodes[r];if(s(i.target,!0))return n()}}},S=e.scan_interval||200,I=function(){clearTimeout(x);var u=!1;if(w)for(var u=!0,e=document.querySelectorAll("["+z+"],["+k+"]"),t=0;t<e.length;++t){var i,r,n,o,a,s=e[t],d=s.getAttribute(z)||s.getAttribute(k);d&&(!(i=N.libSettings("gamconfig_ad_class_mutate",d,s))&&!1!==i||(r=d,d=i),_[d]?(o=d.replace(/[^\w\d]+/gi,""),q[i=o]=(q[i]||0)+1,n=q[i],s.setAttribute(T,n),s.id||(s.id=O+o+"_"+n),s.removeAttribute(z),s.removeAttribute(k),s.setAttribute(E,d),D.log("GamConfig - setting up ad class",s.id,d,{base:_[d],me:{dom_id:s.id,dom_ctr:n}}),o=D.deepAssign({},_[d]),(a=D.deepAssign({dom_id:s.id,dom_ctr:n},o)).targeting&&D.each(a.targeting,function(e,t){var i,r;"object"==typeof e&&e.format&&(a.targeting[t]=(i=e.format,r=n,e=i.match(/\{\{[^\}]+\}\}/g),D.each(e,function(e){"dom_ctr"!==e.replace(/[\{\}]/g,"")?D.err("GamConfig unknown slot targeting format",e):i=i.replace(e,r)}),i))}),b[s.id]=a):(!1!==d&&D.err("GamConfig invalid ad class attribute",d,r?" (original: "+r+")":""),s.removeAttribute(z),s.removeAttribute(k),s.setAttribute(j,d+(r?"("+r+")":""))))}var p=[],l=[],g=[];D.each(b,function(i,r){var n=document.getElementById(r);if(n)if(N.libSettings("gamconfig_skip_element",r,i))u=!0;else{var e=n.getAttribute(R);e&&""!=e&&(D.log("Path Override: ",R),i.gpt_path=e,delete i.gpt_path_builder);var t,o,a,s,d,c,e=n.getAttribute(B);if(e&&""!=e&&(c=e.split(/[,]+/),D.log("parse_all_page_kvp",c),t={},D.each(c,function(e){e=e.split(/[:]+/);2===e.length&&(t[e[0]]=e[1])}),D.log("Targeting map",t),m(t)),n.innerHTML="",h(n,"detected"),i.size_map&&(i.size=AdBridg.getSizes(i.size_map),delete i.size_map,!i.size.length))return g.push(r),void h(n,"vp_no_size");g.push(r),v[r]||(v[r]=!0,p.push(i),i.gpt_path_builder&&(i.gpt_path=(a=r,s=n,d=""+(o=i).gpt_path_builder,c=d.match(/\{\{[^\}]+\}\}/g),D.log("GamConfig extracted curlies: ",c),D.each(c,function(e){var t,i=e.replace(/[\{\}]/g,""),r="";i.match(/^lib\.pub\./)?(t=i.replace("lib.pub.",""),(r=(N.libSettings().pub||{})[t])||(N.libSettings().pub||{}).hasOwnProperty(t)||D.err("GamConfig PathBuilder setting not present:",e),d=d.replace(e,r)):i.match(/^lib\.adb\./)?(t=i.replace("lib.adb.",""),(r=N.libSettings("gamconfig_curly",t,o,a,s)||AdBridg.global(t)||"")||D.err("Warning: GamConfig PathBuilder AdBridg global empty/not present:",t),d=d.replace(e,r)):D.err("GamConfig unsupported gpt_path_builder part:",e)}),D.log("GamConfig gpt_path_builder",o.gpt_path_builder,d),d)),i.dom_ad_class&&f.on("unit.init_config",function(e,t){t.get("dom_id")==r&&t.set("dom_ad_class",i.dom_ad_class)}),i.events={"gpt.defined":function(e){h(n,"gpt_define")},"gpt.rendered":function(e,t){h(n,"gpt_render:"+t.sourceAgnosticCreativeId)},"gpt.viewed":function(e,t){h(n,"gpt_view")}},f.trigger("adb.gamconfig_slot_configure",i,r,n)),y[r]=!0,l.push(r)}else u=!0}),D.each(g,function(e){delete b[e]});var c=N.libSettings().gamconfig_fulfillment;return p.length&&(D.log("GamConfig configuring slots",p),c?c(p):AdBridg.cmd.push(p)),l.length&&AdBridg.cmd.push(function(){D.each(l,function(e){AdBridg.display(e)})}),u&&!MutationObserver&&(x=setTimeout(I,S)),u},D.gamconfig_scanner=I,c=function(){MutationObserver?(I(),d&&u(),(d=new MutationObserver(r)).observe(document.body,{attributes:!0,attributeFilter:["id",z,k],childList:!0,subtree:!0}),D.log("GamConfig MutationObserver added")):(D.log("GamConfig polling started"),I())},p=!(u=function(){clearTimeout(x),d?(d.disconnect(),d=!1,D.log("GamConfig MutationObserver disconnected")):D.log("GamConfig polling stopped")}),f.on("pub.spa_pv_shutdown",function(){p=!0,D.log("GamConfig stopping for SPA"),a(),u(),D.each(o,function(e,t){D.log("GamConfig erasing KVP",t),AdBridg.gpt.pubads().setTargeting(t,[])});var r=[],n=[];D.each(AdBridg.gpt.pubads().getSlots(),function(e){var t,i;!N.libSettings().gamconfig_filter_destroy_slots||N.libSettings().gamconfig_filter_destroy_slots(e)?(t=document.getElementById(e.getSlotElementId()))&&t.getAttribute(C)&&(r.push(e),n.push(t),h(t,"destroyed"),(i=t.getAttribute(z)||t.getAttribute(k)||t.getAttribute(E)||t.getAttribute(j))&&(t.removeAttribute(E),t.removeAttribute(j),t.setAttribute(z,i),(t.id||"").match(O)&&t.removeAttribute("id"))):D.log("Gamconfig not destroying this slot: ",e)}),r.length&&AdBridg.destroySlots(r),p=!(q={})}),g=function(){clearTimeout(l),p?l=setTimeout(g,100):(D.log("GamConfig restarting SPA"),a(),c())},f.on("pub.spa_pv_initialize",g),0!=e.autostart||P?c():D.log("GamConfig waiting for publisher to initialize with action=spa_pv_initialize.")):D.log("GamConfig not enabled")}function r(){document&&document.body?(D.log("Body loaded. Initialising Gamconfig module"),t(i,e)):setTimeout(r,100)}var n=N.libSettings().gamconfig_defer;if("function"==typeof n)return D.log("GamConfig waiting to initialize"),void AdBridg.cmd.push(function(){n(r)});AdBridg.cmd.push(r)}},{"../config.js":17,"../unit.js":34,"../utils.js":35}],28:[function(Z,e,t){var ee=Z("../utils.js"),i=Z("../modulewrapper.js");e.exports=i({name:"icu",track_as:"z"},function(s,d){var t=s.tick_ms||100,i=15e3,r=5e3,w={},n={unknown:0,above_viewport:1,below_viewport:2,partially_above_viewport:3,in_viewport:4,partially_below_viewport:5},o={"160x600":1,"300x250":2,"300x600":3,"320x50":4,"320x100":5,"468x60":6,"728x90":7,"970x90":8,"970x250":9},c=0,u=0,p=0,l=ee.dts(),a=0,g=!1,f=!1,m={init:0,focus:1,mousemove:2,mousedown:3,click:4,touchstart:5,touchend:6,keydown:7,keyup:8,scroll:9},x=ee.qs("adb_icu_box"),h=!0;ee.qs("adb_icu")||(0===s.sample?h=!1:s.sample&&s.sample<1&&(h=Math.random()<=s.sample));var b=s.watch_gpt||h||x;function v(e){return(Math.floor(e)||0).toString(36)}function y(e){return v(100*e)}function _(e){e=Math.round(e.c.w)+"x"+Math.round(e.c.h);return o[e]||e}function S(e){return"number"!=typeof e&&(e=ee.dts()),Math.floor(e/10).toString(36)}function I(e){return Math.floor(20*(e.o&&e.o.v||0))}function A(e){return I(e).toString(36)}function k(e){return n[e.p]}function z(e){return.05<=e.v}function E(e){return e.o&&.95<=e.o.o}function j(e){return 0<k(e)?z(e)?A(e):v(e.d):"0"}function T(e){return{t:S(),p:(t=e,String(k(t))+(Math.floor(t.c.vp.y+t.c.t)||0).toString(36)+"."+(Math.floor(t.c.vp.y)||0).toString(36)),d:j(e),i:(g?"1":"0")+a+S(ee.dts()-l)};var t}function C(e){return[e.dt,e.a,e.uid,e.uuid]}function O(e){e=e||ee.dts(),p=e+i}function R(e,t){h&&Z("../analytics.js").sqz(r,"zi",e,"z",t),O()}function B(e,t,i){i=i||M;var r=w[e];if(r.dt&&r.m.length){var i=T(t),t=C(r),i=[r.dctr,r.mctr,r.r.t,r.r.p,r.r.d,r.r.i,r.v.t,r.v.p,r.v.d,r.v.i,i.t,i.p,i.d,i.i].join(","),n=[];ee.each(r.s,function(e){0<e[0]?n.push(e[0].toString(36)+"."+e[1]):n.push(e[1])});for(var n=n.join(","),o=[],a=20;0<=a;--a){for(var s,d,c,u,p,l=0,g=0,f=0,m=0,h=0,b=0,v=0;v<r.m.length;++v){var y,_=r.m[v];_.vn>=a?(y=_.d*_.vn,l+=_.d,g+=y,h+=_.d,b+=y,f=Math.max(h,f),m=Math.max(b,m)):b=h=0}0<g&&(l!==s||f!==c||g!==d||m!==u)&&(s=l,d=g,c=f,u=m,p=a.toString(36)+"."+l.toString(36)+"."+g.toString(36),l===f&&g===m||(p+="."+f.toString(36)+"."+m.toString(36)),o.push(p))}o=o.join(","),i=[i,n,o].join("_");!r.v5r&&1e3<r.v5&&(i+="_1",r.v5r=!0,x&&(r.av=M),ee.logl("icu",M,F," // ",e,"counted iab view")),ee.logl("icu",M,F," // ",e,"finalized"),R(t,i),r.mctr+=1}else ee.logl("icu",M,F," // ",e,"stopped empty");r.lts=0,r.v=!1,r.ve=!1,r.m=[]}ee.isdebug()&&(AdBridg.icu={watch:b,sampled:h,sampling:s.sample||1,measurements:w,stat:function(){var e=ee.dts(),i="unknown";return ee.each(m,function(e,t){a===e&&(i=t)}),{last_measure:c,measure_ms:e-c,last_evt:i,idle_ms:e-l,idle:g}}});var P=!1,U=!1,D=!1,N=!1,q=!1,F=0,M=0,G=ee.wrapAsync(function(e){q=!0,(t<e-M||N)&&(F+=1,M=e,function(){var e=!1;c=ee.dts(),u=c+500,g=g||3e4<c-l,(!f&&g||!g&&f)&&(f=g);p&&p<M&&(N=!(p=!1));var t,i=[];for(t in w){var r,n,o,a,s;w.hasOwnProperty(t)&&(r=w[t],n=ee.where(t,!0,r.ok),x&&(r.dbw=n),n.v?(1===n.v&&r.lv<1&&d.trigger("icu.onscreen",r,n),r.lv?1===r.lv&&n.v<1&&d.trigger("icu.leaving",r,n):d.trigger("icu.appearing",r,n),!r.loo&&n.o&&n.o.o?(r.loo=!0,d.trigger("icu.obstructed",r,n)):!r.loo||n.o&&n.o.o||(r.loo=!1,d.trigger("icu.unobstructed",r,n)),r.lv=n.v):r.lv&&(r.lv&&d.trigger("icu.offscreen",r,n),r.lv=0),r.mx||(g||!z(n)||E(n)?(r.v&&(ee.logl("icu",M,F," // ",t,"stopped",g,!z(n),E(n)),B(t,n),N=!0),z(n)||function(e){W[e]||(W[e]=!0,ee.dom(e,.01,0,K))}(t)):(e=!0,o=Math.max(1,Math.floor((M-r.lts)/10)),(a=_(n))!=r.s[r.s.length-1][1]&&(s=Math.max(1,Math.floor((M-r.rts)/10)),r.s.push([s,a]),ee.logl("icu",M,F," // ",t,"size changed",s,r.s[r.s.length-1][1],a),d.trigger("icu.resized",r,n)),r.v?(s=M-r.lts,r.vt+=s,r.va+=s*(n.o&&n.o.v||0),n.o&&.5<=n.o.v&&(r.v5+=M-r.lts),r.lts=M,a=A(n),s=r.m.length-1,(s=0<=s&&r.m[s])&&s.v==a?(s.d+=o,s.te=M):r.m.push({d:o,t:M,v:a,vn:I(n)}),i.push({t:r,d:t,w:n}),6e4<=r.vt&&(ee.logl("icu",M,F," // ",t,"tracker vt max",r.vt),r.mx=!0,N=!0)):(ee.logl("icu",M,F," // ",t,"started"),Y(r,n,M)))))}N&&ee.each(i,function(e){B(e.d,e.w),r.mx||(ee.logl("icu",M,F," // ",e.d,"restarted"),Y(e.t,e.w,M))});e||(ee.logl("icu",M,F," // nothing to measure; ending ticks"),p=U=!1);x&&ee.each(w,X);N=!1}()),D=D&&!(U=!0),U&&(P=window.requestAnimationFrame(G)),q=!1});function L(){D=!0,q||(P&&window.cancelAnimationFrame(P),P=window.requestAnimationFrame(G))}var W={};function K(e){W[e]=!1,L()}function Y(e,t,i){e.v=T(t),e.lts=i,e.vt=e.vt||0,e.va=e.va||0,e.v5=e.v5||0,p||O(i)}function V(e){return e.id?e.tagName+"#"+e.id:e.tagName+"."+String(e.className).replace(/^([^\s]+).*$/,"$1").replace(/[^a-z0-9_-]/i,"")}function H(e){var t=document.createElement("div");return t.style="display:inline-block;background:rgba(0,0,0,.6);padding:2px 4px;margin:1px 3px;color:white;",t.innerHTML=e,t}function J(e){return((Math.floor(e/100)||0)/10).toString().replace(/^(\d+\.\d).+$/,"$1").replace(/^([^\.]+)$/,"$1.0")+"s"}function X(e,t){var i,r,n,o,a=e.dbw,s=document.getElementById(t);s&&(n=t+"__adb_dom_debug",(o=document.getElementById(n))?i=o.children[0]:((o=document.createElement("div")).id=n,debug_el_container=document.createElement("div"),debug_el_container.style="position:relative;width:0px;height:0px;margin:0;padding:0;",debug_el_container.appendChild(o),s.children.length?s.insertBefore(debug_el_container,s.children[0]):s.appendChild(debug_el_container),(i=document.createElement("div")).style="background:rgba(255,255,255,.7)",o.appendChild(i),o.appendChild(H(t+" #"+e.dctr+" render @ "+J(e.rts))),e.dbgt={}),!e.dbgt.gv&&e.gv&&(e.dbgt.gv=!0,o.appendChild(H("GPT view @ "+J(e.gv)))),!e.dbgt.v5&&1e3<e.v5&&(e.dbgt.v5=!0,o.appendChild(H("AdBridg IAB view flag @ "+J(M)))),!e.dbgt.v5r&&e.av&&(e.dbgt.v5r=!0,o.appendChild(H("AdBridg IAB view sent @ "+J(e.av)))),n=(a.o||a).v,s=Math.floor(100*n)+"% in view",g&&(s+=" (ux_idle)"),s+="; "+Math.floor(e.va/e.vt*100)+"% over "+J(e.vt),i.innerText!==s&&(t=n<1||g?n<.5||g?"180,30,30,.9":"180,180,30,.9":"30,180,30,.9",e=a.c.w-10+"px",o.style="position:absolute;background:rgba("+t+");left:5px;top:5px;width:"+e+";height:"+(a.c.h-10)+"px",a.o&&a.o.o&&(r=[],ee.each(a.o.e,function(e,t){r.push("["+t+"="+Math.floor(100*e.o)+"%] "+V(e.el))}),s+="; intersect "+r.join(", ")),i.innerText=s,n=ee.where(i,!0),t=String(n.o&&n.o.v||n.v),i.getAttribute("data-adb-vmw")!==t&&(i.setAttribute("data-adb-vmw",t),s=a=!1,1==(t=k(n))||3==t?a=!0:2==t||4==t?s=!0:n.o&&n.o.e.tl?a=!0:n.o&&n.o.e.br&&(s=!0),(s||a)&&(n=(t=ee.where(o,!0)).o&&t.o.v||t.v,o=k(t),!a||!n||2===o||4===o||t.o&&t.o.e.br?!s||!n||1===o||3===o||t.o&&t.o.e.tl||(i.style.position="initial",i.style.bottom="initial"):(i.style.position="absolute",i.style.bottom="0px",i.style.width=e)))))}function Q(e,t,i,r,n){var o=!!r&&e;o&&s.modify_dom_id&&(o=s.modify_dom_id(o));var a=ee.where(e,!0);return w[e]&&B(e,a,ee.dts()),r=_(a),w[e]={a:i,d:e,dt:o,ok:n,dctr:t,mctr:1,uid:0,uuid:0,lts:0,rts:ee.dts(),r:T(a),s:[[0,r]],m:[],lv:a.v,loo:a.o&&a.o.o||0},L(),w[e]}var $;d.on("gpt.render,gpt.render_pt",function(e,t,i,r){var n;b&&(n=i.slot.getAdUnitPath(),s.modify_gpt_path&&(n=s.modify_gpt_path(n)),i=i.slot.getSlotElementId(),n=Q(i,r,n,!0),t&&(n.uid=t.id,n.uuid=t.unique_id),R(C(n),[".",n.dctr,n.s[0][1],n.r.t,n.r.p,n.r.d,n.r.i].join(",")))}),d.on("gpt.viewed_raw",function(e,t){var i,r;b&&(i=t.slot.getSlotElementId(),!(t=w[i])||t.v&&t.m.length||t.v5r||(i=ee.where(i,!0)).o&&!i.o.v&&(r=[(i=i).i||"",String(n[i.p]),j(i),y(i.v),i.in,v(i.c.t),v(i.c.l),v(i.c.w),v(i.c.h)],i.o&&(r.push(y(i.o.o)),r.push(y(i.o.v)),i.o.e&&ee.each(i.o.e,function(e,t){r.push(t+";"+e.o+";"+V(e.el))})),i=r.join(","),ee.logl("icu","empty at GPT view",t.dt),R(C(t),["*",t.dctr,t.mctr,i].join(","))),x&&t&&(t.gv=ee.dts()),N=!0,L())}),window.addEventListener&&($=function(e){g=!1,l=ee.dts(),a=m[e.type]||"u",u<l&&L()},ee.each(Object.keys(m),function(e){"init"!==e&&window.addEventListener(e,$,!0)}),window.addEventListener("blur",function(){g=!0})),d.on("icu.watch",function(e,t,i,r){Q(t,1,!1,i,r)}),d.on("icu.ignore",function(e,t){w[t]&&delete w[t]})})},{"../analytics.js":15,"../modulewrapper.js":31,"../utils.js":35}],29:[function(i,e,t){var r,n=i("../utils"),o="_pubcid",a="PublisherCommonId",s=n.cr("_pubcid_optout"),d="N";try{s||("object"==typeof window[a]?(r=window[a].getId(),d="A",n.log("Read pubcid from API:"+r)):(r=n.cr(o),d=r?"C":(r=n.lr(o))?"L":(r=n.genUUID(),"G"),n.cw(o,r,1825),n.lw(o,r),window[a]={getId:function(){return r}},n.log("Read pubcid from cache"+r)))}catch(e){n.err("pubcid init fail",e),d="E"}e.exports=function(e,t){r&&t.on("unit.config",function(e,t){t.set("userId.pubcid",r),t.set("userIdAsEids.pubcid",{source:"pubcid.org",uids:[{id:r,atype:1}]})}),t.on("gamkvp.getids",function(e,t){r?t.push("i1y"):t.push("i1n")}),n.thread(function(){i("../analytics.js").meta("i1",d)})()}},{"../analytics.js":15,"../utils":35}],30:[function(e,t,i){var d=e("../utils.js");t.exports=function(e,t){var i="_adbrh",r=i,n=d.qs("adb_rh");if("0"===n?d.cw(i,"",0):n&&d.cw(i,"1",365),d.cr(i)){d.log("RH ad creative history activated.");var o={dfp:[],adb:[]};try{(o=(o=localStorage.getItem(r))&&JSON.parse(o))&&o.dfp||(o={dfp:[],adb:[]})}catch(e){d.err("RH failed to load history from local storage")}function a(e,t){return{t:(new Date).toString(),d:d.url().domain,u:d.url().page,i:e.getSlotElementId(),s:e.getAdUnitPath(),e:t}}function s(e,t){t=e.length-t;0<t&&e.splice(0,t),localStorage.setItem(r,JSON.stringify(o))}t.on("gpt.render_raw",function(e,t){var i={advertiserId:t.advertiserId,campaignId:t.campaignId,creativeId:t.creativeId,isEmpty:t.isEmpty,lineItemId:t.lineItemId,size:t.size,sourceAgnosticCreativeId:t.sourceAgnosticCreativeId,sourceAgnosticLineItemId:t.sourceAgnosticLineItemId};d.each(i,function(e,t){e||delete i[t]});t=a(t.slot,i);o.dfp.push(t),s(o.dfp,20)}),t.on("bid.render",function(e,t){t=a(t.config.unit.get("gpt_slot"),{config:t.config.unit.alias,bidder:t.config.bidder_name,bidderid:t.config.bidder_unit_id,extras:t.extras,ad:escape(t.creative)});o.adb.push(t),s(o.adb,20),d.rec(["RH",JSON.stringify(t)])});t=document.createElement("DIV");t.style="display:block;cursor:pointer;position:fixed;z-index:99999999;top:5px;right:50%;padding:5px 20px;background:red;border:black;box-shadow:1px 2px 6px white;color:white;font-size:12px;",t.innerText="Ad History",t.addEventListener("click",function(){document.write("<button onclick=\"document.getElementById('debuginfo').select()\">Select All</button>&nbsp;|&nbsp;<button onclick=\"localStorage.removeItem('_adbrh');location.reload()\">Clear History</button>&nbsp;|&nbsp;<button onclick=\"location.reload()\">Refresh</button><br><textarea cols=100 rows=100 style='max-height:80%;max-width:80%' id='debuginfo'>"+JSON.stringify(o,null,2)+"</textarea>")}),document.body.appendChild(t)}}},{"../utils.js":35}],31:[function(d,e,t){var c=d("./utils.js"),u=d("./config.js");e.exports=function(n,o){function a(e,t){if(e.pub_active){var i=u.libSettings("pub");if(!i){c.log(s,"pub check deferred");var r=!1;return void t.on("pub.config",c.wrapAsync(function(){r||(r=!0,a(e,t))}))}if(!e.pub_active(i))return void c.log(s,"inactive due to pub check")}if(e.active&&!e.active())return c.log(s,"inactive");n.track_as&&c.thread(function(){d("./analytics.js").mod(n.track_as)})(),c.log(s,"instantiating"),o(e,t)}var s=n.name||"summodhuh";return a}},{"./analytics.js":15,"./config.js":17,"./utils.js":35}],32:[function(e,t,i){var a=e("./utils.js");function r(e){var t=this,i=e.url,r=e.config,n=e.id,o=e.callback,e=e.loaded;this.url=i,this.config=r,this.handlers={},this.id=n,this.loaded=e,this.cmd=[],this.push=function(e){"function"==typeof e?t.loaded?e.call():t.cmd.push(e):a.err("Commands given to Renderer.push must be wrapped in a function")},this.callback=o||function(){t.loaded=!0,t.process()},a.load(i,this.callback,!0)}r.install=function(e){return new r({url:e.url,config:e.config,id:e.id,callback:e.callback,loaded:e.loaded})},r.prototype.getConfig=function(){return this.config},r.prototype.setRender=function(e){this.render=e},r.prototype.setEventHandlers=function(e){this.handlers=e},r.prototype.handleVideoEvent=function(e){var t=e.id,e=e.eventName;"function"==typeof this.handlers[e]&&this.handlers[e](),a.log("Prebid Renderer event for id "+t+" type "+e)},r.prototype.process=function(){for(;0<this.cmd.length;)try{this.cmd.shift().call()}catch(e){a.err("Error processing Renderer command: ",e)}},t.exports=r},{"./utils.js":35}],33:[function(e,t,i){function f(t){var e="GET"===t.method&&("object"==typeof t.data?h.toqs(t.data,!0):t.data),e={method:t.method,url:"GET"===t.method&&e?[t.url,"?",e].join(""):t.url,withCredentials:!1!==(t.options&&t.options.withCredentials),parseResponseJson:void 0===t.parseResponseJson||t.parseResponseJson,data:"POST"===t.method&&("object"==typeof t.data?JSON.stringify(t.data):t.data),contentType:(t.options||{}).contentType};return s.libSettings().ajaxraw&&(e.rawProcessor=function(e){s.libSettings().ajaxraw(t,e)}),e}function r(e,t){var i=t.config.size.split("x"),t=i[0],e=(2*(i=i[1])<t?["<style>",".native-wrap{text-decoration:none;color:#000;font-family:sans-serif;}",".native-flex{display:flex;flex-direction:column;height:",i,"px;}",".native-flex-container{display:flex;flex-direction:row;flex:1}",".native-flex-content{display:flex;flex-direction:column;flex:7}",".native-image{background-image:url(",e.image.url,");flex:1;margin-right:1em;background-size:cover;background-repeat:no-repeat;background-position: center;}",".native-sponsor{font-size:x-small;text-align:center;text-transform:uppercase;margin-bottom:0.5em;}",".native-title{font-size:larger;font-weight:bold;margin-bottom:0.5em;}",".native-body{margin-bottom:0.5em;}",".native-body2{margin-bottom:0.5em;}",".native-icon{width:1.5em;vertical-align:middle;}",'</style><a class="native-wrap" href="',e.clickUrl,'">',(e.impressionTrackers||[]).map(function(e){return['<img src="',e,'" style="display:none">'].join("")}).join(""),'<div class="native-flex">','<div class="native-sponsor">sponsored advertisement from ',e.icon?['<img class="native-icon" alt="',e.sponsoredBy,'" src="',e.icon.url,'"> '].join(""):"",e.sponsoredBy,"</div>",'<div class="native-flex-container">','<div class="native-image"></div>','<div class="native-flex-content">','<div class="native-title">',e.title,"</div>",'<div class="native-body">',e.body,"</div>",'<div class="native-body2">',e.body2,"</div>","</div>","</div>","</div>","</a>"]:["<style>",".native-wrap{text-decoration:none;color:#000;font-family:sans-serif;display:flex;flex-direction:column;height:",i,"px;}",".native-image{background-image:url(",e.image.url,");flex:2;margin-bottom:1em;background-size:cover;background-repeat:no-repeat;background-position: center;}",".native-sponsor{font-size:x-small;text-align:center;text-transform:uppercase;margin-bottom:0.5em;}",".native-title{font-size:larger;font-weight:bold;margin-bottom:0.5em;}",".native-body{margin-bottom:0.5em;}",".native-body2{margin-bottom:0.5em;}",".native-icon{width:1.5em;vertical-align:middle;}",'</style><a class="native-wrap" href="',e.clickUrl,'">',(e.impressionTrackers||[]).map(function(e){return['<img src="',e,'" style="display:none">'].join("")}).join(""),'<div class="native-sponsor">sponsored advertisement from ',e.icon?['<img class="native-icon" alt="',e.sponsoredBy,'" src="',e.icon.url,'"> '].join(""):"",e.sponsoredBy,"</div>",'<div class="native-title">',e.title,"</div>",'<div class="native-image"></div>','<div class="native-body">',e.body,"</div>",'<div class="native-body2">',e.body2,"</div>","</a>"]).join("");return e+=["<script>",'var container=Array.from(document.getElementsByTagName("script")).pop().parentElement,','body=container.querySelector(".native-body"),','body2=container.querySelector(".native-body2");',"if(container.clientHeight-container.scrollHeight)",'body.innerText="";','body2.innerText="";',"<\/script>"].join("")}function n(e){return e?e.replace(/^\?/,"").split("&").reduce(function(e,t){var i=t.split("="),t=i[0],i=i[1];return/\[\]$/.test(t)?(e[t=t.replace("[]","")]=e[t]||[],e[t].push(i)):e[t]=i||"",e},{}):{}}var o,a,m=e("./ajax.js"),h=e("./utils.js"),s=e("./config.js"),d=e("./renderer.js"),b={auction:void 0,gdpr_consent_object:void 0},v=function(e,t){return(t.unit.settings&&t.unit.settings.nativeTemplate||r)(e,t)},e=function(e,t){var i=document.createElement("a");t&&t.noDecodeWholeURL?i.href=e:i.href=decodeURIComponent(e);t=t&&t.decodeSearchAsString;return{href:i.href,protocol:(i.protocol||"").replace(/:$/,""),hostname:i.hostname,port:+i.port,pathname:i.pathname.replace(/^(?!\/)/,"/"),search:t?i.search:n(i.search||""),hash:(i.hash||"").replace(/^#/,""),host:i.host||window.location.host}},y={createEidsArray:function(){var e=b.auction.findUnit(function(){return 1}),e=e&&e.toPrebidUIDs();return e&&e.userIdAsEids},JSEncrypt:0,sha256:0,formatQS:function(e){return Object.keys(e).map(function(t){return Array.isArray(e[t])?e[t].map(function(e){return t+"[]="+e}).join("&"):t+"="+e[t]}).join("&")},findIndex:function(e,t){return e.indexOf(t)},getRefererInfo:function(){return{referer:h.url().href,stack:[h.url().href],reachedTop:window.top===window,numIframes:0|!(window.top===window)}},mergeDeep:function(){var e=arguments[0];if(!e||"object"!=typeof e)return e;for(var t=1;t<arguments.length;++t){var i=arguments[t];if(i&&"object"==typeof i)for(var r in i){var n=typeof i[r];switch(n="object"===n&&Array.isArray(i[r])?"array":n){case"array":e[r]=(e[r]||[]).concat(i[r]);break;case"object":e[r]=y.utils.mergeDeep(e[r]||{},i[r]);break;default:e[r]=i[r]}}}return e},isPlainObject:function(e){return h.isobj(e)},getGptSlotInfoForAdUnitCode:function(t){var e;return(e=window.googletag&&"function"==typeof window.googletag.pubads&&"function"==typeof window.googletag.pubads().getSlots?find(window.googletag.pubads().getSlots(),function(e){return e.getAdUnitPath()===t||e.getSlotElementId()===t}):e)?{gptSlot:e.getAdUnitPath(),divId:e.getSlotElementId()}:{}},parseUrl:function(e,t){var i=document.createElement("a");t&&"noDecodeWholeURL"in t&&t.noDecodeWholeURL?i.href=e:i.href=decodeURIComponent(e);t=t&&"decodeSearchAsString"in t&&t.decodeSearchAsString;return{href:i.href,protocol:(i.protocol||"").replace(/:$/,""),hostname:i.hostname,port:+i.port,pathname:i.pathname.replace(/^(?!\/)/,"/"),search:t?i.search:n(i.search||""),hash:(i.hash||"").replace(/^#/,""),host:i.host||window.location.host}},getValue:function(e,t){return e[t]},buildUrl:function(e){return(e.protocol||"http")+"://"+(e.host||e.hostname+(e.port?":"+e.port:""))+(e.pathname||"")+(e.search?"?"+y.formatQS(e.search||""):"")+(e.hash?"#"+e.hash:"")},isBoolean:function(e){},getParameterByName:function(e){return h.qs(e)||""},getAdUnitSizes:!1,parseQueryStringParameters:function(e){var t,i="";for(t in e)e.hasOwnProperty(t)&&(i+=t+"="+encodeURIComponent(e[t])+"&");return i},getKeys:function(e){return Object.keys(e)},insertElement:function(e,t,i,r){i=(t=t||document).getElementsByTagName(i||"head"),i=(i=!i.length?t.getElementsByTagName("body"):i)[0];if(i)return i.insertBefore(e,r?null:i.firstChild)},getDataFromLocalStorage:function(e){if(window.localStorage)return window.localStorage.getItem(e)},inIframe:function(){return!h.url().is_top},_map:function(i,r){if(!i)return[];if("function"==typeof i.map)return i.map(r);var n=[];return h.each(i,function(e,t){n.push(r(e,t,i))}),n},deepAccess:h.deepAccess,deepSetValue:function(e,t,n){return t.split(".").reduce(function(e,t,i,r){return i===r.length-1?e[t]=n:e[t]=e[t]||{}},e)},getTopWindowUrl:function(){return h.url().href},getWindowSelf:function(){return window.self},getWindowTop:function(){return window.top},isArray:function(e){return Array.isArray(e)},parseSizesInput:function(e){return e.map(function(e){return e.join("x")})},parseGPTSingleSizeArray:function(e){if(Array.isArray(e)&&2===e.length&&!isNaN(e[0])&&!isNaN(e[1]))return e.join("x")},_each:h.each,cookiesAreEnabled:function(){return navigator.cookieEnabled},logError:function(){var e=Array.prototype.slice.apply(arguments);e.unshift("Adapter Error |"),h.log.apply(null,e)},logWarn:function(){var e=Array.prototype.slice.apply(arguments);e.unshift("Adapter Warning |"),h.log.apply(null,e)},logMessage:function(){var e=Array.prototype.slice.apply(arguments);e.unshift("Adapter Message |"),h.log.apply(null,e)},logInfo:function(){var e=Array.prototype.slice.apply(arguments);e.unshift("Adapter Info |"),h.log.apply(null,e)},getBidIdParameter:function(e,t){return t&&t[e]||""},getUniqueIdentifierStr:(a=0,function(){return++a}),convertCamelToUnderscore:function(e){return e.replace(/(?:^|\.?)([A-Z])/g,function(e,t){return"_"+t.toLowerCase()}).replace(/^_/,"")},convertTypes:function(r,n){return h.each(r,function(e){var t=r[e],i=r[e];n[e]="function"==typeof t?i(i):"string"===t?i&&i.toString():"number"===t?Number(i):i,isNaN(n[e])&&delete n[e]}),n},createTrackPixelHtml:h.pixelh,isEmpty:function(e){if(!e)return!0;if(Array.isArray(e)||"string"==typeof e)return!e.length;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},transformBidderParamKeywords:function(e){var i=[];return h.each(e,function(e,t){t={key:t};Array.isArray(e)&&(t.value=e.map(function(e){return e+""})),null!=e&&(t.value=[e+""]),t.hasOwnProperty("value")&&i.push(t)}),i},tryAppendQueryString:function(e,t,i){return i?e+(t+"="+encodeURIComponent(i))+"&":e},isFn:function(e){return"function"==typeof e},isStr:function(e){return"string"==typeof e},isEmptyStr:function(e){return""===e},assign:h.assign,isInteger:Number.isInteger||function(e){return Math.floor(e)===e&&isFinite(e)},isNumber:function(e){return"number"==typeof e},groupBy:function(e,i){return e.reduce(function(e,t){return(e[t[i]]=e[t[i]]||[]).push(t),e},{})},deepClone:function r(n){return Object.keys(n).reduce(function(e,t){var i={}.toString.call(n[t]).slice(8,-1);return e[t]="Array"===i||"Object"===i?r(n[t]):"Date"===i?new Date(n[t].getTime()):"RegExp"===i?new RegExp(n[t]):n[t],e},Array.isArray(n)?[]:{})},flatten:function(e,t){return e.concat(t)},chunk:function(e,r){return e.reduce(function(e,t,i){return i%r?e[e.length-1].push(t):e.push([t]),e},[])},fill:function(e,t){for(var i=[];i.length<t;i.push("object"==typeof e?y.utils.deepClone(e):e));return i},getMaxValueFromArray:Function.apply.bind(Math.max,0),getMinValueFromArray:Function.apply.bind(Math.min,0),isArrayOfNums:function(e,t){return e.length===(t||e.length)&&e.reduce(function(e,t){return e&&"number"==typeof t},!0)},generateUUID:h.genUUID,getBidRequest:function(e,t){for(var i=0;i<t.length;++i)for(var r=t[i],n=0;n<r.bids.length;++n){var o=r.bids[n];if(o.bidId===e||o.adId===e||o.bid_id===e)return o}h.err("shimGetBidRequestFail",e)},triggerPixel:function(e){h.uspi("S2S",e)},uniques:function(e,t,i){return i.indexOf(e)===t},contains:function(e,t){return 0<e.length&&-1!==e.indexOf(t)},getOrigin:function(){return h.url()},getDNT:function(){return"1"===navigator.doNotTrack||"1"===window.doNotTrack||"1"===navigator.msDoNotTrack||"yes"===navigator.doNotTrack},getCookie:h.cr,isGptPubadsDefined:function(){return window.googletag&&"function"==typeof window.googletag.pubads&&"function"==typeof window.googletag.pubads().getSlots},isSlotMatchingAdUnitCode:function(t){return function(e){return e.getAdUnitPath()===t||e.getSlotElementId()===t}},verify:null,_each:h.each,urlUtils:{parse:e},getUniqueIdentifierStr:function(){return++o},url:{type:o=0,parse:e,format:function(e){return(e.protocol||"http")+"://"+(e.host||e.hostname+(e.port?":".concat(e.port):""))+(e.pathname||"")+(e.search?"?".concat(y.formatQS(e.search||"")):"")+(e.hash?"#".concat(e.hash):"")}},BANNER:"banner",VIDEO:"video",NATIVE:"native",ADPOD:"adpod",OUTSTREAM:"outstream",INSTREAM:"instream",config:{DynamicPrefix:!0,getLegacyFpd:function(n){if("object"==typeof n){var t={};return Object.keys(n).forEach(function(r){var e="site"===r?"context":r;t[e]="context"===e||"user"===e?Object.keys(n[r]).filter(function(e){return"data"!==e}).reduce(function(e,t){var i;return"ext"===t?y.utils.mergeDeep(e,n[r][t]):((i={})[t]=n[r][t],y.utils.mergeDeep(e,i)),e},{}):n[r]}),t}},config:{},getConfig:function(e){switch(e){case"pageUrl":return h.url().href;case"bidderTimeout":return b.auction.max_ms;case"consentManagement.cmpApi":return b.gdpr_consent_object.cmpApi;case"rubicon.singleRequest":return!0;case"ortb2":return{site:{},user:b.auction.findUnit(function(){return 1}).toPrebidUIDs()};case"priceGranularity":return"custom";case"customPriceBucket":return{buckets:(s.libSettings().bid_strategy||"").split(",").map(function(e){var t=e.split(":"),e=t[1].split("-").map(Number);return{precision:2,increment:t[0],min:e[0],max:e[1]}})};default:return h.deepAccess(y.config.config,e)}},bidders:null,js:null,setDefaults:function(e){if("object"!=typeof e)return h.err("defaults must be an object, received",e);h.assign(y.config.config,e)},vastXml:null,vastUrl:null,align:null,closeButton:null,collapse:null,label:null,position:null,rubicon:null},parse:e,registerBidder:function(){},userSync:{registerSync:function(e,t,i){var r="image"===e||"img"===e?h.uspi:"iframe"===e?h.uspf:void 0;r?r(t,i):h.err(["Unknown sync type: ",e," from ",t].join(""))}},includes:function(e,t){return-1!==e.indexOf(t)},find:function(e,t){return e.filter(t)[0]},Renderer:d,loadExternalScript:function(e,t){h.log("module "+t+"is loading external JavaScript"),h.load(e,null,!0)},ajax:function(e,r,t,i){h.ajax(h.assign({},i,{data:t,url:e}),function(e,t,i){e&&r.error?r.error(e.err,e):r.success?r.success(t,i):r(t)})},getIabSubCategory:function(){return null},auctionManager:{getAdUnits:function(){return b.PBJSObjects.bidRequests}},getStorageManager:function(){var r=h.wrapAsync(function(e,t,i){i=i();return"function"==typeof t?t(i):i});return{findSimilarCookies:function(n,e){return r("findSimilarCookies",e,function(){for(var e=[],t=document.cookie.split(";");t.length;){var i=t.pop(),r=(r=i.indexOf("="))<0?i.length:r;0<=decodeURIComponent(i.slice(0,r).replace(/^\s+/,"")).indexOf(n)&&e.push(decodeURIComponent(i.slice(r+1)))}return e})},getCookie:function(e,t){return r("getCookie",t,function(){return h.cr(e)})},setCookie:function(n,o,a,s,d,e){return r("setCookie",e,function(){var e=d&&""!==d?" ;domain="+encodeURIComponent(d):"",t=a&&""!==a?" ;expires="+a:"",i=null!=s&&"none"==s.toLowerCase()?"; Secure":"",r=s?"; SameSite="+s:"";document.cookie=n+"="+encodeURIComponent(o)+t+"; path=/"+e+r+i})},cookiesAreEnabled:function(e){return r("cookiesAreEnabled",e,function(){return h.cookies})},hasLocalStorage:function(e){return r("hasLocalStorage",e,function(){try{return!!window.localStorage}catch(e){}})},localStorageIsEnabled:function(e){return r("localStorageIsEnabled",e,function(){try{if(localStorage.setItem("adb.cookieTest","1"),"1"===localStorage.getItem("adb.cookieTest"))return!0}catch(e){}return!1})},setDataInLocalStorage:function(e,t,i){return r("setDataInLocalStorage",i,function(){try{window.localStorage.setItem(e,t)}catch(e){}})},getDataFromLocalStorage:function(e,t){return r("getDataFromLocalStorage",t,function(){try{return window.localStorage.getItem(e)}catch(e){}return null})},removeDataFromLocalStorage:function(e,t){return r("removeDataFromLocalStorage",t,function(){try{window.localStorage.removeItem(e)}catch(e){}})}}},getGlobal:function(){return AdBridg.globals}};y.utils=y,t.exports={wrap:function(l){var g={};return function(d,c,e,u,p){this.gdprSupport=l.gdprSupport,this.uspSupport=l.uspSupport,this.settings=e,this.buildPrebidParams=function(e){return t=l.unitIDKey,i=l.floorKey,r=l.floorStr,n=e,delete(e=h.deepAssign({},n.params)).adjust,e[t]=n.bidder_unit_id,"string"==typeof e[t]&&-1===["undertone","yieldmo","pubmatic","conversant","deepintent"].indexOf(n.bidder_name)&&e[t].match(/^\d+$/)&&(e[t]=parseInt(e[t])),n.bidder_name.match(/^(index|ix)/)&&(e.bidFloorCur="USD"),"string"==typeof e.size&&(e.size=h.sizeStrToArr(e.size)),i&&(e[i]=n.min_cpm,r&&(e[i]=e[i].toFixed(2))),!e.video&&n.mediaTypes.video&&(e.video=h.copy(n.mediaTypes.video)),e;var t,i,r,n},this.getPrebidReqCtr=function(e){return(g[e]||0)+1},p&&p.on("pub.spa_pv_shutdown",function(){g={}}),this.onBidWon=h.wrapAsync(function(e){var t=l.spec;"function"==typeof t.onBidWon&&(h.log("Adapter onBidWon",d,e),t.onBidWon(e))}),this.onSetTarget=h.wrapAsync(function(e){var t=l.spec;"function"==typeof t.onSetTargeting&&(h.log("Adapter onSetTarget",d,e),t.onSetTargeting(e))}),this.execute=function(r){var t={};r.eachBidRequest(d,function(e){e=e.toPrebidAdUnitCode();t[e]||(t[e]=!0,g[e]=(g[e]||0)+1)}),b.auction=r,b.gdpr_consent_object=u,b.alias=d;var n=r.toPrebidBidderReq(d);p.trigger("bidder.requested",n,r),l.floorKey&&l.floorStr&&n.bids.forEach(function(e){e.params[l.floorKey]=String(e.params[l.floorKey])}),n.bidderCode.match("Sovrn")&&h.each(n.bids,function(e){e.params&&e.params.size&&(e.mediaTypes.banner.sizes=[e.params.size])}),n.start=(new Date).getTime();var e={bidderRequest:n,bidRequests:n.bids};b.PBJSObjects=e,h.each(e.bidRequests,function(e){try{l.spec.isBidRequestValid(e)}catch(e){h.log("Adapter BR invalid",e)}});var o=h.wrapAsync(l.spec.buildRequests,void 0,l.spec)(e.bidRequests,e.bidderRequest);Array.isArray(o)||(o=[o]);var i,a=[],s=(i={},r.eachBidRequest(d,function(e,t){i[t.id]={config:t,unit:e}}),i);"function"==typeof l.spec.onTimeout&&r.onHalt(function(){var t=[];h.each(n.bids,function(e){r.getBidRequest(e.bidId).responses.length||(e={bidId:e.bidId,bidder:e.bidder,adUnitCode:e.adUnitCode,auctionId:e.auctionId,params:[e.params],timeout:r.max_ms},h.log("AdBridg bid object for timeout calculation",d,e),t.push(e))}),t.length&&(h.log("Adapter onTimeout",d,t),l.spec.onTimeout(t))}),o.map(f).forEach(function(e,i){e.max_ms=r.ajax_ms,m(e,h.wrapAsync(function(e,t){a.push(t),!e&&t&&(t=h.wrapAsync(l.spec.interpretResponse,void 0,l.spec)({body:t},o[i]),(t=!Array.isArray(t)?[t].filter(Boolean):t).forEach(function(e){var t,i,r=s[e.requestId];if(!r)return h.err(["unrequested response from",d,":",JSON.stringify(e)].join(" "));e.requestTimestamp=n.start,e.responseTimestamp=(new Date).getTime(),e.timeToRespond=e.responseTimestamp-e.requestTimestamp,t=e,i=r.config,t.ad||t.native||t.renderer||(t.vastUrl||t.vastXml)&&i.renderer?(i=r,e={creative:(e=e).ad||(e.native?v(e.native,i):void 0),vastUrl:e.vastUrl,vastXml:e.vastXml,cpm:e.cpm,width:e.native?0|i.config.size.split("x")[0]:e.width,height:e.native?0|i.config.size.split("x")[1]:e.height,extras:{dealid:e.dealId||e.dealid,crid:e.creativeId||e.creativeid,ttl:e.ttl,cur:e.currency,nr:e.netRevenue,mediaType:e.mediaType},render:e.renderer&&e.renderer.render&&e.renderer.render.bind(e.renderer,e),rawbid:e},r.unit.addBid(r.config,e)):r.unit.addEmptyBid(r.config),r.found=!0})),a.length===o.length&&function(){Object.keys(s).map(function(e){return s[e]}).filter(function(e){return!e.found}).forEach(function(e){e.unit.addEmptyBid(e.config)}),p.trigger("bidder.done",n,d,r);[].concat(l.spec.getUserSyncs&&h.wrapAsync(l.spec.getUserSyncs,void 0,l.spec)({syncEnabled:!0,pixelEnabled:!0,iframeEnabled:!0},a.map(function(e){return{body:e||{}}}))||[]).forEach(function(e){y.userSync.registerSync(e.type,c,e.url)})}()}))})}}},polyfills:y}},{"./ajax.js":14,"./config.js":17,"./renderer.js":32,"./utils.js":35}],34:[function(e,t,i){var E=e("./utils"),j=e("./analytics"),T=e("./modules"),C=e("./config");t.exports=function(e){this.id=0,this.alias="",this.size="",this.other_sizes=[],this.min_cpm=0,this.max_ms=0,this.dom_ad_class="",this.settings={},this.unique_id=E.genID("U"),this.uuid=E.genUUID(),this.auction=!1,this.all_sizes=[],this.original_sizes=[];var y=this,u={},_={},p=0,n={},w=[],l={},r=!1,x=!1,t=!1,S=!1,g=!1,o=[];this.init=function(){e&&(y.set(e),T.trigger("unit.init_config",y))},this.restrictSizesTo=function(e){y.all_sizes=y.original_sizes,E.logl("sz","Unit",y.alias,"restrict sizes to",JSON.stringify(e)," old _allowed_sizes",JSON.stringify(g)),g=e,o.length&&y.allowSizes(o);for(var t,i,r=[],n=y.all_sizes.length-1;0<n;--n)-1===g.indexOf(y.all_sizes[n])&&(t=y.all_sizes[n],y.all_sizes.splice(n,1),0<=(i=y.other_sizes.indexOf(t))&&y.other_sizes.splice(i,1),r.push(t));a(),E.logl("sz","Unit",y.alias,"removed sizes",JSON.stringify(r),"allowed sizes",JSON.stringify(g)),T.trigger("unit.restrict_sizes",y,g,r)},this.allowSizes=function(e){o=[],E.each(e,function(e){E.logl("sz","Unit size added",y.alias,e),g&&-1==g.indexOf(e)&&g.push(e),-1==o.indexOf(e)&&o.push(e),-1==y.other_sizes.indexOf(e)&&y.other_sizes.push(e),-1==y.all_sizes.indexOf(e)&&y.all_sizes.push(e),a()}),E.logl("sz","Unit",y.alias,"allowed sizes",o),T.trigger("unit.allow_sizes",y,o)},this.configure=function(e){var t,i=E.qs("adb_maxms");for(t in i&&(e.max_ms=i),e)"unique_id"!=t&&"auction"!=t&&("settings"!=t?y.hasOwnProperty(t)&&"function"!=typeof y[t]&&(y[t]=JSON.parse(JSON.stringify(e[t]))):E.each(e[t],function(e,t){y.settings[t]=e}));y.all_sizes=[y.size].concat(y.other_sizes),y.original_sizes=[].concat(y.all_sizes),E.logl("sz","Unit definition original_sizes=",JSON.stringify(y.original_sizes),"size=",JSON.stringify(y.size),"other_sizes=",JSON.stringify(y.other_sizes)),E.qs("adb_force_bidder")&&(y.min_cpm=0),a(),T.trigger("unit.config",y)},this.addBidder=function(e,t){l[e]=t},this.eachBidder=function(e){for(var t in l)l.hasOwnProperty(t)&&u[t]&&e(t,l[t])},this.hasBidReqConf=function(){return 0<p},this.addBidReqConf=function(a,e,t){var s,d={id:E.genID("BR"),uuid:E.genUUID(),unit:y,adjust:1,bidder_name:a,bidder_id:e.bidder_id,bidder_unit_id:e.bidder_unit_id,min_cpm:y.min_cpm,size:y.size,other_sizes:y.other_sizes,all_sizes:[],responses:[],late_responses:[],test:e.test,toPrebid:function(){var e=y.auction.getBdrReqId(a),t=y.toPrebidUIDs(),i=E.copy(y.settings.mediaTypes),r=f(i,d.all_sizes);i.banner&&(i.banner.sizes=r);var n=y.toPrebidAdUnitCode();s=s||l[a].getPrebidReqCtr(n);var o=y.get("imp_ctr")||1,r=E.assign({src:"client",adUnitCode:n,adbconfig:y.alias,auctionId:y.auction.uuid,bidId:d.id,bidder:a,bidderRequestId:e,bidderRequestsCount:s,bidderWinsCount:0,bidRequestsCount:o,mediaTypes:i,params:d.params,sizes:r,transactionId:y.uuid,renderer:y.settings.renderer},t),t=d.mediaTypes.native||d.nativeParams;return t&&(r.nativeParams=t),r}};if(l[a]){E.deepAssign(d,y.settings,l[a].settings,e.settings),d.params=E.deepAssign({},l[a].settings,e.settings),1!=d.adjust&&(d.min_cpm=Number((d.min_cpm/d.adjust).toFixed(2)));var i=[],r=!1;if("function"==typeof e.mutate&&i.push({n:"BidReq",f:e.mutate}),"function"==typeof l[a].mutate&&i.push({n:"Bidder",f:l[a].mutate}),E.each(i,function(e){e.f(d,t)||(r=!0,E.log(e.n+" mutate rejected BR: ",d))}),!r)if(!d.test||E.qsab(a,d.bidder_id,!0)){if(e.settings.size?(d.other_sizes=[],d.size=e.settings.size):"string"==typeof d.other_sizes&&(d.other_sizes=d.other_sizes?d.other_sizes.split(","):[]),g){var n=[];0<=g.indexOf(d.size)&&n.push(d.size);for(var o=0;o<d.other_sizes.length;++o){var c=d.other_sizes[o];0<=g.indexOf(c)&&n.push(c)}if(!n.length)return void(g.length&&E.log("Unit ",y.alias," skipped configuration for ",d.bidder_name," because it does not support any of these sizes: ",g));d.size=n[0],d.other_sizes=n.slice(1)}d.all_sizes=[d.size].concat(d.other_sizes),E.logl("sz","Bid request sizes:",d.bidder_name,d.bidder_unit_id,{size:d.size,other:d.other_sizes,all:d.all_sizes}),u[a]||(u[a]=[]),u[a].push(d),_[d.id]=d,++p,d.params=l[a].buildPrebidParams(d),T.trigger("unit.config_brc",y,d)}else E.log("Test configuration skipped: ",d)}else E.err("BR missing bidder",a)},this.eachBidReqConf=function(e,t){"function"==typeof e&&(t=e,e=!1),e?E.each(u[e],t):E.each(_,t)},this.getBidReqConf=function(e){return _[e]||!1},this.getBid=function(e){for(var t=0;t<w.length;++t)if(w[t].id===e)return w[t];return!1},this.set=function(e,t){if("object"!=typeof e)n[e]=t;else for(var i in e)e.hasOwnProperty(i)&&y.set(i,e[i])},this.setImpData=function(e,t,i){var r=y.get("adb_imp_data")||{};r[e]=i&&r[e]||t,y.set("adb_imp_data",r)},this.get=function(e){return n[e]},this.halt=function(){x=!0},this.onReady=function(e){t=e,I()};var I=function(){S&&t&&setTimeout(function(){t(y)},0)};this.markEmpty=function(e){y.eachBidReqConf(e,function(e){e.responses.length||y.addEmptyBid(e)})},this.addEmptyBid=function(e){if("number"==typeof e||"string"==typeof e){var t=e;if(!(e=_[t]))return void E.err("Could not find bid req: ",t)}e.responses.length||x&&e.late_responses.length||y.addBid(e,{})};var A=function(e,t){return e._bid_cpm==t._bid_cpm&&e.width==t.width&&e.height==t.height&&e.creative==t.creative};this.bidRendered=function(e,t){var i,r=e.config.bidder_name;l[r]?((i=e.pbjsBid).status="rendered",l[r].onBidWon&&l[r].onBidWon(i),T.trigger("bid.render",e,t)):E.err("uBidRender.notFound",r,y.id)},this.gptTargetSet=function(e){var t=e.config.bidder_name;l[t]?((e=e.pbjsBid).status="targetingSet",l[t].onSetTarget&&l[t].onSetTarget(e)):E.err("gptTargetSet.notFound",t,y.id)};var i=!(this.addBid=function(e,t){if(!e||!y.getBidReqConf(e.id))return E.err("Bid request from ",e.bidder_name,"not found on unit",y.id),!1;var i=t.config&&t.config.unit&&t.config.unit.unique_id,r=Number(parseFloat(t.cpm).toFixed(2))||0,n=Number(t.width)||0,o=Number(t.height)||0,a=t.creative||"",s=t.creative_url||"",d=t.extras||{},c=t.force||!1,u=t.render,p=t.vastUrl,l=t.vastXml,g=t.rawbid;r||(t.empty=!0);var f=Number((r*e.adjust).toFixed(2)),m=e.min_cpm;!i&&0<m&&f<m&&(f=0);var h=C.libSettings().pubchkcreativefn;a&&"function"==typeof h&&!h(e,t,C.libSettings())&&(E.log("Creative blocked: ",e.bidder_id,n,o,f,d),f=0);var b=i?t.ts:E.dts(),v=i?t.ms:Math.round(b-y.auction.ts),h=y.id+"."+E.genID("B"),p={id:h=g&&g.adId?g.adId:h,ms:v,ts:b,config:e,viable:!x,cpm:f,_min_cpm:m,_bid_cpm:r,force:c,width:n,height:o,creative:a,creative_url:s,extras:d,render:u,vastUrl:p,vastXml:l,rawbid:g};if(i&&((p._origin=t)._pool||(t._pool=[]),t._pool.push(p)),k(p),function(e,t){for(var i=0;i<e.responses.length;++i)if(A(t,e.responses[i]))return!0;for(i=0;i<e.late_responses.length;++i)if(A(t,e.late_responses[i]))return!0;return!1}(e,p))return E.log("Unit ",y.alias,"ignored duplicate bid from ",e.bidder_name," on BR ",e.id,": ",p.ms,p.width+"x"+p.height,p.cpm.toFixed(2)),!1;l=p.viable?"":"late ";return!p.cpm&&0<p._bid_cpm?(g=1!=e.adjust?" * "+e.adjust+" = "+Number((p._bid_cpm*e.adjust).toFixed(2)):"",l+="below-floor ("+p._bid_cpm+g+" < "+p._min_cpm+") "):t.empty&&(l+="empty "),E.log("Unit",y.alias,"got",l+"bid"+(i?" (pooled from "+i+")":""),"from",e.bidder_name,"on BR",e.id,": ",p.ms,p.width+"x"+p.height,p.cpm.toFixed(2)),T.trigger("bid.ready",p),p.pbjsBid&&z(p),p.viable?(e.responses.push(p),w.push(p),T.trigger("bid.response",p),function(){if(!x){for(var e in _){e=_[e];if(e.responses&&!e.responses.length)return}S=!0,I()}}()):(e.late_responses.push(p),j.lateBid(p)),p});this.getWinner=function(){return i||(i=!0,"function"==typeof C.libSettings().filter_bid&&E.wrapAsync(C.libSettings().filter_bid),E.each(w,function(e){T.trigger("bid.auction_close_filter",y,e),e.blocked&&(e.cpm=0,E.log("Bid filtered out",y.alias,e.config.bidder_name,"reason:",e.blocked));var t=e.width+"x"+e.height;if(e.cpm&&g&&-1==g.indexOf(t)&&(!C.libSettings().bypass_size_check||-1==C.libSettings().bypass_size_check.bidder.indexOf(e.config.bidder_name))){var i=e._origin?"(pooled bid from "+e._origin.config.unit.unique_id+")":"";return E.log("Unit ",y.alias,"rejected",i,e.config.bidder_name,"invalid size",t),void(e._origin||E.err("U",y.id," B",e.config.bidder_id+"."+e.config.bidder_unit_id,t,g))}t=e.cpm&&(!r||e.cpm>r.cpm||e.cpm==r.cpm&&.5<Math.random());r&&r.force&&(t=!1),(e.force||t)&&(r=e)}),r&&(E.log("Unit ",y.alias,"set winner to ",r.config.bidder_name,r._origin&&"(pooled bid from "+r._origin.config.unit.unique_id+")"||"",r.width+"x"+r.height,r.cpm.toFixed(2)),T.trigger("bid.auction_winner",r))),r},this.toPrebidUIDs=function(){var r=!1;return E.each(n,function(e,t){var i=t.match(/^userId\.(.+)$/),t=t.match(/^userIdAsEids\.(.+)$/);!i&&!t||r||(r={userId:{},userIdAsEids:[]}),i&&(r.userId[i[1]]=e),t&&r.userIdAsEids.push(e)}),r&&r.userIdAsEids.sort(function(e,t){return e.name<t.name?1:-1}),r&&r.userId.pubcid&&(r.crumbs={pubcid:r.userId.pubcid}),r||{}};var a=function(){y.settings.mediaTypes||(y.settings.mediaTypes={}),y.settings.mediaTypes.banner={sizes:y.all_sizes.filter(Boolean).map(E.sizeStrToArr)}},f=function(e,t){for(var i=e.banner?E.copy(e.banner.sizes):[],r=i.length-1;0<=r;--r)-1===t.indexOf(i[r].join("x"))&&(debugit=!0,i.splice(r,1));if(e.video){var n=e.video.playerSize;E.isarr(n[0])||(n=[n]);for(r=0;r<n.length;++r){var o=n[r].join("x");-1===t.indexOf(o)&&i.push(n[r])}}return i},s=function(e,t){return E.toRange(e,t).kv.split("-").shift()},d=function(e){var t=!e&&"0.00";return{pbLg:t||s(e,".5:0-5"),pbMg:t||s(e,".1:0-20"),pbHg:t||s(e,".01:0-20"),pbDg:t||s(e,".01:0-2.99;.05:3-7.5;.5:8-20"),pbAg:t||s(e,".05:0-4.95;.1:5-9.5;.5:10-20"),pbCg:t||s(e,C.libSettings().bid_strategy)}},k=function(e){var t,i=e.config.toPrebid();e.rawbid&&e.viable?(t=E.deepAssign({},e.rawbid,{source:"client",statusMessage:"Bid available",currency:"USD",originalCurrency:"USD",cpm:e.cpm,originalCpm:e._bid_cpm,bidderCode:i.bidder,bidder:i.bidder,requestId:i.bidId,adUnitCode:i.adUnitCode,adbconfig:i.adbconfig,auctionId:i.auctionId,adId:e.id,mediaType:e.rawbid.mediaType,creativeId:e.rawbid.creativeId,netRevenue:e.rawbid.netRevenue,width:e.width,height:e.height}),e.pbjsBidO=E.deepAssign({},t),e.pbjsBid=t):e.pbjsNoBid=i},z=function(e){var t=e.width+"x"+e.height,i=d(e.pbjsBid.cpm),r=e.rawbid&&e.rawbid.adserverTargeting||{};E.assign(e.pbjsBid,i,{size:t,adserverTargeting:E.assign({hb_bidder:e.pbjsBid.bidderCode,hb_adid:e.pbjsBid.adId,hb_pb:i.pbMg,hb_size:t,hb_source:"client",hb_format:e.rawbid.mediaType||"banner"},r)})};this.toPrebidAdUnitCode=function(){return y.get("dom_id")||y.unique_id},this.toPrebidAdUnit=function(){var e=E.copy(this.settings.mediaTypes),t=f(e,this.all_sizes),i=this.toPrebidUIDs(),r=[];return this.eachBidReqConf(function(e){r.push(E.assign({bidder:e.bidder_name,params:e.params},i))}),{code:this.toPrebidAdUnitCode(),adbconfig:this.alias,sizes:t,mediaTypes:e,bids:r,transactionId:this.uuid}},this.toPrebidResults=function(){var t={noBids:[],bidsReceived:[],winningBids:[],prebidWinningBids:[]};return E.each(w,function(e){e.pbjsBid&&(t.bidsReceived.push(e.pbjsBid),"rendered"===e.pbjsBid.status?t.winningBids.push(e.pbjsBid):"targetingSet"===e.pbjsBid.status&&t.prebidWinningBids.push(e.pbjsBid)),e.pbjsNoBid&&t.noBids.push(e.pbjsNoBid)}),t},this.init()}},{"./analytics":15,"./config":17,"./modules":21,"./utils":35}],35:[function(e,t,x){var i;x.wrapAsync=function(e,t,i){return function(){try{return e.apply(i||this,arguments)}catch(e){t?t(e):x.err("Caught AsyncErr: ",e)}}},x.thread=function(t){return t=x.wrapAsync(t),function(){var e=arguments;setTimeout(function(){t.apply(this,e)},0)}},x.attempt=function(e,t){try{return e()}catch(e){}return t};function r(e){return{loading:1,interactive:2,complete:3}[e=e||document.readyState]||0}var n=1,o=(new Date).getTime(),a=function(){try{o-=Math.round(performance.now()),a=function(){return r()+"T"+Math.round(performance.now()).toString(36)},i=[n,o.toString(36),a()]}catch(e){a=function(){return r()+"T"+Math.max(0,(new Date).getTime()-o).toString(36)},i=[n=0,o.toString(36),r()+"T0"]}};a();function g(e,t,i){return e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent&&e.attachEvent("on"+t,i),i}function s(e,t,i){e.removeEventListener?e.removeEventListener(t,i):e.detachEvent&&e.detachEvent("on"+t,i)}x.on=g,x.off=s,g(document,"readystatechange",function(){3==r()&&s(document,"readystatechange",arguments.callee),i.push(a())}),x.perfts=function(){return a()},x.pgts=function(){return i},x.dts=function(){return n?Number(performance.now().toFixed(2)):Number(Math.max(0,(new Date).getTime()-o).toFixed(2))};var d=0;x.genID=function(e){return(e||"")+ ++d+Math.random().toString(16).substr(2)},x.vp=function(){var e,t,i,r=document;try{e=window.innerWidth,t=window.innerHeight,i=window.pageYOffset,window_x=window.pageXOffset}catch(e){}return{w:e||r.documentElement&&r.documentElement.clientWidth||r.body&&r.body.clientWidth||0,h:t||r.documentElement&&r.documentElement.clientHeight||r.body&&r.body.clientHeight||0,y:i||r.body&&r.body.scrollTop||0,x:window_x||r.body&&r.body.scrollLeft||0}},x.cr=function(e){e=String(document.cookie).match("(^|;)\\s*"+e+"\\s*=\\s*([^;]*)\\s*(;|$)");return e=e?decodeURIComponent(e[2]):""},x.cw=function(e,t,i){exp_string=0<(i=i||1)?"max-age="+86400*i:"max-age=-99999";t=e+"="+encodeURIComponent(t)+";"+exp_string+";path=/;domain="+window.location.hostname.replace(/.*?([^.]+\.[^.]+)$/,"$1");document.cookie=t},x.lr=function(t){var e,i="",r="";try{(r=localStorage.getItem(t))&&(r=JSON.parse(r),e=(new Date).getTime(),r.e&&parseInt(r.e,36)<e?x.logl("ls","LS expired",t,r,e):(x.logl("ls","LS read",t,r),i=r.v))}catch(e){x.logl("ls","LS read fail",t,r,e)}return i},x.lw=function(t,i,r){try{var e,n={v:i};r&&(e=(new Date).getTime(),n.s=e.toString(36),n.e=Math.round(e+864e5*r).toString(36)),n=JSON.stringify(n),localStorage.setItem(t,n),x.logl("ls","LS written",t,i,r,n)}catch(e){x.logl("ls","LS write fail",t,i,r,e)}},x.sr=function(t){try{return sessionStorage.getItem(t)}catch(e){x.logl("ss","SS read fail",t,e)}return""},x.sw=function(t,i){try{sessionStorage.setItem(t,i),x.logl("ss","SS written",t,i)}catch(e){x.logl("ss","SS write fail",t,i,e)}};try{x.cw("adbct",1),x.cookies=!!x.cr("adbct"),x.cw("adbct","",-1)}catch(e){}try{x.safari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}catch(e){}x.https=!("https:"!=location.protocol),x.genUUID=function(e){try{return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,x.genUUID)}catch(e){return 0}},x.qs=function(e){e=new RegExp(e+"=([^&]+)");return(String(window.location.search).match(e)||[]).pop()};var c=x.qs("adb_force_bidder"),u=x.qs("adb_allow_bidder"),p=[];c&&"*"!=c&&(p=p.concat(c.split(","))),u&&"*"!=u&&(p=p.concat(u.split(","))),x.qsab=function(e,t,i){return t=String(t),"*"==u||"*"==c||(!i&&!c||0<=p.indexOf(t)||0<=p.indexOf(e))},x.qsappend=function(e,t,i,r){return r&&!t?"":"&"+e+"="+(t=i?encodeURIComponent(t):t)},x.toqs=function(e,i){var r="";return x.each(e,function(e,t){x.isarr(e)?x.each(e,function(e){r+=x.qsappend(t+"[]",e,i)}):r+=x.qsappend(t,e,i)}),r.replace(/^\&/,"")},x.each=function(e,t){if(e&&0!==e.length)if(e.length)for(var i=0;i<e.length;++i)t(e[i],i);else for(var r in e)e.hasOwnProperty(r)&&t(e[r],r)},x.sizeStrToArr=function(e){return x.isarr(e)?e:"string"==typeof e?e.split("x").map(Number):(x.err("BadSizeConvert",e),e)},x.resize_element=function(e,t,i){e.style.width&&String(e.style.width).replace("px","")==t||(e.style.width=t+"px"),e.style.height&&String(e.style.height).replace("px","")==i||(e.style.height=i+"px"),e.getAttribute("width")&&e.getAttribute("width")!=t&&e.setAttribute("width",t),e.getAttribute("height")&&e.getAttribute("height")!=i&&e.setAttribute("height",i)},x.resize_iframe=function(e,t,i,r){try{for(var n=e.document.getElementsByTagName("iframe")||[],o=0;o<n.length;++o)try{if(n[o].contentDocument===t)return x.resize_element(n[o],i,r),void(e!==top&&x.resize_iframe(e.parent,e.document,i,r))}catch(e){}}catch(e){x.err("Error resizing window to "+i+"x"+r,e)}x.err("Failed to resize window to "+i+"x"+r)},x.url=function(){var t,i,r,n,o,e=top,a=window,s=document,d=!1;try{d=window.parent===window}catch(e){}try{t=e.location.host,i=e.location.pathname+e.location.search+e.location.hash,href=e.location.href,r=e.document.referrer,n=e.document.title,o=e.location.protocol}catch(e){try{t=(String(s.referrer).match(/^[^\/]+\/\/([^\/]+)/)||[]).pop(),i=(String(s.referrer).match(/^[^\/]+\/\/[^\/]+(\/.+)$/)||[]).pop(),o=(String(s.referrer).match(/^https?\:/)||[]).pop(),href=s.referrer,n=r=""}catch(e){}}return t&&i||(t=a.location.host,i=a.location.pathname+a.location.search+a.location.hash,o=a.location.protocol,href=a.location.href,r=s.referrer),{domain:t,page:i,href:href,referrer:r,title:n,is_top:d,protocol:o}},x.pixel=function(e,t){t=t?(new Date).getTime():Math.random();document.createElement("img").src=e+"&rnd="+t},x.pixelh=function(e){return e?'<div style="position:absolute;left:0px;top:0px;visibility:hidden;"><img src="'+encodeURI(e)+'"></div>':""},x.pixelf=function(e,t,i){return e?(t&&(e=encodeURI(e)),"<iframe "+(i=i?'sandbox="'+i+'"':"")+' id="'+x.genID("IPF")+'" src="'+e+'" frameborder="0" allowtransparency="true" marginheight="0" marginwidth="0" width="0" hspace="0" vspace="0" height="0" style="height:0p;width:0p;display:none;" scrolling="no"></iframe>'):""};var l,f=[],m={};x.uspf=x.wrapAsync(function(e,t){x.logl("px","UserSync qF",e,m[e],5,t),m[e]=(m[e]||0)+1,5<m[e]||f.push({a:e,t:"f",u:t})}),x.uspi=x.wrapAsync(function(e,t){x.logl("px","UserSync qI",e,m[e],5,t),m[e]=(m[e]||0)+1,5<m[e]||f.push({a:e,t:"i",u:t})});var h=!0,b=!0,v=500,y=!(x.cfusp=function(e,t,i){e||(h=!1),t||(b=!1),i&&(v=i),x.log("UserSync set: ",{image:h,iframe:b,delay:v})});x.cfuspfn=function(e){y=e};var _=x.wrapAsync(function(){if(clearTimeout(l),f.length){var e=Math.floor(Math.random()*f.length),t=f[e];if(f.splice(e,1),y&&!y(t))return x.logl("px","UserSync not sent (pub): ",t),_();if(b&&"f"==t.t){e=document.createElement("div");e.innerHTML=x.pixelf(t.u,!1,"allow-scripts allow-same-origin"),document.body.appendChild(e.firstChild),x.logl("px","UserSync (F): ",t.a,t.u)}else{if(!h||"i"!=t.t)return x.logl("px","UserSync not sent (!): ",t),_();document.createElement("img").src=t.u,x.logl("px","UserSync (I): ",t.a,t.u)}l=setTimeout(_,50)}});x.qdusp=function(){if(x.logl("px","UserSync Q",f,v,h,b,x.safari,x.cookies),x.safari||!x.cookies)return x.logl("px","UserSync skipped",x.safari,x.cookies);clearTimeout(l),l=setTimeout(_,v)};var w={};x.load=function(e,t,i,r){if(t=t?x.wrapAsync(t):function(){},!i||!w[e]){i&&(w[e]||(w[e]={ready:!1,cbs:[t]}),t=function(){w[e].ready=!0,x.each(w[e].cbs,function(e){e()})});var n=document.createElement("script");return n.type="text/javascript",n.async=!0,n.readyState?n.onreadystatechange=function(){"loaded"!=n.readyState&&"complete"!=n.readyState||(n.onreadystatechange=null,t())}:n.onload=t,n.src=e,(r||document.body||document.head).appendChild(n),n}w[e].ready?t():w[e].cbs.push(t)},x.loadCached=function(e,t){x.load(e,t,!0)},x.iiframe=function(e){var t=document.createElement("iframe");return t.id=x.genID("IIF"),t.height=0,t.width=0,t.border="0px",t.hspace="0",t.vspace="0",t.marginWidth="0",t.marginHeight="0",t.style.border="0",t.scrolling="no",t.frameBorder="0",t.src=void 0===e?"about:blank":e,t.style.display="none",t},x.prepend=function(e,t){return"string"==typeof t&&(t=document.createElement(t)),e.prepend?e.prepend(t):e.children.length?e.insertBefore(t,e.children[0]):e.appendChild(t),t},x.isarr=function(e){return"[object Array]"===Object.prototype.toString.call(e)};var S=!(x.isobj=function(e){return"[object Object]"===Object.prototype.toString.call(e)});x.isdebug=function(){return S},x.setdebug=function(e){e&&(S=e,document.cookie="adb_debug="+S+";path=/;domain=."+location.hostname.replace(/.*?([^.]+\.[^.]+)$/,"$1"))},x.setdebug(x.qs("adb_debug")||x.cr("adb_debug")),x.log=function(){if(S){var e=Array.prototype.slice.apply(arguments);e.unshift("AdBridg | "+x.dts().toFixed(2));try{console.log.apply(console,e)}catch(e){}}},x.logl=function(e){S==e&&x.log.apply(x,["log::",e].concat(Array.prototype.slice.apply(arguments,[1])))};var I,A=[];x.err=function(){var t=Array.prototype.slice.apply(arguments);if(S){var e=[].concat(t);e.unshift("AdBridg | "+x.dts().toFixed(2)+" | ERROR: ");try{console.log.apply(console,e)}catch(e){}}I&&!(t=I(t))||A.length&&x.each(A,function(e){e.apply(null,t)})},x.onerr=function(e){A.push(e)};var k=!(x.wraperr=function(e){I=e}),z=[];x.onrec=function(e){for(k=e;z.length;)k(z.shift())},x.rec=function(e){k?k(e):z.push(e)};var E={};x.toRange=function(e,t){e=Math.round(100*e);for(var i=function(e){if(!E[e=e||".05:.05-10"]){E[e]=[];for(var t=e.split(","),i=0;i<t.length;++i){var r=t[i].split(":"),n=r[1].split("-"),n={increment:Math.round(100*parseFloat(r[0])),upper:Math.round(100*parseFloat(n[1])),final:!1};i==t.length-1&&(n.final=n.upper-n.increment),E[e].push(n)}}return E[e]}(t),r=0;r<i.length;++r){var n=i[r];if(n.final&&e>=n.upper-n.increment)return{r:parseFloat(((n.final+n.increment)/100).toFixed(2)),kv:(n.final/100).toFixed(2)+"-"};if(!(e>=n.upper)){var o=Math.floor(e/n.increment)*n.increment/100,a=parseFloat((o+n.increment/100).toFixed(2)),n=a-.01;return{r:a,kv:Math.max(.01,o).toFixed(2)+"-"+n.toFixed(2)}}}};function j(e){return 61<e?j(e/62|0)+j(e%62):35<e?String.fromCharCode(e+29):9<e?String.fromCharCode(e+87):-1<e?e+"":e<0?"-"+j(-e):"NaN"}x.b62=j,x.fb62=function(e){for(var t=0,i=e.length-1,r=i;0<=r;r--){var n=e.charCodeAt(r),o=r===i?1:Math.pow(62,i-r);if(96<n&&n<123)t+=o*(n-87);else if(64<n&&n<91)t+=o*(n-29);else{if(!(47<n&&n<58))return NaN;t+=o*(n-48)}}return t},x.dom=x.wrapAsync(function(e,t,i,r,n,o){T.add(e,t,i,r,n,o)}),x.undom=x.wrapAsync(function(e,t){T.remove(e,t)}),x.lzrescan=x.wrapAsync(function(){T.rescan()});var T=new function(){var t,s={},d=0,c=[],i=!1,r=!1,u=!1;this.add=function(e,t,i,r,n,o){var a;e instanceof Node&&((a=e).id||(a.id=x.genID("adb_auto_")),e=a.id),s[e]=s[e]||[],s[e].push({c:r,d:t,t:i,i:e,f:n,x:o}),d+=1,l()},this.remove=function(e,t){var i,r=s[e]||[];if(t)for(i=r.length-1;0<=i;--i)r[i].c===t&&s[e].splice(i,1);for(t&&r.length||delete s[e],i=c.length-1;0<=i;--i)t&&c[i].c!==t||c.splice(i,1)},this.rescan=function(){x.logl("lz","Lazy explicit rescan"),t=setTimeout(l,0)},g(window,"scroll",function(){u=!0,!t&&d&&(x.logl("lz","Lazy scroll wait",100),t=setTimeout(l,100))});function p(e,t){if(e.f&&!e.f(e,t,u))return x.logl("lz","Lazy blocked",e,u),!1;if(t.in){if(!e.x)return x.logl("lz","Lazy cannot measure el",e,t),!1;var i=document.getElementById(e.i);if(!i)return x.logl("lz","Lazy collapse check - cannot read el",e,t),!1;var r=(i||{}).parentNode;if(!r)return x.logl("lz","Lazy collapse check - cannot read parent",e,t),!1;var n=x.where(r);if(!n.in)return x.logl("lz","Lazy collapse check - parent invis",e,t,n),!1;n=document.createElement("span");n.style="position:absolute;display:block;width:1px;height:1px;",r.insertBefore(n,i);i=x.where(n);r.removeChild(n),x.logl("lz","Lazy collapse check - using replacement coords",JSON.stringify({coords:t,replacement:i})),t=i}return 0<e.d&&e.d<1?0===t.d&&(0===t.c.h||0===t.c.w)||t.v>e.d:t.d<=e.d}var l=x.thread(function(){var a,e=x.dts();clearTimeout(t),t=!1,i||e-r<50?t=setTimeout(l,50):(i=!0,r=e,x.logl("lz","Lazy measure",e),a=[],x.each(s,function(e,t){var i=x.where(t);if(!i)return x.logl("lz","Lazy no dom",t);for(var r=e.length-1;0<=r;--r){var n=e[r],o=p(n,i);x.logl("lz","Lazy check",JSON.stringify({el:t,coords:i,reqdist:n.d,criteria:o,seenscr:u})),o&&(--d,e.splice(r,1),c.push(n),x.logl("lz","Lazy to duration",t))}e.length||a.push(t)}),x.each(a,function(e){delete s[e]}),e=function(e){for(var t=!1,i=c.length-1;0<=i;--i){var r=c[i],n=r.i;if(x.logl("lz","Lazy check time",r,n," has scroll event: ",u),r.tx){if(!p(r,x.where(n))){x.logl("lz","Lazy back to distance",n),r.tx=0,c.splice(i,1),s[n]=s[n]||[],s[n].push(r),d+=1;continue}}else r.tx=e+r.t;var o=r.tx-e;o<=0?(x.logl("lz","Lazy execute",n),c.splice(i,1),x.thread(r.c)(n)):t=t?Math.min(1+o,t):1+o}return t}(e)||100,c.length&&(x.logl("lz","Lazy duration wait",e),t=setTimeout(l,e)),i=!1)})};x.obox=function(e,t){t={top:Math.max(e.top,t.top),bottom:Math.min(e.bottom,t.bottom),left:Math.max(e.left,t.left),right:Math.min(e.right,t.right)};return t.width=Math.round(t.right-t.left),t.height=Math.round(t.bottom-t.top),t.area=Math.round(t.width*t.height),t},x.opct=function(e,t,i,r,n){var o=x.obox(t,{top:0,bottom:i.h,left:0,right:i.w}),a=o.area,s=a/(Math.round(t.width)*Math.round(t.height)),d={o:0,p:0,v:s,e:{}};if(!a)return d;var i=o.left+o.width/2,t=o.top+o.height/2,c={mm:[i,t],tl:[o.left+5,o.top+5],br:[o.right-5,o.bottom-5]};7<=n&&(c.tm=[i,o.top+5],c.tr=[o.right-5,o.top+5],c.bl=[o.left+5,o.bottom-5],c.bm=[i,o.bottom-5]),9<=n&&(c.mr=[o.right,t],c.ml=[o.left,t]);var u,p=[];for(u in c)if(c.hasOwnProperty(u)){var l=c[u],g=document.elementFromPoint(l[0],l[1]);if(r&&g&&(((l=document.getElementById(r))===g||g.contains(l)||l.contains(g))&&(g=!1)),g&&g!==e&&!e.contains(g)&&!g.contains(e)){var f=x.obox(o,g.getBoundingClientRect()),m=0,h=0,b=g,v=b.parentNode;if(!v.contains(e)){for(m+=1;v.parentNode&&!v.parentNode.contains(e);)m+=1,v=v.parentNode;for(;v!==b;){var y=x.obox(o,v.getBoundingClientRect()),_=y.area==f.area;(y.area>f.area||_&&h<m)&&(f=y,g=v,h=m);for(var y=v,w=0;w<v.children.length;++w)if(v.children[w]===b||v.children[w].contains(b)){--m,v=v.children[w];break}if(v===y)break}}if(-1===p.indexOf(g)&&(p.push(g),d.e[u]={el:g,p:f.area,o:f.area/a},d.p+=f.area,d.o=Math.min(1,d.p/a),d.v=d.o?(1-d.o)*s:s,1===d.o))break}}return d},x.where=function(e,t,i){if(!(e="string"==typeof e?document.getElementById(e):e))return!1;var r=e.getBoundingClientRect(),n=x.vp(),o=r.top,a=r.height,s=r.top+a,d="in_viewport",c=0,u=1,p=0<r.width&&0<a,l=0,g=C(e);g&&(l=1,d="unknown"),o<0?(c=s<0?Math.abs(s):0,d=((u=0<s&&p?s/a:0)?"partially_":"")+"above_viewport"):s>n.h?(c=o>n.h?o-n.h:0,d=((u=o<n.h&&p?(n.h-o)/a:0)?"partially_":"")+"below_viewport"):p||(u=0);p=null;return{i:g,p:d,d:c,v:u,in:l,o:p=t&&u&&!l?x.opct(e,r,n,i):p,c:{vp:n,t:o,l:r.left,h:a,w:r.width,b:s}}},x.assign=function(e,t){"use strict";if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(e),r=1;r<arguments.length;r++){var n=arguments[r];if(null!=n)for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])}return i},x.copy=function(e){if(x.isarr(e)){for(var t=[],i=0;i<e.length;++i)t.push(x.copy(e[i]));return t}return"object"==typeof e?x.deepAssign({},e):e},x.deepAssign=function(e){if(!e)return e;for(var i=Object(e),t=1;t<arguments.length;t++)x.each(arguments[t],function(e,t){i[t]=x.copy(e)});return i},x.deepAccess=function(e,t,i){e=t.split(".").reduce(function(e,t){return(e||{})[t]},e);return!e&&i?i:e},x.deepEq=function(r,n,o,a){if(a=a||"",(o=o||[]).some(function(e){return e===a}))return!0;if("function"==typeof n&&n(r))return!0;if("object"!=typeof r||"object"!=typeof n||null==r||null==n)return r===n||{p:a,o1:r,o2:n};var e=Object.keys(Object.assign({},r,n)).reduce(function(e,t){var i=a?a+"."+t:t,i=x.deepEq(r[t],n[t],o,i);return i&&i.hasOwnProperty("p")&&i.hasOwnProperty("o1")&&i.hasOwnProperty("o2")?e.push(i):!0!==i&&(e=e.concat(i)),e},[]);return 0===e.length||e};var C=function(e){try{if(!e)return"no_dom_el";var t=window.getComputedStyle&&window.getComputedStyle(e)||{};if("none"==t.display)return"display_none";if("hidden"==t.visibility)return"vis_hidden"}catch(e){x.err("get_invis_fail")}return!1};x.dom_invisible=x.wrapAsync(function(e){var t=document.getElementById(e),i=C(t);if(i)return"el_"+i;for(var r=0;t.parentNode&&(t=t.parentNode)!==document.body;)if(r+=1,i=C(t))return"anc_"+r+"_"+i;return!1})},{}]},{},[19]);